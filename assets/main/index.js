System.register("chunks:///_virtual/Block.ts",["cc"],(function(){"use strict";var c;return{setters:[function(t){c=t.cclegacy}],execute:function(){c._RF.push({},"67fb9IydbBNA4u2MNwLcBIG","Block",void 0),c._RF.pop()}}}));

System.register("chunks:///_virtual/BlockComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PopupUnlockBlock.ts"],(function(t){"use strict";var e,o,i,n,c,a,s,r,l,d,u,h,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){c=t.cclegacy,a=t._decorator,s=t.Prefab,r=t.Vec3,l=t.instantiate,d=t.ParticleSystem,u=t.director,h=t.Component},function(t){p=t.PopupUnlockBlock}],execute:function(){var P,f,N,k,v;c._RF.push({},"aadc9bErLFGTq848KEPIpSM","BlockComponent",void 0);var B=a.ccclass,g=a.property;t("BlockComponent",(P=B("BlockComponent"),f=g(s),P((v=e((k=function(t){function e(){for(var e,o=arguments.length,c=new Array(o),a=0;a<o;a++)c[a]=arguments[a];return e=t.call.apply(t,[this].concat(c))||this,i(e,"actionParticlePrefab",v,n(e)),e.statusNode=void 0,e.renderRoot2D=void 0,e.selectingBlock=void 0,e.actionParticleNode=void 0,e.pos=new r,e}o(e,t);var c=e.prototype;return c.start=function(){this.renderRoot2D=this.node.getChildByName("RenderRoot2D"),this.statusNode=this.renderRoot2D.getChildByName("StatusNode"),this.selectingBlock=this.node.getChildByName("SelectingBlock")},c.updateStatus=function(t){t.camera.update(),t.convertToUINode(this.renderRoot2D.worldPosition,this.statusNode.parent,this.pos),this.statusNode.setPosition(this.pos),this.statusNode.position.add3f(0,40,0)},c.showActionParticle=function(){this.actionParticleNode&&(this.actionParticleNode.removeFromParent(),this.actionParticleNode=void 0),this.actionParticleNode=l(this.actionParticlePrefab),this.node.addChild(this.actionParticleNode),this.actionParticleNode.getComponentInChildren(d).play()},c.activeStatusNode=function(t){this.statusNode.active=t,this.selectingBlock.active=!1},c.selectBlock=function(t){this.selectingBlock.active=t},c.onClickUnlock=function(){u.getScene().getChildByName("UI_Canvas").getChildByName("PopupUnlockBlock").getComponent(p).show()},e}(h)).prototype,"actionParticlePrefab",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=k))||N));c._RF.pop()}}}));

System.register("chunks:///_virtual/BlockProcessingSystem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.mjs_cjs=&original=.js","./services.ts","./GameEvent.ts","./Common2.ts","./EventTarget.ts","./ResourceUtil.ts","./UseCache.ts","./index.js"],(function(e){"use strict";var t,n,o,i,c,r,l,s,a,u,p,f,g;return{setters:[function(e){t=e.inheritsLoose,n=e.applyDecoratedDescriptor,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){c=e.cclegacy},null,function(e){r=e.requestUnlockSlot,l=e.requestUpgradeBlock},function(e){s=e.GameEvent},function(e){a=e.showErrorMessage},function(e){u=e.default},function(e){p=e.ResourceUtil},function(e){f=e.userCache},function(e){g=e.default}],execute:function(){var k,h,d,m,B,U,b;c._RF.push({},"10787oVqzFLBphXOMMe9KeP","BlockProcessingSystem",void 0);e("BlockProcessingSytem",(k=g.Inject("scene"),h=g.Inject("camera"),d=g.Inject("gameState"),m=function(e){function n(){for(var t,n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return t=e.call.apply(e,[this].concat(c))||this,o(t,"scene",B,i(t)),o(t,"camera",U,i(t)),o(t,"gameState",b,i(t)),t}t(n,e);var c=n.prototype;return c.initialized=function(){u.on(s.UnlockBlock,this.onUnlockBlock,this),u.on(s.UpgradeBlock,this.onUpgradeBlock,this)},c.onUnlockBlock=function(){var e=f.blockDatas.length+1;r(e,(function(e,t){e?(f.blockDatas.push({level:0,properties:{productivityPercent:0,timeDecreasePercent:0}}),f.updateGardenBlocks()):p.getUIPrefabRes("PopupDialog",(function(e,n){e||a(n,t)}))}))},c.onUpgradeBlock=function(){var e=this.gameState.selectedBlock;e&&l(e,(function(t,n){if(t){if(f.blockDatas.length<=e)return;f.blockDatas[e].level+=1,f.updateGardenBlocks()}else p.getUIPrefabRes("PopupDialog",(function(e,t){e||a(t,n)}))}))},c.process=function(){},c.dispose=function(){u.off(s.UnlockBlock,this.onUnlockBlock,this),u.on(s.UpgradeBlock,this.onUpgradeBlock,this)},n}(g.System),B=n(m.prototype,"scene",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=n(m.prototype,"camera",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=n(m.prototype,"gameState",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m));c._RF.pop()}}}));

System.register("chunks:///_virtual/BlockRenderingSystem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.mjs_cjs=&original=.js","./BlockComponent.ts","./UseCache.ts","./index.js"],(function(e){"use strict";var t,n,i,c,o,r,a,l,s;return{setters:[function(e){t=e.inheritsLoose,n=e.applyDecoratedDescriptor,i=e.initializerDefineProperty,c=e.assertThisInitialized},function(e){o=e.cclegacy,r=e.Vec3},null,function(e){a=e.BlockComponent},function(e){l=e.userCache},function(e){s=e.default}],execute:function(){var u,p,h,f,m,d,g;o._RF.push({},"3cc31q1UjRLqo8pQI2ua2Is","BlockRenderingSystem",void 0);e("BlockRenderingSystem",(u=s.Inject("scene"),p=s.Inject("camera"),h=s.Inject("gameState"),f=function(e){function n(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"scene",m,c(t)),i(t,"camera",d,c(t)),i(t,"gameState",g,c(t)),t.blockGroup=void 0,t.temp=new r,t}t(n,e);var o=n.prototype;return o.initialized=function(){this.blockGroup=this.scene.getChildByName("BlockGroup")},o.updateBlocks=function(){var e=l.blockDatas;if(e)for(var t=0;t<this.blockGroup.children.length;t++){var n=this.blockGroup.children[t];if(t>e.length)n.active=!1;else{n.active=!0;var i=n.getComponent(a);i.activeStatusNode(t===e.length),t<e.length?i.selectBlock(this.gameState.selectedBlock===t):i.updateStatus(this.camera)}}},o.process=function(){this.updateBlocks()},o.dispose=function(){},n}(s.System),m=n(f.prototype,"scene",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=n(f.prototype,"camera",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=n(f.prototype,"gameState",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f));o._RF.pop()}}}));

System.register("chunks:///_virtual/CameraProcessingSystem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.mjs_cjs=&original=.js","./Constants.ts","./index.js"],(function(e){"use strict";var t,i,o,r,a,s,n,c;return{setters:[function(e){t=e.inheritsLoose,i=e.applyDecoratedDescriptor,o=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,s=e.Vec3},null,function(e){n=e.Constants},function(e){c=e.default}],execute:function(){var l,h,u,m,p,g,d;a._RF.push({},"a7b2bThI51IspotUc3RVGvT","CameraProcessingSystem",void 0);e("CameraProcessingSystem",(l=c.Inject("scene"),h=c.Inject("camera"),u=c.Inject("gameState"),m=function(e){function i(){for(var t,i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return t=e.call.apply(e,[this].concat(a))||this,o(t,"scene",p,r(t)),o(t,"camera",g,r(t)),o(t,"gameState",d,r(t)),t.blockGroup=void 0,t.ranchGroup=void 0,t.currentZoomTarget=n.SHOW_MAP_ORTHO_HEIGHT,t.cameraPos=new s,t.tempVec=new s,t}t(i,e);var a=i.prototype;return a.initialized=function(){this.ranchGroup=this.scene.getChildByName("RanchGroup"),this.blockGroup=this.scene.getChildByName("BlockGroup"),this.lookAt(25,0,15)},a.lookAt=function(e,t,i){this.tempVec.set(this.camera.node.forward).multiplyScalar(n.CAMERA_DISTANCE),this.cameraPos.set(e,t,i).subtract(this.tempVec),this.camera.node.setPosition(this.cameraPos)},a.process=function(){if(this.gameState.cameraZoomToDetail){if(void 0!==this.gameState.selectedBlock){var e=this.blockGroup.children[this.gameState.selectedBlock];this.lookAt(e.position.x,e.position.y,e.position.z)}else if(void 0!==this.gameState.selectedRanch){var t=this.ranchGroup.children[this.gameState.selectedRanch];this.lookAt(t.position.x,t.position.y,t.position.z)}this.currentZoomTarget=n.SHOW_DETAIL_ORTHO_HEIGHT}else this.currentZoomTarget=this.gameState.currentOrthoHeight;var i=this.camera.orthoHeight,o=i+.4*(this.currentZoomTarget-i);Math.abs(o-this.currentZoomTarget)<.01&&(o=this.currentZoomTarget),this.camera.orthoHeight=o},i}(c.System),p=i(m.prototype,"scene",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=i(m.prototype,"camera",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=i(m.prototype,"gameState",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m));a._RF.pop()}}}));

System.register("chunks:///_virtual/Common.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){var c;e("CurrencyType",void 0),t._RF.push({},"d6157XEXZlHaJwOzLWpVms8","Common",void 0),function(e){e.Gold="gold",e.Water="water",e.Cash="cash"}(c||(c=e("CurrencyType",{}))),t._RF.pop()}}}));

System.register("chunks:///_virtual/Common2.ts",["cc","./PopupDialog.ts","./ConfigManager.ts"],(function(e){"use strict";var t,n,i,o,a,r,s;return{setters:[function(e){t=e.cclegacy,n=e.Sprite,i=e.director,o=e.instantiate,a=e.view},function(e){r=e.PopupDialog},function(e){s=e.configManager}],execute:function(){t._RF.push({},"ebd3709pOBG37+9NHVIa3bH","Common",void 0);e("setButtonEnable",(function(e,t){e.interactable=t;var i=e.getComponent(n);i&&(i.grayscale=!t)}));var c=e("showDialog",(function(e,t,n){if(e){var s=i.getScene();if(s){var c=o(e),g=c.getComponent(r);g.setMessage(t),g.setOkCallback(n);var u=a.getDesignResolutionSize();c.setPosition(u.width/2,u.height/2,0),s.addChild(c)}}}));e("showErrorMessage",(function(e,t){if(e){var n=JSON.parse(t).error,i=s.stringConfig[n];c(e,i||n)}}));t._RF.pop()}}}));

System.register("chunks:///_virtual/ConfigManager.ts",["cc"],(function(i){"use strict";var n,s,o;return{setters:[function(i){n=i.cclegacy,s=i.resources,o=i.JsonAsset}],execute:function(){var e;i("ItemType",void 0),n._RF.push({},"6a54ez5SKJP/ofE4xw/UzM4","ConfigManager",void 0),function(i){i.Plant="plant",i.Fertilizer="fertilizer"}(e||(e=i("ItemType",{})));var t=i("ConfigManager",function(){function i(){this.itemConfigs={},this.dailyQuestConfigs=[],this.shopItemConfigs=[],this.stringConfig={},this.blockUpgrade=void 0,this.blockUnlock=void 0,this.configFiles={item:"configs/items",block_upgrade:"configs/block_upgrade",quest:"configs/quest",shop:"configs/shop_item",string:"configs/string"}}return i.prototype.initData=function(){var i=this,n=function(n){s.load(i.configFiles[n],o,(function(s,o){if(o&&o.json)switch(n){case"item":i.itemConfigs=o.json;break;case"block_upgrade":i.blockUpgrade=o.json.upgrade,i.blockUnlock=o.json.unlock;break;case"quest":i.dailyQuestConfigs=o.json;break;case"shop":i.shopItemConfigs=o.json;break;case"string":i.stringConfig=o.json}}))};for(var e in this.configFiles)n(e)},i}());i("configManager",new t).initData(),n._RF.pop()}}}));

System.register("chunks:///_virtual/Constants.ts",["cc"],(function(_){"use strict";var A;return{setters:[function(_){A=_.cclegacy}],execute:function(){A._RF.push({},"ec99aRQ9OtPeJTqi7gqtULU","Constants",void 0);var O=_("Constants",(function(){}));O.FERTILIZE_SKIP_TIME=1800,O.MAX_ORTHO_HEIGHT=50,O.SHOW_MAP_ORTHO_HEIGHT=30,O.SHOW_DETAIL_ORTHO_HEIGHT=10,O.MAP_ZOOM_RATE=.1,O.MAP_DRAG_RATIO=30,O.CAMERA_DISTANCE=350,O.BLOCK_UPGRADE_PRICE=5e3,O.TOTAL_DAILY_QUEST=3,O.ANIMAL_DROP_CURRENCY_COOLDOWN=43200,O.ANIMAL_BATHING_COOLDOWN=28800,O.ANIMAL_FEEDING_COOLDOWN=14400,O.ANIMAL_PETTING_COOLDOWN=14400,O.ANIMAL_BATHING_DROP_RATIO=1,O.ANIMAL_FEEDING_DROP_RATIO=.5,O.ANIMAL_PETTING_DROP_RATIO=.5,O.DATA_SYNC_TIME=30,O.KEY_SOUND_ENABLE="sound_enable",O.KEY_MUSIC_ENABLE="music_enable",O.KEY_SAVE_USER_NAME="save_user_name",O.KEY_SAVE_PASSWORD="save_password",A._RF.pop()}}}));

System.register("chunks:///_virtual/DataSyncProcessingSystem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.mjs_cjs=&original=.js","./Constants.ts","./UseCache.ts","./index.js"],(function(t){"use strict";var n,s,e,c,i;return{setters:[function(t){n=t.inheritsLoose},function(t){s=t.cclegacy},null,function(t){e=t.Constants},function(t){c=t.userCache},function(t){i=t.default}],execute:function(){s._RF.push({},"d2b8fUtJz1HnqLne66730i3","DataSyncProcessingSystem",void 0);t("DataSyncProcessingSystem",function(t){function s(){for(var n,s=arguments.length,e=new Array(s),c=0;c<s;c++)e[c]=arguments[c];return(n=t.call.apply(t,[this].concat(e))||this).time=0,n}n(s,t);var i=s.prototype;return i.process=function(){this.time>e.DATA_SYNC_TIME&&(this.time=0,this.syncData())},i.syncData=function(){c.updateGardenBlocks(),c.updateGardenRanches()},s}(i.System));s._RF.pop()}}}));

System.register("chunks:///_virtual/EventTarget.ts",["cc"],(function(e){"use strict";var t,c;return{setters:[function(e){t=e.cclegacy,c=e.EventTarget}],execute:function(){t._RF.push({},"526c2IS4YBHsJe+yM4iuclr","EventTarget",void 0);e("default",new c);t._RF.pop()}}}));

System.register("chunks:///_virtual/GameEvent.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){var a;e("GameEvent",void 0),t._RF.push({},"802dcSUOelIpr+U4NJnD2Mf","GameEvent",void 0),function(e){e.ClearSelect="GameEvent.ClearSelect",e.TouchBlock="GameEvent.TouchBlock",e.Plant="GameEvent.Plant",e.Water="GameEvent.Water",e.Fertilize="GameEvent.Fertilize",e.Pesticides="GameEvent.Pesticides",e.Harvest="GameEvent.Harvest",e.BuyRanch="GameEvent.BuyRanch",e.UnlockBlock="GameEvent.UnlockBlock",e.UpgradeBlock="GameEvent.UpgradeBlock",e.Petting="GameEvent.Petting",e.Bathing="GameEvent.Bathing",e.Feeding="GameEvent.Feeding",e.UpdateUserInfo="GameEvent.UpdateUserInfo",e.UpdateGardenBlocks="GameEvent.UpdateGardenBlocks",e.UpdateGardenRanches="GameEvent.UpdateGardenRanches",e.UpdateStorage="GameEvent.UpdateStorage"}(a||(a=e("GameEvent",{}))),t._RF.pop()}}}));

System.register("chunks:///_virtual/GameHUD.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./GameEvent.ts","./EventTarget.ts","./SoundUtils.ts","./UseCache.ts"],(function(e){"use strict";var t,a,s,n,i,r,o,c,l,u,h,d,m,p,g,C;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,s=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){i=e.cclegacy,r=e._decorator,o=e.Camera,c=e.Vec3,l=e.Label,u=e.Component},function(e){h=e.Constants},function(e){d=e.GameEvent},function(e){m=e.default},function(e){p=e.AudioManager,g=e.SoundFiles},function(e){C=e.userCache}],execute:function(){var f,B,y,b,S;i._RF.push({},"f1b36959pFKfZ6QG9FL2X6r","GameHUD",void 0);var v=r.ccclass,w=r.property;e("GameHUD",(f=v("GameHUD"),B=w(o),f((S=t((b=function(e){function t(){for(var t,a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i))||this,s(t,"camera",S,n(t)),t.userBalance=void 0,t.waterLabel=void 0,t.goldLabel=void 0,t.cashLabel=void 0,t.tempVec=new c,t.cameraPos=new c,t}a(t,e);var i=t.prototype;return i.onLoad=function(){this.userBalance={cash:0,gold:0,water:0};var e=this.node.getChildByName("Top_Left").getChildByName("Currencies");this.waterLabel=e.getChildByName("Water").getComponent(l),this.goldLabel=e.getChildByName("Gold").getComponent(l),this.cashLabel=e.getChildByName("Cash").getComponent(l)},i.update=function(){this.updateCurrencies(C.userBalance)},i.updateCurrencies=function(e){e&&(e.cash!==this.userBalance.cash&&(this.userBalance.cash=e.cash,this.cashLabel.string=this.userBalance.cash.toString()),e.gold!==this.userBalance.gold&&(this.userBalance.gold=e.gold,this.goldLabel.string=this.userBalance.gold.toString()),e.water!==this.userBalance.water&&(this.userBalance.water=e.water,this.waterLabel.string=this.userBalance.water.toString()))},i.onBtnZooClick=function(){p.instance.playSound(g.SFX_BUTTON),m.emit(d.ClearSelect),this.tempVec.set(this.camera.node.forward).multiplyScalar(h.CAMERA_DISTANCE),this.cameraPos.set(120,0,90).subtract(this.tempVec),this.camera.node.setPosition(this.cameraPos)},i.onBtnFarmClick=function(){p.instance.playSound(g.SFX_BUTTON),m.emit(d.ClearSelect),this.tempVec.set(this.camera.node.forward).multiplyScalar(h.CAMERA_DISTANCE),this.cameraPos.set(25,0,15).subtract(this.tempVec),this.camera.node.setPosition(this.cameraPos)},t}(u)).prototype,"camera",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=b))||y));i._RF.pop()}}}));

System.register("chunks:///_virtual/GameInputSystem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.mjs_cjs=&original=.js","./Constants.ts","./PopupRanchActivity.ts","./PopupSelectSeed.ts","./PopupTool.ts","./PopupUnlockRanch.ts","./GameEvent.ts","./EventTarget.ts","./UseCache.ts","./index.js"],(function(e){"use strict";var t,o,i,a,c,n,s,h,l,p,r,u,d,m,v,g,S,T,f,y,R;return{setters:[function(e){t=e.inheritsLoose,o=e.createForOfIteratorHelperLoose,i=e.applyDecoratedDescriptor,a=e.initializerDefineProperty,c=e.assertThisInitialized},function(e){n=e.cclegacy,s=e.input,h=e.Input,l=e.Vec2,p=e.MeshRenderer,r=e.geometry,u=e.Vec3},null,function(e){d=e.Constants},function(e){m=e.PopupRanchActivity},function(e){v=e.PopupSelectSeed},function(e){g=e.PopupTool},function(e){S=e.PopupUnlockRanch},function(e){T=e.GameEvent},function(e){f=e.default},function(e){y=e.userCache},function(e){R=e.default}],execute:function(){var k,B,C,_,A,P,O;n._RF.push({},"db0b5PpFcRGC4l8ejhxnsD8","GameInputSystem",void 0);e("GameInputSystem",(k=R.Inject("scene"),B=R.Inject("camera"),C=R.Inject("gameState"),_=function(e){function i(){for(var t,o=arguments.length,i=new Array(o),n=0;n<o;n++)i[n]=arguments[n];return t=e.call.apply(e,[this].concat(i))||this,a(t,"scene",A,c(t)),a(t,"camera",P,c(t)),a(t,"gameState",O,c(t)),t.blockGroup=void 0,t.ranchGroup=void 0,t.popupSelectSeed=void 0,t.popupTool=void 0,t.popupRanchActivity=void 0,t.popupUnlockRanch=void 0,t.tempVec=new u,t.ray=new r.Ray,t}t(i,e);var n=i.prototype;return n.initialized=function(){this.blockGroup=this.scene.getChildByName("BlockGroup"),this.ranchGroup=this.scene.getChildByName("RanchGroup");var e=this.scene.getChildByName("UI_Canvas");this.popupSelectSeed=e.getChildByName("PopupSelectSeed"),this.popupTool=e.getChildByName("PopupTool"),this.popupRanchActivity=e.getChildByName("PopupRanchActivity"),this.popupUnlockRanch=e.getChildByName("PopupUnlockRanch"),s.on(h.EventType.TOUCH_MOVE,this.onTouchMove,this),s.on(h.EventType.TOUCH_START,this.onTouchStart,this),f.on(T.ClearSelect,this.onClearSelect,this),f.on(T.TouchBlock,this.onTouchBlock,this)},n.onTouchStart=function(e){this.checkTouchBlock(e.touch.getLocation()),this.checkTouchRanch(e.touch.getLocation()),this.gameState.cameraZoomToDetail=void 0!==this.gameState.selectedBlock||void 0!==this.gameState.selectedRanch},n.onTouchMove=function(e){if(!this.gameState.cameraZoomToDetail){var t=e.getTouches();if(1===t.length){var o=-e.getDeltaY(),i=this.camera.node.rotation.getEulerAngles(this.tempVec),a=e.getDeltaX()*Math.sin(i.y*Math.PI/180),c=-e.getDeltaX()*Math.cos(i.y*Math.PI/180);this.tempVec.set(c/d.MAP_DRAG_RATIO,o/d.MAP_DRAG_RATIO,a/d.MAP_DRAG_RATIO),this.camera.node.setPosition(this.camera.node.position.add(this.tempVec))}else{var n=l.distance(t[0].getPreviousLocation(),t[1].getPreviousLocation()),s=l.distance(t[0].getLocation(),t[1].getLocation())-n,h=this.gameState.currentOrthoHeight-s*d.MAP_ZOOM_RATE;h>d.MAX_ORTHO_HEIGHT&&(h=d.MAX_ORTHO_HEIGHT),h<d.SHOW_DETAIL_ORTHO_HEIGHT&&(h=d.SHOW_DETAIL_ORTHO_HEIGHT),this.gameState.currentOrthoHeight=h}}},n.checkTouchRanch=function(e){if(void 0===this.gameState.selectedBlock){var t=this.camera.screenPointToRay(e.x,e.y,this.ray);if(y.ranchDatas)for(var i=0;i<this.ranchGroup.children.length;i++){for(var a,c=!1,n=o(y.ranchDatas);!(a=n()).done;){if(a.value.location===i+1){c=!0;break}}var s=this.ranchGroup.children[i].getChildByName("Plane");if(s){var h=s.getComponent(p);if(r.intersect.rayModel(t,h.model)>0){if(this.gameState.selectedRanch=i,this.gameState.selectedBlock=void 0,this.popupSelectSeed.active=!1,this.popupTool.active=!1,c)this.popupRanchActivity.getComponent(m).show(i+1);else this.popupUnlockRanch.getComponent(S).show(i);break}this.gameState.selectedRanch=void 0,this.popupUnlockRanch.active=!1,this.popupRanchActivity.active=!1}}}},n.checkTouchBlock=function(e){if(y.blockDatas){for(var t=this.camera.screenPointToRay(e.x,e.y,this.ray),o=!1,i=0;i<y.blockDatas.length;i++){if(i>=this.blockGroup.children.length)throw Error("Block_"+i+" not existed on map");var a=this.blockGroup.children[i].getChildByName("Block").getComponentInChildren(p);if(r.intersect.rayModel(t,a.model)>0){if(i===this.gameState.selectedBlock)break;this.gameState.selectedBlock=i,this.onTouchBlock(),o=!0}}o||(this.gameState.selectedBlock=void 0,this.gameState.selectedRanch=void 0,this.popupSelectSeed.active=!1,this.popupTool.active=!1)}},n.onTouchBlock=function(){if(void 0!==this.gameState.selectedBlock){var e=y.blockDatas[this.gameState.selectedBlock];if(this.popupSelectSeed.active=!e.plant,this.popupTool.active=!!e.plant,e.plant){var t=this.popupTool.getComponent(g);t&&t.showTool(this.gameState.selectedBlock,e.plant)}else{var o=this.popupSelectSeed.getComponent(v);o&&o.show(this.gameState.selectedBlock)}this.gameState.selectedRanch=void 0}},n.onClearSelect=function(){this.gameState.selectedBlock=void 0,this.gameState.selectedRanch=void 0,this.gameState.cameraZoomToDetail=void 0!==this.gameState.selectedRanch,this.popupUnlockRanch.active=!1,this.popupSelectSeed.active=!1,this.popupTool.active=!1,this.popupRanchActivity.active=!1},n.process=function(){},n.dispose=function(){s.off(h.EventType.TOUCH_START,this.onTouchStart,this),s.off(h.EventType.TOUCH_MOVE,this.onTouchMove,this),f.off(T.ClearSelect,this.onClearSelect,this),f.off(T.TouchBlock,this.onTouchBlock,this)},i}(R.System),A=i(_.prototype,"scene",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=i(_.prototype,"camera",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=i(_.prototype,"gameState",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_));n._RF.pop()}}}));

System.register("chunks:///_virtual/GameState.ts",["cc"],(function(){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"d1b527tmnZELILY/NQ5aJ0i","GameState",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/Garden.ts",["cc"],(function(){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"d4e3fm3xdhJBZ7C0Rg1x+oE","Garden",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/GardenScene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.mjs_cjs=&original=.js","./Constants.ts","./BlockProcessingSystem.ts","./BlockRenderingSystem.ts","./CameraProcessingSystem.ts","./DataSyncProcessingSystem.ts","./GameInputSystem.ts","./PlantProcessingSystem.ts","./PlantRenderingSystem.ts","./RanchProcessingSystem.ts","./SoundUtils.ts","./index.js"],(function(e){"use strict";var t,n,s,r,i,o,a,c,l,d,u,m,S,y,f,g,p,h,w,P,v,C;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,s=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,o=e._decorator,a=e.Prefab,c=e.director,l=e.CameraComponent,d=e.AudioSource,u=e.Component},null,function(e){m=e.Constants},function(e){S=e.BlockProcessingSytem},function(e){y=e.BlockRenderingSystem},function(e){f=e.CameraProcessingSystem},function(e){g=e.DataSyncProcessingSystem},function(e){p=e.GameInputSystem},function(e){h=e.PlantProcessingSytem},function(e){w=e.PlantRenderingSytem},function(e){P=e.RanchProcessingSystem},function(e){v=e.AudioManager},function(e){C=e.default}],execute:function(){var b,R,G,_,D;i._RF.push({},"734feVQSzdG76tFES30ltsr","GardenScene",void 0);var B=o.ccclass,H=o.property;e("GardenScene",(b=B("GardenScene"),R=H(a),b((D=t((_=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,s(t,"plantPrefab",D,r(t)),t.world=void 0,t}n(t,e);var i=t.prototype;return i.start=function(){var e=c.getScene(),t=e.getChildByName("Camera").getComponent(l),n={cameraZoomToDetail:!1,currentOrthoHeight:m.SHOW_MAP_ORTHO_HEIGHT};this.world=new C.World,this.world.register("scene",e),this.world.register("camera",t),this.world.register("gameState",n),this.world.register("plantPrefab",this.plantPrefab),this.world.addSystem(new y,!1),this.world.addSystem(new w,!1),this.world.addSystem(new p,!0),this.world.addSystem(new h,!0),this.world.addSystem(new S,!0),this.world.addSystem(new P,!0),this.world.addSystem(new f,!0),this.world.addSystem(new g,!0)},i.onLoad=function(){var e=this.getComponent(d);e&&v.instance.init(e)},i.onEnable=function(){v.instance.playMusic(!0)},i.update=function(e){this.world.setDelta(e),this.world.processActiveSystem(),this.world.processPassiveSystem()},t}(u)).prototype,"plantPrefab",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=_))||G));i._RF.pop()}}}));

System.register("chunks:///_virtual/LoginScene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./services.ts","./Common2.ts","./ConfigManager.ts","./ResourceUtil.ts","./SoundUtils.ts","./UseCache.ts"],(function(e){"use strict";var o,t,s,n,i,r,a,l,g,u,p,c,d,f,h,v,m,S,b,w,B,_,P;return{setters:[function(e){o=e.applyDecoratedDescriptor,t=e.inheritsLoose,s=e.initializerDefineProperty,n=e.assertThisInitialized,i=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy,a=e._decorator,l=e.Button,g=e.EditBox,u=e.ProgressBar,p=e.AudioSource,c=e.sys,d=e.director,f=e.Component},function(e){h=e.Constants},function(e){v=e.login,m=e.setUserToken},function(e){S=e.showDialog},function(e){b=e.configManager},function(e){w=e.ResourceUtil},function(e){B=e.AudioManager,_=e.SoundFiles},function(e){P=e.userCache}],execute:function(){var x,y,C,U,D,E,A,L,R,z,I;r._RF.push({},"1c9c07eWp5GYbfkwtOHkaNl","LoginScene",void 0);var k=a.ccclass,M=a.property;e("LoginScene",(x=k("LoginScene"),y=M(l),C=M(g),U=M(g),D=M(u),x((L=o((A=function(e){function o(){for(var o,t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return o=e.call.apply(e,[this].concat(i))||this,s(o,"buttonLogin",L,n(o)),s(o,"usernameBox",R,n(o)),s(o,"passwordBox",z,n(o)),s(o,"progressbar",I,n(o)),o.popupDialogPrefab=void 0,o.saveUsername="",o.savePassword="",o.loadingComplete=!1,o.progress=0,o}t(o,e);var r=o.prototype;return r.onLoad=function(){var e=this,o=this.getComponent(p);o&&B.instance.init(o),w.getUIPrefabRes("PopupDialog",(function(o,t){o||(e.popupDialogPrefab=t)})),this.saveUsername=c.localStorage.getItem(h.KEY_SAVE_USER_NAME),this.savePassword=c.localStorage.getItem(h.KEY_SAVE_PASSWORD),this.saveUsername&&0!==this.saveUsername.length&&(this.usernameBox.string=this.saveUsername),this.savePassword&&0!==this.savePassword.length&&(this.passwordBox.string=this.savePassword)},r.update=function(e){if(!this.loadingComplete){for(var o,t=0,s=i(P.loadingStates);!(o=s()).done;){o.value[1]?t+=1:this.loadingComplete=!1}var n=t/P.loadingStates.size;this.progressbar.progress=n,t===P.loadingStates.size&&(this.loadingComplete=!0,d.loadScene("Garden"))}},r.login=function(){var e=this;B.instance.playSound(_.SFX_BUTTON);var o=this.passwordBox.string,t=this.usernameBox.string;if(0!==o.length&&0!==t.length){this.buttonLogin.node.active=!1,this.usernameBox.node.active=!1,this.passwordBox.node.active=!1,this.progressbar.progress=0,this.progressbar.node.active=!0;v(this.usernameBox.string,this.passwordBox.string,(function(o,t){var s=!1;if(o){c.localStorage.setItem(h.KEY_SAVE_USER_NAME,e.usernameBox.string),c.localStorage.setItem(h.KEY_SAVE_PASSWORD,e.passwordBox.string);var n=JSON.parse(t);if(n.token){var i=n.token;m(i),s=!0}s?P.updateAllData(e.popupDialogPrefab):S(e.popupDialogPrefab,b.stringConfig.login_failed,(function(){d.loadScene("Login")}))}}))}else S(this.popupDialogPrefab,b.stringConfig.username_password_empty)},o}(f)).prototype,"buttonLogin",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=o(A.prototype,"usernameBox",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=o(A.prototype,"passwordBox",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=o(A.prototype,"progressbar",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=A))||E));r._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./Constants.ts","./services.ts","./BlockComponent.ts","./PlantComponent.ts","./RanchComponent.ts","./GardenScene.ts","./LoginScene.ts","./GameHUD.ts","./PopupBuyItem.ts","./PopupDialog.ts","./PopupQuest.ts","./PopupRanchActivity.ts","./PopupSelectSeed.ts","./PopupSetting.ts","./PopupShop.ts","./PopupStorage.ts","./PopupTool.ts","./PopupUnlockBlock.ts","./PopupUnlockRanch.ts","./PopupUpgradeBlock.ts","./BlockProcessingSystem.ts","./BlockRenderingSystem.ts","./CameraProcessingSystem.ts","./DataSyncProcessingSystem.ts","./GameInputSystem.ts","./PlantProcessingSystem.ts","./PlantRenderingSystem.ts","./RanchProcessingSystem.ts","./Block.ts","./Common.ts","./GameEvent.ts","./GameState.ts","./Garden.ts","./Plant.ts","./PlantAction.ts","./QuestData.ts","./Ranch.ts","./RanchActivity.ts","./Storage.ts","./Common2.ts","./ConfigManager.ts","./EventTarget.ts","./ResourceUtil.ts","./SoundUtils.ts","./StringUtils.ts","./UseCache.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Plant.ts",["cc"],(function(t){"use strict";var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){var a,e;t({PlantSize:void 0,PlantStatusType:void 0}),n._RF.push({},"0ab8boy5ydCzqSwxJSzb4sS","Plant",void 0),function(t){t[t.Sprout=0]="Sprout",t[t.Sapling=1]="Sapling",t[t.Mature=2]="Mature"}(a||(a=t("PlantSize",{}))),function(t){t.Worm="worm",t.Water="water"}(e||(e=t("PlantStatusType",{}))),n._RF.pop()}}}));

System.register("chunks:///_virtual/PlantAction.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){var i;t("PlantAction",void 0),e._RF.push({},"6498e6TwM9Laa4xpwZ00S8m","PlantAction",void 0),function(t){t.Plant="plant",t.Wattering="water",t.Fertilize="fertilizer",t.Pesticides="pesticides",t.Harvest="harvest"}(i||(i=t("PlantAction",{}))),e._RF.pop()}}}));

System.register("chunks:///_virtual/PlantComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./Plant.ts","./StringUtils.ts"],(function(e){"use strict";var t,r,i,n,o,a,s,l,d,h,u,p,c,g,P,f,v,b,C,m,w,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.initializerDefineProperty,i=e.inheritsLoose,n=e.assertThisInitialized,o=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy,s=e._decorator,l=e.CCString,d=e.Prefab,h=e.SpriteAtlas,u=e.Vec3,p=e.Color,c=e.Sprite,g=e.ProgressBar,P=e.Label,f=e.instantiate,v=e.ParticleSystem,b=e.tween,C=e.Component},function(e){m=e.Constants},function(e){w=e.PlantSize},function(e){y=e.toHourMinSec}],execute:function(){var N,S,B,D,R,I,z,_,H,A,F,L,O,T,k,M;a._RF.push({},"7865329OKBPiq+nR+pIYnyH","PlantComponent",void 0);var U=s.ccclass,E=s.property,j=e("default",(A=U("PlantPrefabPair"),F=E(l),L=E([d]),A((k=t((T=function(){r(this,"key",k,this),r(this,"values",M,this)}).prototype,"key",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=t(T.prototype,"values",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=T))||O));e("PlantComponent",(N=U("PlantComponent"),S=E([j]),B=E(h),D=E(d),N((z=t((I=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"renderPlantPrefabs",z,n(t)),r(t,"uiAtlas",_,n(t)),r(t,"glowingParticlePrefab",H,n(t)),t.renderRoot2D=void 0,t.renderPlantNode=void 0,t.glowingParticle=void 0,t.label=void 0,t.progressBar=void 0,t.statusNode=void 0,t.statusSprite=void 0,t.pos=new u,t.greenColor=new p(0,255,0,255),t.orangeColor=new p(255,128,0,255),t.redColor=new p(255,0,0,255),t}i(t,e);var a=t.prototype;return a.onLoad=function(){this.renderRoot2D=this.node.getChildByName("RenderRoot2D"),this.statusNode=this.renderRoot2D.getChildByName("StatusNode");var e=this.statusNode.getChildByName("ico_event");this.statusSprite=e.getComponentInChildren(c),this.progressBar=this.renderRoot2D.getComponentInChildren(g),this.label=this.progressBar.getComponentInChildren(P)},a.getPlantPrefabByNameAndSize=function(e,t){for(var r,i=o(this.renderPlantPrefabs);!(r=i()).done;){var n=r.value;if(n.key===e&&t<n.values.length)return n.values[t]}return null},a.setPlant=function(e,t){this.renderPlantNode&&(this.renderPlantNode.removeFromParent(),this.renderPlantNode=void 0),this.glowingParticle&&(this.glowingParticle.removeFromParent(),this.glowingParticle=void 0);var r=this.getPlantPrefabByNameAndSize(e,t);if(r){if(this.renderPlantNode=f(r),this.renderPlantNode.position.set(0,1,0),this.node.addChild(this.renderPlantNode),t===w.Mature)this.glowingParticle=f(this.glowingParticlePrefab),this.node.addChild(this.glowingParticle),this.glowingParticle.getComponentInChildren(v).play();b(this.renderPlantNode).to(.2,{scale:new u(1.1,1.1,1.1)}).to(.2,{scale:new u(.9,.9,.9)}).to(.1,{scale:new u(1,1,1)}).union().start()}},a.setPlantStatuses=function(e){this.statusNode.active=0!==e.length,0!==e.length&&(this.statusSprite.spriteFrame=this.uiAtlas.getSpriteFrame("plant_status_"+e[0].type))},a.updateUIPosition=function(e){e.camera.update(),e.convertToUINode(this.renderRoot2D.worldPosition,this.progressBar.node.parent,this.pos),this.statusNode.setPosition(this.pos),this.statusNode.position.add3f(0,40,0),this.progressBar.node.active=e.orthoHeight===m.SHOW_DETAIL_ORTHO_HEIGHT,this.progressBar.node.setPosition(this.pos),this.progressBar.node.position.add3f(0,-5,0)},a.updatePlantData=function(e,t){this.renderRoot2D.active&&(this.label.string=e>0?y(e):"",t<0&&(t=0),this.progressBar.progress=t,this.progressBar.barSprite.color=t>.66?this.greenColor:t>.33?this.orangeColor:this.redColor)},t}(C)).prototype,"renderPlantPrefabs",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(I.prototype,"uiAtlas",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=t(I.prototype,"glowingParticlePrefab",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=I))||R));a._RF.pop()}}}));

System.register("chunks:///_virtual/PlantProcessingSystem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.mjs_cjs=&original=.js","./Constants.ts","./services.ts","./BlockComponent.ts","./GameEvent.ts","./Plant.ts","./PlantAction.ts","./Common2.ts","./ConfigManager.ts","./EventTarget.ts","./ResourceUtil.ts","./UseCache.ts","./index.js"],(function(t){"use strict";var e,i,n,a,o,s,r,l,c,u,f,p,g,d,h,m,v,k,P;return{setters:[function(t){e=t.inheritsLoose,i=t.createForOfIteratorHelperLoose,n=t.applyDecoratedDescriptor,a=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){s=t.cclegacy},null,function(t){r=t.Constants},function(t){l=t.requestDoPlantAction},function(t){c=t.BlockComponent},function(t){u=t.GameEvent},function(t){f=t.PlantSize,p=t.PlantStatusType},function(t){g=t.PlantAction},function(t){d=t.showErrorMessage},function(t){h=t.configManager},function(t){m=t.default},function(t){v=t.ResourceUtil},function(t){k=t.userCache},function(t){P=t.default}],execute:function(){var S,b,B,y,D,w,z;s._RF.push({},"6ac05V8cKtOybnaLTrXx4rH","PlantProcessingSystem",void 0);t("PlantProcessingSytem",(S=P.Inject("scene"),b=P.Inject("camera"),B=P.Inject("gameState"),y=function(t){function n(){for(var e,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return e=t.call.apply(t,[this].concat(n))||this,a(e,"scene",D,o(e)),a(e,"camera",w,o(e)),a(e,"gameState",z,o(e)),e.blockGroup=void 0,e}e(n,t);var s=n.prototype;return s.initialized=function(){this.blockGroup=this.scene.getChildByName("BlockGroup"),m.on(u.Plant,this.onPlantSeed,this),m.on(u.Water,this.onWatering,this),m.on(u.Fertilize,this.onFertilizing,this),m.on(u.Pesticides,this.onPesticides,this),m.on(u.Harvest,this.onHarvesting,this)},s.onPlantSeed=function(t){var e=this;if(t){var n=this.getSelectingBlock();if(n){if(n.plant)throw Error("this block cannot plant any more");var a=h.itemConfigs[t];if(!a)throw Error("No config data for plant with id = "+t);l(n.location,g.Plant,t,(function(o,s){if(o){var r=Date.now()/1e3,l={id:a.id,hp:a.hp,HarvestTime:r+a.grownTime,size:f.Sprout,createTime:r,statuses:[{type:p.Water,time:r}]};n.plant=l;for(var g,h=k.storageData.items.filter((function(e){return e.id===t})),P=i(h);!(g=P()).done;){var S=g.value;if(S.quantity=S.quantity-1,0===S.quantity){var b=k.storageData.items.indexOf(S);b>=0&&k.storageData.items.splice(b,1)}}k.updateGardenBlocks(),k.updateStorage(),m.emit(u.TouchBlock),e.blockGroup.children[e.gameState.selectedBlock].getComponent(c).showActionParticle()}else v.getUIPrefabRes("PopupDialog",(function(t,e){t||d(e,s)}))}))}}},s.getSelectingBlock=function(){if(void 0!==this.gameState.selectedBlock){if(this.gameState.selectedBlock>=k.blockDatas.length)throw Error("onWatering: selected block is greater than total block");return k.blockDatas[this.gameState.selectedBlock]}},s.onWatering=function(){var t=this,e=this.getSelectingBlock();if(e){if(void 0===e.plant)throw Error("selecting plant === undefined");l(e.location,g.Wattering,e.plant.id,(function(n,a){if(n){for(var o,s=i(e.plant.statuses);!(o=s()).done;){var r=o.value;if(r.type===p.Water){var l=e.plant.statuses.indexOf(r);l>=0&&e.plant.statuses.splice(l,1);break}}k.updateGardenBlocks(),k.updateUserInfo(),m.emit(u.TouchBlock),t.blockGroup.children[t.gameState.selectedBlock].getComponent(c).showActionParticle()}else v.getUIPrefabRes("PopupDialog",(function(t,e){t||d(e,a)}))}))}},s.onFertilizing=function(){var t=this,e=this.getSelectingBlock();if(e){if(void 0===e.plant)throw Error("selecting plant === undefined");if(h.itemConfigs[e.plant.id]){var i=h.itemConfigs[e.plant.id],n=k.storageData.items.find((function(t){return t.id===i.fertilizer}));n&&0!==n.quantity&&l(e.location,g.Fertilize,e.plant.id,(function(i,a){if(i){if(n.quantity-=1,0===n.quantity){var o=k.storageData.items.indexOf(n);k.storageData.items.splice(o,1)}e.plant.HarvestTime-=r.FERTILIZE_SKIP_TIME,t.process(),k.updateGardenBlocks(),k.updateStorage(),m.emit(u.TouchBlock),t.blockGroup.children[t.gameState.selectedBlock].getComponent(c).showActionParticle()}else v.getUIPrefabRes("PopupDialog",(function(t,e){t||d(e,a)}))}))}}},s.onPesticides=function(){var t=this,e=this.getSelectingBlock();if(e){if(void 0===e.plant)throw Error("selecting plant === undefined");var i=k.storageData.items.find((function(t){return"pesticides"===t.id}));i&&0!==i.quantity&&l(e.location,g.Pesticides,e.plant.id,(function(e,n){if(e){if(i.quantity-=1,0===i.quantity){var a=k.storageData.items.indexOf(i);k.storageData.items.splice(a,1)}k.updateGardenBlocks(),k.updateStorage(),m.emit(u.TouchBlock),t.blockGroup.children[t.gameState.selectedBlock].getComponent(c).showActionParticle()}else v.getUIPrefabRes("PopupDialog",(function(t,e){t||d(e,n)}))}))}},s.onHarvesting=function(){var t=this,e=this.getSelectingBlock();if(e){if(void 0===e.plant)throw Error("selecting plant === undefined");e.plant.size===f.Mature&&l(e.location,g.Harvest,e.plant.id,(function(e,i){e?(delete k.blockDatas[t.gameState.selectedBlock].plant,k.updateGardenBlocks(),k.updateStorage(),m.emit(u.TouchBlock),t.blockGroup.children[t.gameState.selectedBlock].getComponent(c).showActionParticle()):v.getUIPrefabRes("PopupDialog",(function(t,e){t||d(e,i)}))}))}},s.process=function(){if(k.blockDatas)for(var t,e=Date.now()/1e3,n=i(k.blockDatas);!(t=n()).done;){var a=t.value;if(a.plant)if(h.blockUpgrade.properties[a.level]){var o=h.itemConfigs[a.plant.id],s=a.plant.HarvestTime-e;if(s>0){var r=1-s/o.grownTime;a.plant.size=r<.5?f.Sprout:f.Sapling}else a.plant.size=f.Mature,a.plant.statuses.length>0&&(a.plant.statuses.length=0)}}},s.dispose=function(){m.off(u.Plant,this.onPlantSeed,this),m.off(u.Water,this.onWatering,this),m.off(u.Fertilize,this.onFertilizing,this),m.off(u.Pesticides,this.onPesticides,this),m.off(u.Harvest,this.onHarvesting,this)},n}(P.System),D=n(y.prototype,"scene",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=n(y.prototype,"camera",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=n(y.prototype,"gameState",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y));s._RF.pop()}}}));

System.register("chunks:///_virtual/PlantRenderingSystem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.mjs_cjs=&original=.js","./PlantComponent.ts","./ConfigManager.ts","./UseCache.ts","./index.js"],(function(t){"use strict";var e,n,a,i,l,s,r,o,p,c,u;return{setters:[function(t){e=t.inheritsLoose,n=t.createForOfIteratorHelperLoose,a=t.applyDecoratedDescriptor,i=t.initializerDefineProperty,l=t.assertThisInitialized},function(t){s=t.cclegacy,r=t.instantiate},null,function(t){o=t.PlantComponent},function(t){p=t.configManager},function(t){c=t.userCache},function(t){u=t.default}],execute:function(){var h,d,g,f,P,b,m;s._RF.push({},"7bfa2VhIgNBQLkmDS2HXlGA","PlantRenderingSystem",void 0);t("PlantRenderingSytem",(h=u.Inject("scene"),d=u.Inject("camera"),g=u.Inject("plantPrefab"),f=function(t){function a(){for(var e,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a))||this,i(e,"scene",P,l(e)),i(e,"camera",b,l(e)),i(e,"plantPrefab",m,l(e)),e.blockGroup=void 0,e.plantGroup=void 0,e.labelPlantGroup=void 0,e.plantNodeMapping=void 0,e.plantDataMapping=void 0,e.currentPlant=void 0,e}e(a,t);var s=a.prototype;return s.initialized=function(){this.plantNodeMapping=new Map,this.plantDataMapping=new Map,this.blockGroup=this.scene.getChildByName("BlockGroup"),this.plantGroup=this.scene.getChildByName("PlantGroup");var t=this.scene.getChildByName("UI_Canvas");this.labelPlantGroup=t.getChildByName("LabelPlantGroup")},s.newPlant=function(t,e){if(e>=this.blockGroup.children.length)throw Error("newPlant: block index is greater than blocks's size");var n=this.blockGroup.children[e],a=r(this.plantPrefab);a.setPosition(n.getWorldPosition()),this.plantGroup.addChild(a);var i=a.getComponent(o);return i.setPlant(t.id,t.size),i.setPlantStatuses(t.statuses),this.plantNodeMapping.set(e,a),this.plantDataMapping.set(e,JSON.parse(JSON.stringify(t))),a},s.deletePlantNode=function(t){this.plantNodeMapping.get(t).removeFromParent(),this.plantNodeMapping.delete(t),this.plantDataMapping.delete(t)},s.updatePlants=function(){if(c.blockDatas)for(var t=0;t<c.blockDatas.length;t++){if(t>=this.blockGroup.children.length)throw Error("Block with idx = "+t+" not existed on map");var e=c.blockDatas[t];if(this.currentPlant=this.plantNodeMapping.get(t),e.plant)if(this.currentPlant){var a=this.plantDataMapping.get(t);if(a.size!==e.plant.size)this.currentPlant.getComponent(o).setPlant(e.plant.id,e.plant.size),a.size=e.plant.size;if(a.statuses.length!==e.plant.statuses.length){this.currentPlant.getComponent(o).setPlantStatuses(e.plant.statuses),a.statuses.length=0;for(var i,l=n(e.plant.statuses);!(i=l()).done;){var s=i.value;a.statuses.push(s)}}}else this.currentPlant=this.newPlant(e.plant,t);else this.currentPlant&&(this.deletePlantNode(t),this.currentPlant=void 0);if(this.currentPlant){var r=this.currentPlant.getComponent(o),u=p.itemConfigs[e.plant.id],h=Date.now()/1e3;if(p.blockUpgrade.properties[e.level]){var d=e.plant.HarvestTime-h;d<0&&(d=0),r.updatePlantData(d,e.plant.hp/u.hp),r.updateUIPosition(this.camera)}}}},s.process=function(){this.updatePlants()},s.dispose=function(){},a}(u.System),P=a(f.prototype,"scene",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=a(f.prototype,"camera",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=a(f.prototype,"plantPrefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f));s._RF.pop()}}}));

System.register("chunks:///_virtual/PopupBuyItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./services.ts","./Common.ts","./Common2.ts","./ConfigManager.ts","./ResourceUtil.ts","./SoundUtils.ts","./UseCache.ts"],(function(t){"use strict";var e,i,n,o,a,r,u,s,c,p,l,y,h,d,m,g,b,f,v,C,B;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,u=t.SpriteAtlas,s=t.Button,c=t.Vec3,p=t.Label,l=t.Sprite,y=t.UITransform,h=t.Component},function(t){d=t.requestBuyItem},function(t){m=t.CurrencyType},function(t){g=t.showErrorMessage},function(t){b=t.configManager},function(t){f=t.ResourceUtil},function(t){v=t.AudioManager,C=t.SoundFiles},function(t){B=t.userCache}],execute:function(){var I,S,T,q,R,w,A,N,F,U,_;a._RF.push({},"52392Kv+75Ok4lgRKkKNTQr","PopupBuyItem",void 0);var P=r.ccclass,Q=r.property;t("PopupBuyItem",(I=P("PopupBuyItem"),S=Q(u),T=Q(s),q=Q(s),R=Q(s),I((N=e((A=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,n(e,"uiAtlas",N,o(e)),n(e,"buttonAdd",F,o(e)),n(e,"buttonRemove",U,o(e)),n(e,"buttonBuy",_,o(e)),e.quantity=void 0,e.itemId=void 0,e.price=void 0,e.currencyType=void 0,e.tempVec=new c,e}i(e,t);var a=e.prototype;return a.hide=function(){v.instance.playSound(C.SFX_BUTTON),this.node.active=!1},a.show=function(t){this.node.active=!0,this.quantity=0,this.price=0,this.itemId=t,this.applyNewQuantity(),this.node.getChildByName("Title").getComponent(p).string="Buy "+b.stringConfig[t],this.node.getChildByName("ItemImage").getComponent(l).spriteFrame=this.uiAtlas.getSpriteFrame(t)},a.applyNewQuantity=function(){var t=this,e=this.node.getChildByName("LabelQuantity").getComponent(p),i=this.node.getChildByName("LabelPrice").getComponent(p),n=this.node.getChildByName("IconCurrency").getComponent(l),o=b.shopItemConfigs.find((function(e){return e.id===t.itemId}));this.price=o.price*this.quantity,this.currencyType=o.currencyType;var a=!0;switch(o.currencyType){case m.Cash:a=B.userBalance.cash>=this.price;break;case m.Gold:a=B.userBalance.gold>=this.price}i.string=this.price.toString(),i.color.set(255,a?255:0,a?255:0,255),i.updateRenderer();var r=i.getComponent(y);n.spriteFrame=this.uiAtlas.getSpriteFrame("ico_currency_"+o.currencyType),this.tempVec.set(i.node.position.x+r.width/2+35,n.node.position.y,n.node.position.z),n.node.setPosition(this.tempVec),e.string=this.quantity.toString(),this.buttonAdd.interactable=!(99===this.quantity),this.buttonRemove.interactable=!(0===this.quantity),this.buttonBuy.interactable=this.quantity>0&&a,this.buttonAdd.getComponent(l).grayscale=!this.buttonAdd.interactable,this.buttonRemove.getComponent(l).grayscale=!this.buttonRemove.interactable,this.buttonBuy.getComponent(l).grayscale=!(this.quantity>0&&a)},a.increaseQuantity=function(){v.instance.playSound(C.SFX_BUTTON),99!==this.quantity&&(this.quantity+=1,this.applyNewQuantity())},a.decreaseQuantity=function(){v.instance.playSound(C.SFX_BUTTON),0!==this.quantity&&(this.quantity-=1,this.applyNewQuantity())},a.buyItem=function(){var t=this;v.instance.playSound(C.SFX_BUTTON),this.buttonAdd.interactable=!1,this.buttonBuy.interactable=!1,this.buttonRemove.interactable=!1,d(this.itemId,this.quantity,(function(e,i){if(e){var n=B.storageData.items.find((function(e){return e.id===t.itemId}));n?n.quantity+=t.quantity:B.storageData.items.push({id:t.itemId,quantity:t.quantity}),B.useCurrency(t.currencyType,t.price),v.instance.playSound(C.SFX_REWARD),B.updateStorage(),B.updateUserInfo()}else f.getUIPrefabRes("PopupDialog",(function(t,e){t||g(e,i)}));t.node.active=!1}))},e}(h)).prototype,"uiAtlas",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=e(A.prototype,"buttonAdd",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=e(A.prototype,"buttonRemove",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=e(A.prototype,"buttonBuy",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=A))||w));a._RF.pop()}}}));

System.register("chunks:///_virtual/PopupDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SoundUtils.ts"],(function(e){"use strict";var t,i,a,n,o,l,r,s,c,u,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,l=e._decorator,r=e.Label,s=e.Button,c=e.Component},function(e){u=e.AudioManager,p=e.SoundFiles}],execute:function(){var g,b,f,d,h,y,k;o._RF.push({},"d44dceAfMdEqIJ4c0PyVjgt","PopupDialog",void 0);var v=l.ccclass,M=l.property;e("PopupDialog",(g=v("PopupDialog"),b=M(r),f=M(s),g((y=t((h=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return t=e.call.apply(e,[this].concat(o))||this,a(t,"labelMessage",y,n(t)),a(t,"buttonOk",k,n(t)),t.callBack=void 0,t}i(t,e);var o=t.prototype;return o.setMessage=function(e){this.labelMessage&&(this.labelMessage.string=e)},o.setOkCallback=function(e){this.callBack=e},o.onClickOk=function(){u.instance.playSound(p.SFX_BUTTON),this.node.removeFromParent(),this.callBack&&this.callBack()},t}(c)).prototype,"labelMessage",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(h.prototype,"buttonOk",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=h))||d));o._RF.pop()}}}));

System.register("chunks:///_virtual/PopupQuest.ts",["./rollupPluginModLoBabelHelpers.js","cc","./services.ts","./Common.ts","./QuestData.ts","./ConfigManager.ts","./SoundUtils.ts","./UseCache.ts"],(function(t){"use strict";var e,n,i,a,r,o,s,u,c,l,d,p,f,g,m,y,v,C,h,q,S,b,Q,_;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized,r=t.createForOfIteratorHelperLoose},function(t){o=t.cclegacy,s=t._decorator,u=t.SpriteAtlas,c=t.Font,l=t.Prefab,d=t.Vec3,p=t.Component,f=t.instantiate,g=t.Sprite,m=t.Label,y=t.Button,v=t.EventHandler},function(t){C=t.requestClaimQuest},function(t){h=t.CurrencyType},function(t){q=t.QuestStatus},function(t){S=t.configManager},function(t){b=t.AudioManager,Q=t.SoundFiles},function(t){_=t.userCache}],execute:function(){var D,B,F,w,T,I,N,P,A;o._RF.push({},"1baeadzTg9F1IHpiABy5qB2","PopupQuest",void 0);var U=s.ccclass,z=s.property;t("PopupQuest",(D=U("PopupQuest"),B=z(u),F=z(c),w=z(l),D((N=e((I=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,i(e,"uiAtlas",N,a(e)),i(e,"font",P,a(e)),i(e,"questItem",A,a(e)),e.tempVec3=new d,e}n(e,t);var o=e.prototype;return o.hide=function(){b.instance.playSound(Q.SFX_BUTTON),this.node.active=!1},o.show=function(){b.instance.playSound(Q.SFX_BUTTON),this.initQuest(),this.node.active=!0},o.initQuest=function(){for(var t=this,e=this.node.getChildByName("Container"),n=function(n){var i=_.questDatas[n],a=S.dailyQuestConfigs.find((function(t){return t.id===i.mission_id}));if(!a)return"continue";t.tempVec3.set(0,-130*n,0);var o=f(t.questItem);o.setPosition(t.tempVec3),e.addChild(o),o.getChildByName("Icon").getComponent(g).spriteFrame=t.uiAtlas.getSpriteFrame(a.item_id),o.getChildByName("LabelDescription").getComponent(m).string=t.replaceQuestDescriptionWithData(a);for(var s,u=o.getChildByName("GoldReward").getComponent(m),c=o.getChildByName("CashReward").getComponent(m),l=r(a.rewards);!(s=l()).done;){var d=s.value;d.currencyType===h.Gold?u.string=d.quantity.toString():c.string=d.quantity.toString()}var p=0,C=_.storageData.items.find((function(t){return t.id===a.item_id}));C&&(p=C.quantity);var b=i.status===q.UnClaimed&&p>=a.quantity,Q=o.getChildByName("ButtonClaim").getComponent(y);(Q.interactable=b,Q.node.getComponent(g).grayscale=!b,i.status===q.Claimed)&&(Q.getComponentInChildren(m).string=S.stringConfig.claimed);var D=new v;D.target=t.node,D.handler="onClaimQuest",D.component="PopupQuest",D.customEventData=i.mission_id.toString(),Q.clickEvents.push(D)},i=0;i<_.questDatas.length;i++)n(i)},o.onClaimQuest=function(t,e){var n=this;b.instance.playSound(Q.SFX_BUTTON);var i=parseInt(e);C(i,(function(t,e){if(t){b.instance.playSound(Q.SFX_REWARD);for(var a,o=r(_.questDatas);!(a=o()).done;){var s=a.value;if(s.mission_id===i){var u=function(){s.status=q.Claimed;var t=_.questDatas.find((function(t){return t.mission_id===i})),e=S.dailyQuestConfigs.find((function(t){return t.id===i}));if(!t||!e)return{v:void 0};var n=_.storageData.items.find((function(t){return t.id===e.item_id}));if(!n||n.quantity<e.quantity)return{v:void 0};t.status=1;for(var a,o=r(e.rewards);!(a=o()).done;){var u=a.value;_.addCurrency(u.currencyType,u.quantity)}return _.updateQuest(),_.updateUserInfo(),_.updateStorage(),"break"}();if("break"===u)break;if("object"==typeof u)return u.v}}}n.initQuest()}))},o.replaceQuestDescriptionWithData=function(t){var e="[id]",n=S.stringConfig.daily_quest_desc;return n=n.replace(e,S.stringConfig[t.item_id]),t.quantity>0&&(e="[quantity]",n=n.replace(e,t.quantity.toString())),n},e}(p)).prototype,"uiAtlas",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=e(I.prototype,"font",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=e(I.prototype,"questItem",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=I))||T));o._RF.pop()}}}));

System.register("chunks:///_virtual/PopupRanchActivity.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./GameEvent.ts","./EventTarget.ts","./SoundUtils.ts","./StringUtils.ts","./UseCache.ts"],(function(t){"use strict";var o,e,n,i,a,s,u,h,r,l,c,d,b,p,g;return{setters:[function(t){o=t.inheritsLoose,e=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,i=t._decorator,a=t.Button,s=t.Label,u=t.Sprite,h=t.Component},function(t){r=t.Constants},function(t){l=t.GameEvent},function(t){c=t.default},function(t){d=t.AudioManager,b=t.SoundFiles},function(t){p=t.toHourMinSec},function(t){g=t.userCache}],execute:function(){var m;n._RF.push({},"fac1fMiiYxACaxGF9i1K3DY","PopupRanchActivity",void 0);var S=i.ccclass;i.property,t("PopupRanchActivity",S("PopupRanchActivity")(m=function(t){function n(){for(var o,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return(o=t.call.apply(t,[this].concat(n))||this).buttonShowerImage=void 0,o.buttonPetImage=void 0,o.buttonFoodImage=void 0,o.buttonShower=void 0,o.buttonPet=void 0,o.buttonFood=void 0,o.labelShower=void 0,o.labelPet=void 0,o.labelFood=void 0,o.ranchLocation=void 0,o}o(n,t);var i=n.prototype;return i.hide=function(){d.instance.playSound(b.SFX_BUTTON),this.node.active=!1,c.emit(l.ClearSelect)},i.show=function(t){this.ranchLocation=t,this.buttonShower||(this.buttonShower=this.node.getChildByName("ButtonShower").getComponent(a)),this.buttonFood||(this.buttonFood=this.node.getChildByName("ButtonFood").getComponent(a)),this.buttonPet||(this.buttonPet=this.node.getChildByName("ButtonPet").getComponent(a)),this.labelFood||(this.labelFood=this.buttonFood.getComponentInChildren(s)),this.labelPet||(this.labelPet=this.buttonPet.getComponentInChildren(s)),this.labelShower||(this.labelShower=this.buttonShower.getComponentInChildren(s)),this.buttonPetImage||(this.buttonPetImage=this.buttonPet.getComponent(u)),this.buttonShowerImage||(this.buttonShowerImage=this.buttonShower.getComponent(u)),this.buttonFoodImage||(this.buttonFoodImage=this.buttonFood.getComponent(u)),this.node.active=!0,this.update(0)},i.update=function(t){if(void 0!==this.ranchLocation)for(var o,n=e(g.ranchDatas);!(o=n()).done;){var i=o.value;if(i.location===this.ranchLocation){var a=Date.now()/1e3;if(i.bath_time){var s=r.ANIMAL_BATHING_COOLDOWN-(a-i.bath_time);s<0&&(s=0),this.updateButtonStatus(this.buttonShower,this.buttonShowerImage,this.labelShower,s)}else this.updateButtonStatus(this.buttonShower,this.buttonShowerImage,this.labelShower,0);if(i.eat_time){var u=r.ANIMAL_FEEDING_COOLDOWN-(a-i.eat_time);u<0&&(u=0),this.updateButtonStatus(this.buttonFood,this.buttonFoodImage,this.labelFood,u)}else this.updateButtonStatus(this.buttonFood,this.buttonFoodImage,this.labelFood,0);if(i.play_time){var h=r.ANIMAL_PETTING_COOLDOWN-(a-i.play_time);h<0&&(h=0),this.updateButtonStatus(this.buttonPet,this.buttonPetImage,this.labelPet,h)}else this.updateButtonStatus(this.buttonPet,this.buttonPetImage,this.labelPet,0)}}},i.updateButtonStatus=function(t,o,e,n){t.interactable=0===n,o.grayscale=n>0,e.node.active=n>0,e.string=p(n)},i.petting=function(){d.instance.playSound(b.SFX_ACTION),c.emit(l.Petting)},i.feeding=function(){d.instance.playSound(b.SFX_ACTION),c.emit(l.Feeding)},i.bathing=function(){d.instance.playSound(b.SFX_ACTION),c.emit(l.Bathing)},n}(h))||m);n._RF.pop()}}}));

System.register("chunks:///_virtual/PopupSelectSeed.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEvent.ts","./ConfigManager.ts","./EventTarget.ts","./SoundUtils.ts","./UseCache.ts","./PopupShop.ts","./PopupUpgradeBlock.ts"],(function(t){"use strict";var e,n,o,i,a,r,l,s,p,u,c,d,h,S,f,g,m,v,y,C,b,P,N,B,T,U;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized,a=t.createForOfIteratorHelperLoose},function(t){r=t.cclegacy,l=t._decorator,s=t.SpriteAtlas,p=t.Font,u=t.Node,c=t.Sprite,d=t.Button,h=t.EventHandler,S=t.UITransform,f=t.Label,g=t.director,m=t.Component},function(t){v=t.GameEvent},function(t){y=t.configManager,C=t.ItemType},function(t){b=t.default},function(t){P=t.AudioManager,N=t.SoundFiles},function(t){B=t.userCache},function(t){T=t.PopupShop},function(t){U=t.PopupUpgradeBlock}],execute:function(){var k,F,w,I,_,z,A;r._RF.push({},"88b43Dzh+dBnLrzmp5945Wu","PopupSelectSeed",void 0);var E=l.ccclass,L=l.property;t("PopupSelectSeed",(k=E("PopupSelectSeed"),F=L(s),w=L(p),k((z=e((_=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,o(e,"uiAtlas",z,i(e)),o(e,"font",A,i(e)),e.buttonPlantsNode=void 0,e.buttonShopNode=void 0,e.blockIndex=void 0,e}n(e,t);var r=e.prototype;return r.onLoad=function(){this.buttonPlantsNode=this.node.getChildByName("ButtonPlants"),this.buttonShopNode=this.node.getChildByName("ButtonShop")},r.show=function(t){this.blockIndex=t,this.buttonPlantsNode.removeAllChildren();for(var e,n=[],o=a(B.storageData.items);!(e=o()).done;){var i=e.value,r=y.itemConfigs[i.id];r&&r.itemType===C.Plant&&n.push(i)}for(var l=170*n.length/2-85,s=0;s<n.length;s++){var p=new u;p.position.set(0-l+170*s,0,0),p.scale.set(1,1,1),p.layer=this.buttonPlantsNode.layer,this.buttonPlantsNode.addChild(p),p.addComponent(c).spriteFrame=this.uiAtlas.getSpriteFrame(n[s].id);var g=p.addComponent(d);g.interactable=!0,g.transition=d.Transition.SCALE,g.zoomScale=1.1,g.duration=.1;var m=new h;m.target=this.node,m.handler="plant",m.component="PopupSelectSeed",m.customEventData=n[s].id,g.clickEvents.push(m);var v=p.getComponent(S),b=new u;b.layer=p.layer,b.position.set(.3*v.width,.3*-v.height),p.addChild(b);var P=b.addComponent(f);P.font=this.font,P.fontSize=40,P.string="x"+n[s].quantity}this.buttonShopNode.active=0===n.length},r.plant=function(t,e){P.instance.playSound(N.SFX_BUTTON),b.emit(v.Plant,e)},r.hide=function(){P.instance.playSound(N.SFX_BUTTON),this.node.active=!1,b.emit(v.ClearSelect)},r.onClickUpgrade=function(){(P.instance.playSound(N.SFX_BUTTON),void 0!==this.blockIndex)&&g.getScene().getChildByName("UI_Canvas").getChildByName("PopupUpgradeBlock").getComponent(U).show(this.blockIndex)},r.onClickShop=function(){P.instance.playSound(N.SFX_BUTTON),b.emit(v.ClearSelect),g.getScene().getChildByName("UI_Canvas").getChildByName("PopupShop").getComponent(T).show()},e}(m)).prototype,"uiAtlas",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=e(_.prototype,"font",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=_))||I));r._RF.pop()}}}));

System.register("chunks:///_virtual/PopupSetting.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SoundUtils.ts"],(function(t){"use strict";var n,i,e,o,s,u,a,r,c,l,p,b;return{setters:[function(t){n=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){s=t.cclegacy,u=t._decorator,a=t.Button,r=t.SpriteAtlas,c=t.Sprite,l=t.Component},function(t){p=t.AudioManager,b=t.SoundFiles}],execute:function(){var d,h,f,S,g,m,y,v,M;s._RF.push({},"241f6Ch7s1Fp6GKecClYV9b","PopupSetting",void 0);var F=u.ccclass,A=u.property;t("PopupSetting",(d=F("PopupSetting"),h=A(a),f=A(a),S=A(r),d((y=n((m=function(t){function n(){for(var n,i=arguments.length,s=new Array(i),u=0;u<i;u++)s[u]=arguments[u];return n=t.call.apply(t,[this].concat(s))||this,e(n,"buttonMusic",y,o(n)),e(n,"buttonSound",v,o(n)),e(n,"uiAtlas",M,o(n)),n}i(n,t);var s=n.prototype;return s.visible=function(){this.node.active=!0,this.updateButtons()},s.updateButtons=function(){var t=p.instance.musicEnable?185:-55,n=p.instance.soundEnable?185:-55;this.buttonMusic.node.setPosition(t,this.buttonMusic.node.position.y,this.buttonMusic.node.position.z),this.buttonSound.node.setPosition(n,this.buttonSound.node.position.y,this.buttonSound.node.position.z),this.buttonMusic.getComponent(c).spriteFrame=p.instance.musicEnable?this.uiAtlas.getSpriteFrame("btn_on"):this.uiAtlas.getSpriteFrame("btn_off"),this.buttonSound.getComponent(c).spriteFrame=p.instance.soundEnable?this.uiAtlas.getSpriteFrame("btn_on"):this.uiAtlas.getSpriteFrame("btn_off")},s.setMusic=function(){var t=!p.instance.musicEnable;p.instance.setEnableMusic(t),t?p.instance.playMusic(!0):p.instance.stopMusic(),this.updateButtons()},s.setSound=function(){p.instance.setEnableSound(!p.instance.soundEnable),this.updateButtons()},s.hide=function(){p.instance.playSound(b.SFX_BUTTON),this.node.active=!1},s.update=function(t){},n}(l)).prototype,"buttonMusic",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=n(m.prototype,"buttonSound",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=n(m.prototype,"uiAtlas",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=m))||g));s._RF.pop()}}}));

System.register("chunks:///_virtual/PopupShop.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ConfigManager.ts","./SoundUtils.ts","./PopupBuyItem.ts"],(function(t){"use strict";var e,n,i,o,a,r,s,p,l,u,c,h,d,g,m,b,f,y,v,C,S;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,a=t.createForOfIteratorHelperLoose},function(t){r=t.cclegacy,s=t._decorator,p=t.SpriteAtlas,l=t.Node,u=t.Font,c=t.Sprite,h=t.UITransform,d=t.Button,g=t.EventHandler,m=t.Label,b=t.director,f=t.Component},function(t){y=t.configManager},function(t){v=t.AudioManager,C=t.SoundFiles},function(t){S=t.PopupBuyItem}],execute:function(){var T,F,I,_,w,A,P,B,x;r._RF.push({},"16f09yXeOdJM4fH9sPZLJVk","PopupShop",void 0);var z=s.ccclass,N=s.property,L=["tab_plant","tab_fertilizer"];t("PopupShop",(T=z("PopupShop"),F=N(p),I=N([l]),_=N(u),T((P=e((A=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,i(e,"uiAtlas",P,o(e)),i(e,"buttonTabs",B,o(e)),i(e,"font",x,o(e)),e.container=void 0,e.currentTabIndex=-1,e}n(e,t);var r=e.prototype;return r.hide=function(){this.node.active=!1},r.show=function(){v.instance.playSound(C.SFX_BUTTON),this.activeTab(0),this.node.active=!0},r.onChangeTab=function(t,e){v.instance.playSound(C.SFX_BUTTON);var n=parseInt(e);n!==this.currentTabIndex&&this.activeTab(n)},r.activeTab=function(t){if(this.container||(this.container=this.node.getChildByName("Container")),!(t<0||t>=this.buttonTabs.length)){if(this.currentTabIndex>-1){var e=this.buttonTabs[this.currentTabIndex];if(e)e.getComponent(c).spriteFrame=this.uiAtlas.getSpriteFrame("tab_normal")}var n=this.buttonTabs[t];n.setSiblingIndex(this.buttonTabs.length-1),n.getComponent(c).spriteFrame=this.uiAtlas.getSpriteFrame("tab_selected"),this.currentTabIndex=t,this.intContent()}},r.intContent=function(){this.container.removeAllChildren();for(var t,e=0,n=0,i=a(y.shopItemConfigs);!(t=i()).done;){var o=t.value;if(o.storageTab==L[this.currentTabIndex]){var r=new l;r.layer=this.container.layer,this.container.addChild(r),r.addComponent(c).spriteFrame=this.uiAtlas.getSpriteFrame("shop_item_bg");var s=r.getComponent(h);r.setPosition(220*e+s.width/2,220*-n-s.height/2,0);var p=r.addComponent(d);p.transition=d.Transition.SCALE,p.zoomScale=1.1,p.duration=.1;var u=new g;u.target=this.node,u.handler="onClickItem",u.component="PopupShop",u.customEventData=o.id,p.clickEvents.push(u);var b=new l;b.layer=r.layer,r.addChild(b),b.addComponent(c).spriteFrame=this.uiAtlas.getSpriteFrame(o.id);var f=b.getComponent(h),v=.5*s.height/f.height;b.scale.set(v,v,1),b.position.set(0,.15*s.height);var C=new l;C.layer=r.layer,C.position.set(-20,b.position.y-.4*s.height),r.addChild(C);var S=C.addComponent(m);S.font=this.font,S.fontSize=40,S.string=o.price.toString();var T=C.getComponent(h),F=new l;F.layer=r.layer,F.scale.set(.6,.6,.6),F.position.set(C.position.x+T.width/2+25,C.position.y-2),r.addChild(F),F.addComponent(c).spriteFrame=this.uiAtlas.getSpriteFrame("ico_currency_"+o.currencyType),7===++e&&n++}}},r.onClickItem=function(t,e){v.instance.playSound(C.SFX_BUTTON),b.getScene().getChildByName("UI_Canvas").getChildByName("PopupBuyItem").getComponent(S).show(e)},e}(f)).prototype,"uiAtlas",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=e(A.prototype,"buttonTabs",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=e(A.prototype,"font",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=A))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/PopupStorage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Storage.ts","./ConfigManager.ts","./SoundUtils.ts","./UseCache.ts"],(function(t){"use strict";var e,n,i,a,r,o,s,l,u,c,h,p,d,b,g,f,m,v,T;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized,r=t.createForOfIteratorHelperLoose},function(t){o=t.cclegacy,s=t._decorator,l=t.SpriteAtlas,u=t.Node,c=t.Font,h=t.Sprite,p=t.UITransform,d=t.Label,b=t.Component},function(t){g=t.StorageTab},function(t){f=t.configManager},function(t){m=t.AudioManager,v=t.SoundFiles},function(t){T=t.userCache}],execute:function(){var y,S,C,F,A,I,P,_,w;o._RF.push({},"dbb14WtoL9BmLPG77ufF+Zl","PopupStorage",void 0);var x=s.ccclass,z=s.property,B=[g.Plant,g.Product,g.Fertilizer];t("PopupStorage",(y=x("PopupStorage"),S=z(l),C=z([u]),F=z(c),y((P=e((I=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,i(e,"uiAtlas",P,a(e)),i(e,"buttonTabs",_,a(e)),i(e,"font",w,a(e)),e.container=void 0,e.currentTabIndex=-1,e}n(e,t);var o=e.prototype;return o.hide=function(){m.instance.playSound(v.SFX_BUTTON),this.node.active=!1},o.show=function(){m.instance.playSound(v.SFX_BUTTON),this.activeTab(0),this.node.active=!0},o.onChangeTab=function(t,e){m.instance.playSound(v.SFX_BUTTON);var n=parseInt(e);n!==this.currentTabIndex&&this.activeTab(n)},o.activeTab=function(t){if(this.container||(this.container=this.node.getChildByName("Container")),!(t<0||t>=this.buttonTabs.length)){if(this.currentTabIndex>-1){var e=this.buttonTabs[this.currentTabIndex];if(e)e.getComponent(h).spriteFrame=this.uiAtlas.getSpriteFrame("tab_normal")}var n=this.buttonTabs[t];n.setSiblingIndex(this.buttonTabs.length-1),n.getComponent(h).spriteFrame=this.uiAtlas.getSpriteFrame("tab_selected"),this.currentTabIndex=t,this.intContent()}},o.intContent=function(){this.container.removeAllChildren();for(var t,e=0,n=0,i=r(T.storageData.items);!(t=i()).done;){var a=t.value,o=f.itemConfigs[a.id];if(o&&o.itemType==B[this.currentTabIndex]){var s=new u;s.layer=this.container.layer,this.container.addChild(s),s.addComponent(h).spriteFrame=this.uiAtlas.getSpriteFrame("storage_item_bg");var l=s.getComponent(p);l.setAnchorPoint(0,1),s.setPosition(170*e,170*-n,0);var c=new u;c.layer=s.layer,s.addChild(c),c.addComponent(h).spriteFrame=this.uiAtlas.getSpriteFrame(o.id);var b=c.getComponent(p),g=.6*l.height/b.height;c.scale.set(g,g,1),c.position.set(l.width/2,.4*-l.height);var m=new u;m.layer=s.layer,m.position.set(l.width/2,.7*-l.height),s.addChild(m);var v=m.addComponent(d);v.font=this.font,v.fontSize=40,v.string="x"+a.quantity,7===++e&&n++}}},e}(b)).prototype,"uiAtlas",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=e(I.prototype,"buttonTabs",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=e(I.prototype,"font",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=I))||A));o._RF.pop()}}}));

System.register("chunks:///_virtual/PopupTool.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEvent.ts","./Plant.ts","./ConfigManager.ts","./EventTarget.ts","./SoundUtils.ts","./UseCache.ts","./PopupUpgradeBlock.ts"],(function(t){"use strict";var e,i,n,o,a,s,r,u,c,l,d,p,h,f,g,v,b,m,C,y,B,S;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,a=t.createForOfIteratorHelperLoose},function(t){s=t.cclegacy,r=t._decorator,u=t.SpriteAtlas,c=t.Button,l=t.Sprite,d=t.Label,p=t.director,h=t.Component},function(t){f=t.GameEvent},function(t){g=t.PlantStatusType,v=t.PlantSize},function(t){b=t.configManager},function(t){m=t.default},function(t){C=t.AudioManager,y=t.SoundFiles},function(t){B=t.userCache},function(t){S=t.PopupUpgradeBlock}],execute:function(){var F,z,P,T,A;s._RF.push({},"9ddefGqg0dAVpQkQmCMz4vd","PopupTool",void 0);var M=r.ccclass,N=r.property;t("PopupTool",(F=M("PopupTool"),z=N(u),F((A=e((T=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a))||this,n(e,"uiAtlas",A,o(e)),e.buttonWater=void 0,e.buttonFertilize=void 0,e.buttonHarvest=void 0,e.buttonPesticides=void 0,e.buttonUpgrade=void 0,e.buttonMap=new Map,e.blockIndex=void 0,e}i(e,t);var s=e.prototype;return s.onLoad=function(){this.buttonWater=this.node.getChildByName("ButtonWater").getComponent(c),this.buttonFertilize=this.node.getChildByName("ButtonFertilize").getComponent(c),this.buttonHarvest=this.node.getChildByName("ButtonHarvest").getComponent(c),this.buttonPesticides=this.node.getChildByName("ButtonPesticides").getComponent(c),this.buttonUpgrade=this.node.getChildByName("ButtonUpgrade").getComponent(c)},s.unActiveAllButton=function(){this.buttonWater.node.active=!1,this.buttonFertilize.node.active=!1,this.buttonHarvest.node.active=!1,this.buttonPesticides.node.active=!1},s.showTool=function(t,e){if(this.blockIndex=t,b.itemConfigs[e.id]){var i=b.itemConfigs[e.id],n=B.storageData.items.find((function(t){return t.id===i.fertilizer}));this.buttonFertilize.node.getComponent(l).spriteFrame=this.uiAtlas.getSpriteFrame(i.fertilizer),this.unActiveAllButton(),this.buttonMap.clear();for(var o,s=a(e.statuses);!(o=s()).done;){switch(o.value.type){case g.Water:this.buttonMap.set(this.buttonWater,B.userBalance.water);break;case g.Worm:var r=B.storageData.items.find((function(t){return"pesticides"===t.id}));this.buttonMap.set(this.buttonPesticides,r?r.quantity:0)}}e.size===v.Mature?this.buttonMap.set(this.buttonHarvest,-1):this.buttonMap.set(this.buttonFertilize,void 0===n?0:n.quantity);for(var u,c=170*this.buttonMap.size/2-85,p=0,h=a(this.buttonMap);!(u=h()).done;){var f=u.value,m=f[0],C=f[1];if(m.node.active=!0,m.node.position.set(0-c+170*p,m.node.position.y,m.node.position.z),C>=0)m.interactable=C>0,m.getComponent(l).grayscale=0===C,m.getComponentInChildren(d).string="x"+C;p++}}},s.hide=function(){C.instance.playSound(y.SFX_BUTTON),this.node.active=!1,m.emit(f.ClearSelect)},s.water=function(){C.instance.playSound(y.SFX_ACTION),m.emit(f.Water)},s.fertilize=function(){C.instance.playSound(y.SFX_ACTION),m.emit(f.Fertilize)},s.harvest=function(){C.instance.playSound(y.SFX_ACTION),m.emit(f.Harvest)},s.pesticides=function(){C.instance.playSound(y.SFX_ACTION),m.emit(f.Pesticides)},s.onClickUpgrade=function(){(C.instance.playSound(y.SFX_BUTTON),void 0!==this.blockIndex)&&p.getScene().getChildByName("UI_Canvas").getChildByName("PopupUpgradeBlock").getComponent(S).show(this.blockIndex)},e}(h)).prototype,"uiAtlas",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=T))||P));s._RF.pop()}}}));

System.register("chunks:///_virtual/PopupUnlockBlock.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEvent.ts","./ConfigManager.ts","./EventTarget.ts","./SoundUtils.ts","./UseCache.ts"],(function(o){"use strict";var n,t,e,c,a,l,i,r,s,u,p,h,k,d;return{setters:[function(o){n=o.inheritsLoose},function(o){t=o.cclegacy,e=o._decorator,c=o.Label,a=o.Button,l=o.Sprite,i=o.Color,r=o.Component},function(o){s=o.GameEvent},function(o){u=o.configManager},function(o){p=o.default},function(o){h=o.AudioManager,k=o.SoundFiles},function(o){d=o.userCache}],execute:function(){var g;t._RF.push({},"3235dIxgRxG+6qViEfVOLYg","PopupUnlockBlock",void 0);var f=e.ccclass;e.property,o("PopupUnlockBlock",f("PopupUnlockBlock")(g=function(o){function t(){for(var n,t=arguments.length,e=new Array(t),c=0;c<t;c++)e[c]=arguments[c];return(n=o.call.apply(o,[this].concat(e))||this).textColorNomal=new i(255,255,255,255),n.textColorRed=new i(255,0,0,255),n}n(t,o);var e=t.prototype;return e.hide=function(){h.instance.playSound(k.SFX_BUTTON),this.node.active=!1},e.show=function(){var o=this.node.getChildByName("LabelPrice").getComponent(c),n=this.node.getChildByName("ButtonUnlock").getComponent(a);n.interactable=d.userBalance.cash>=u.blockUnlock.amount,o.color.set(d.userBalance.cash>=u.blockUnlock.amount?this.textColorNomal:this.textColorRed),o.string=u.blockUnlock.amount.toString(),n.getComponent(l).grayscale=d.userBalance.cash<u.blockUnlock.amount,this.node.active=!0},e.onUnlock=function(){h.instance.playSound(k.SFX_BUTTON),p.emit(s.UnlockBlock),this.hide()},t}(r))||g);t._RF.pop()}}}));

System.register("chunks:///_virtual/PopupUnlockRanch.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./Common.ts","./GameEvent.ts","./ConfigManager.ts","./EventTarget.ts","./SoundUtils.ts","./UseCache.ts"],(function(e){"use strict";var n,t,o,i,c,a,r,s,l,u,p,f,h,d,g,m,y,C,v,_;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){c=e.cclegacy,a=e._decorator,r=e.SpriteAtlas,s=e.Label,l=e.Sprite,u=e.RichText,p=e.Button,f=e.Component},function(e){h=e.Constants},function(e){d=e.CurrencyType},function(e){g=e.GameEvent},function(e){m=e.configManager},function(e){y=e.default},function(e){C=e.AudioManager,v=e.SoundFiles},function(e){_=e.userCache}],execute:function(){var R,B,S,T,A;c._RF.push({},"e23dbIcS0ZDUZvGDV5r1AiR","PopupUnlockRanch",void 0);var U=a.ccclass,N=a.property;e("PopupUnlockRanch",(R=U("PopupUnlockRanch"),B=N(r),R((A=n((T=function(e){function n(){for(var n,t=arguments.length,c=new Array(t),a=0;a<t;a++)c[a]=arguments[a];return n=e.call.apply(e,[this].concat(c))||this,o(n,"uiAtlas",A,i(n)),n.zooIndex=void 0,n}t(n,e);var c=n.prototype;return c.hide=function(){C.instance.playSound(v.SFX_BUTTON),this.node.active=!1,y.emit(g.ClearSelect)},c.show=function(e){this.zooIndex=e,this.node.active=!0;var n="animal_"+(e+1);this.node.getChildByName("LabelName").getComponent(s).string=m.stringConfig[n],this.node.getChildByName("IconAnimal").getComponent(l).spriteFrame=this.uiAtlas.getSpriteFrame("ico_"+n);var t=m.itemConfigs[n];if(t){this.node.getChildByName("RichText").getComponent(u).string=t.dropAmount+"<img src='ico_currency_"+t.currencyType+"' offset=-15 />/"+h.ANIMAL_DROP_CURRENCY_COOLDOWN/3600+"h";var o=this.node.getChildByName("ButtonUnlock").getComponent(p),i=!1;switch(t.currencyType){case d.Gold:i=_.userBalance.gold>=t.price;break;case d.Cash:i=_.userBalance.cash>=t.price}o.node.getComponentInChildren(u).string="<color="+(i?"#ffffff":"#ff0000")+">"+t.price+"</color><img src='ico_currency_"+t.currencyType+"' offset=-15 />",o.interactable=i,o.getComponent(l).grayscale=!i}},c.unlockRanch=function(){C.instance.playSound(v.SFX_BUTTON);var e="animal_"+(this.zooIndex+1);m.itemConfigs[e]&&(this.node.active=!1,y.emit(g.BuyRanch))},n}(f)).prototype,"uiAtlas",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=T))||S));c._RF.pop()}}}));

System.register("chunks:///_virtual/PopupUpgradeBlock.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./GameEvent.ts","./ConfigManager.ts","./EventTarget.ts","./SoundUtils.ts","./UseCache.ts"],(function(e){"use strict";var t,o,n,i,r,s,a,c,p,l,h,d,u,g,m,v,b,L,y;return{setters:[function(e){t=e.inheritsLoose,o=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy,i=e._decorator,r=e.Label,s=e.Sprite,a=e.Button,c=e.Node,p=e.UITransform,l=e.Vec3,h=e.Vec2,d=e.Component},function(e){u=e.Constants},function(e){g=e.GameEvent},function(e){m=e.configManager},function(e){v=e.default},function(e){b=e.AudioManager,L=e.SoundFiles},function(e){y=e.userCache}],execute:function(){var C;n._RF.push({},"9b1c1zbOpxDVKxzk5lxxiVx","PopupUpgradeBlock",void 0);var f=i.ccclass;i.property,e("PopupUpgradeBlock",f("PopupUpgradeBlock")(C=function(e){function n(){for(var t,o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).propertyLabel=void 0,t.currentLevelLabel=void 0,t.nextLevelLabel=void 0,t.iconArrow=void 0,t.priceLabel=void 0,t.iconCurrency=void 0,t.buttonUpgrade=void 0,t.tempNode=[],t.tempVec3=new l,t.tempVec2=new h,t.blockIndex=void 0,t}t(n,e);var i=n.prototype;return i.onLoad=function(){this.propertyLabel=this.node.getChildByName("PropertyLabel").getComponent(r),this.currentLevelLabel=this.node.getChildByName("CurrentLevelLabel").getComponent(r),this.nextLevelLabel=this.node.getChildByName("NextLevelLabel").getComponent(r),this.iconArrow=this.node.getChildByName("IconArrow").getComponent(s),this.buttonUpgrade=this.node.getChildByName("ButtonUpgrade").getComponent(a),this.priceLabel=this.buttonUpgrade.node.getChildByName("LabelPrice").getComponent(r),this.iconCurrency=this.buttonUpgrade.node.getChildByName("IconCurrency").getComponent(s)},i.hide=function(){b.instance.playSound(L.SFX_BUTTON),this.node.active=!1},i.show=function(e){this.blockIndex=e,this.node.active=!0;for(var t,n=o(this.tempNode);!(t=n()).done;){t.value.removeFromParent()}if(this.tempNode.length=0,!(e>=y.blockDatas.length)){var i=y.blockDatas[e],r=m.blockUpgrade.properties[i.level],a=m.blockUpgrade.properties[i.level+1],l=void 0===a,h=Object.keys(r);this.currentLevelLabel.string="lvl"+(i.level+1)+(l?" (MAXED)":""),this.nextLevelLabel.string="lvl"+(i.level+2);for(var d=0;d<h.length;d++){var g=h[d];if(this.tempVec3.set(this.propertyLabel.node.position),this.tempVec3.y+=-70*(d+1),this.tempVec2.set(1,.5),this.createLabel(this.tempVec3,m.stringConfig[g],this.tempVec2),this.tempVec3.x=this.currentLevelLabel.node.position.x,this.tempVec2.set(0,.5),this.createLabel(this.tempVec3,""+m.stringConfig[g+"Symbol"]+r[g]+"%"+(l?" (MAXED)":""),this.tempVec2),void 0!==a){var v=new c;v.layer=this.iconArrow.node.layer,this.tempVec3.set(this.iconArrow.node.position),this.tempVec3.y+=-70*(d+1),v.setPosition(this.tempVec3),v.addComponent(s).spriteFrame=this.iconArrow.spriteFrame,this.node.addChild(v),this.tempNode.push(v),this.tempVec3.x=this.nextLevelLabel.node.position.x,this.createLabel(this.tempVec3,""+m.stringConfig[g+"Symbol"]+a[g]+"%",this.tempVec2)}}var b=y.userBalance.cash>=m.blockUpgrade.amount;this.buttonUpgrade.node.active=void 0!==a,this.iconArrow.node.active=void 0!==a,this.nextLevelLabel.node.active=void 0!==a,this.priceLabel.string=u.BLOCK_UPGRADE_PRICE.toString(),this.priceLabel.color.set(255,b?255:0,b?255:0,255),this.priceLabel.updateRenderer();var L=this.priceLabel.getComponent(p);this.tempVec3.set(this.priceLabel.node.position.x+L.width/2+35,this.iconCurrency.node.position.y,this.iconCurrency.node.position.z),this.iconCurrency.node.setPosition(this.tempVec3),this.buttonUpgrade.interactable=b,this.buttonUpgrade.getComponent(s).grayscale=!b}},i.createLabel=function(e,t,o){var n=new c;n.layer=this.propertyLabel.node.layer,n.setPosition(e);var i=n.addComponent(r);return i.font=this.propertyLabel.font,i.fontSize=this.propertyLabel.fontSize,i.string=t,n.getComponent(p).setAnchorPoint(o),this.node.addChild(n),this.tempNode.push(n),n},i.upgradeBlock=function(){b.instance.playSound(L.SFX_BUTTON),v.emit(g.UnlockBlock),this.hide()},n}(d))||C);n._RF.pop()}}}));

System.register("chunks:///_virtual/QuestData.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){var u;t("QuestStatus",void 0),e._RF.push({},"d00e6wP7ddFyIlBIQBWFUcG","QuestData",void 0),function(t){t[t.UnClaimed=0]="UnClaimed",t[t.Claimed=1]="Claimed"}(u||(u=t("QuestStatus",{}))),e._RF.pop()}}}));

System.register("chunks:///_virtual/Ranch.ts",["cc"],(function(){"use strict";var c;return{setters:[function(t){c=t.cclegacy}],execute:function(){c._RF.push({},"6e12dmBY6NJiJpk20dmn8Uf","Ranch",void 0),c._RF.pop()}}}));

System.register("chunks:///_virtual/RanchActivity.ts",["cc"],(function(t){"use strict";var c;return{setters:[function(t){c=t.cclegacy}],execute:function(){var i;t("RanchActivitity",void 0),c._RF.push({},"ff1f3NahZVB/Jv5zEcoLiq7","RanchActivity",void 0),function(t){t.Play="play",t.Eat="eat",t.Bath="bath"}(i||(i=t("RanchActivitity",{}))),c._RF.pop()}}}));

System.register("chunks:///_virtual/RanchComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./UseCache.ts"],(function(t){"use strict";var e,i,o,n,a,r,s,c,h,l,d,u,m,p,f,v,I,y,A,C;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized,a=t.createForOfIteratorHelperLoose},function(t){r=t.cclegacy,s=t._decorator,c=t.CCInteger,h=t.Prefab,l=t.SpriteAtlas,d=t.Vec3,u=t.director,m=t.CameraComponent,p=t.Sprite,f=t.instantiate,v=t.SkeletalAnimation,I=t.tween,y=t.Component},function(t){A=t.Constants},function(t){C=t.userCache}],execute:function(){var N,_,g,P,b,D,w,S,F,R,O;r._RF.push({},"7844eqBZCNIzIv1ZtYRaDYe","RanchComponent",void 0);var G=s.ccclass,T=s.property;t("RanchComponent",(N=G("RanchComponent"),_=T(c),g=T([h]),P=T(l),b=T(h),N((S=e((w=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,o(e,"index",S,n(e)),o(e,"renderAnimalPrefabs",F,n(e)),o(e,"uiAtlas",R,n(e)),o(e,"currencyEffectPrefab",O,n(e)),e.animalNode=void 0,e.camera=void 0,e.renderRoot2D=void 0,e.statusNode=void 0,e.iconAnimal=void 0,e.animalIcon=void 0,e.showerIcon=void 0,e.foodIcon=void 0,e.petIcon=void 0,e.dropCurrencyGroup=void 0,e.effectGroup=void 0,e.effectEndPos={gold:new d(440,950,1),cash:new d(20,950,1)},e.pos=new d,e.currentTime=void 0,e.unlocked=!1,e}i(e,t);var r=e.prototype;return r.onLoad=function(){var t=u.getScene();this.camera=t.getComponentInChildren(m),this.dropCurrencyGroup=this.node.getChildByName("DropCurrencyGroup"),this.renderRoot2D=this.node.getChildByName("RenderRoot2D"),this.effectGroup=this.renderRoot2D.getChildByName("EffectGroup"),this.statusNode=this.renderRoot2D.getChildByName("StatusNode");var e=this.statusNode.getChildByName("ico_event");this.animalIcon=this.uiAtlas.getSpriteFrame("ico_animal_"+(this.index+1)),this.showerIcon=this.uiAtlas.getSpriteFrame("ranch_activity_shower"),this.petIcon=this.uiAtlas.getSpriteFrame("ranch_activity_pet"),this.foodIcon=this.uiAtlas.getSpriteFrame("ranch_activity_food"),this.iconAnimal=e.getComponentInChildren(p),this.iconAnimal.spriteFrame=this.animalIcon},r.initAnimal=function(){if(!this.animalNode){var t=this.renderAnimalPrefabs[this.index];if(t){this.animalNode=f(t),this.node.addChild(this.animalNode);var e=this.animalNode.getComponent(v);e.play("Armature|Idle"),e.getState("Armature|Idle").speed=3}}},r.deleteAnimal=function(){this.animalNode&&(this.animalNode.removeFromParent(),this.animalNode=void 0)},r.updateUIPosition=function(){this.camera.orthoHeight>A.SHOW_DETAIL_ORTHO_HEIGHT&&this.camera.orthoHeight<A.SHOW_MAP_ORTHO_HEIGHT?this.statusNode.active=!1:(this.camera.camera.update(),this.camera.convertToUINode(this.renderRoot2D.worldPosition,this.statusNode.parent,this.pos),this.statusNode.active=!0,this.statusNode.setPosition(this.pos.add3f(0,40,0)))},r.hasStatus=function(t,e){return!e||t-(this.currentTime-e)<=0},r.showEffectCurrency=function(t){this.camera.camera.update(),this.camera.convertToUINode(this.renderRoot2D.worldPosition,this.statusNode.parent,this.pos);for(var e,i=f(this.currencyEffectPrefab),o=i.getComponentsInChildren(p),n=this.uiAtlas.getSpriteFrame("ico_currency_"+t),r=a(o);!(e=r()).done;){var s=e.value;s.node.layer=this.effectGroup.layer,s.spriteFrame=n}i.layer=this.effectGroup.layer,i.setPosition(this.pos),this.effectGroup.addChild(i),I(i).delay(1).to(1,{position:(new d).set(this.effectEndPos[t])}).call((function(){i.removeFromParent()})).union().start()},r.update=function(){this.currentTime=Date.now()/1e3,this.unlocked=!1;for(var t,e=a(C.ranchDatas);!(t=e()).done;){var i=t.value;if(i.location===this.index+1){this.unlocked=!0,this.initAnimal(),this.hasStatus(A.ANIMAL_BATHING_COOLDOWN,i.bath_time)?(this.iconAnimal.spriteFrame=this.showerIcon,this.updateUIPosition()):this.hasStatus(A.ANIMAL_FEEDING_COOLDOWN,i.eat_time)?(this.iconAnimal.spriteFrame=this.foodIcon,this.updateUIPosition()):this.hasStatus(A.ANIMAL_PETTING_COOLDOWN,i.play_time)?(this.iconAnimal.spriteFrame=this.petIcon,this.updateUIPosition()):this.statusNode.active=!1;break}}this.unlocked||(this.iconAnimal.spriteFrame=this.animalIcon,this.updateUIPosition(),this.deleteAnimal())},e}(y)).prototype,"index",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=e(w.prototype,"renderAnimalPrefabs",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=e(w.prototype,"uiAtlas",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=e(w.prototype,"currencyEffectPrefab",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=w))||D));r._RF.pop()}}}));

System.register("chunks:///_virtual/RanchProcessingSystem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.mjs_cjs=&original=.js","./Constants.ts","./services.ts","./RanchComponent.ts","./GameEvent.ts","./RanchActivity.ts","./Common2.ts","./ConfigManager.ts","./EventTarget.ts","./ResourceUtil.ts","./SoundUtils.ts","./UseCache.ts","./index.js"],(function(e){"use strict";var n,t,i,o,a,c,s,r,u,h,f,l,g,p,d,R,y,m,v,D;return{setters:[function(e){n=e.inheritsLoose,t=e.createForOfIteratorHelperLoose,i=e.applyDecoratedDescriptor,o=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){c=e.cclegacy},null,function(e){s=e.Constants},function(e){r=e.requestUnlockRanch,u=e.requestDoRanchActivity},function(e){h=e.RanchComponent},function(e){f=e.GameEvent},function(e){l=e.RanchActivitity},function(e){g=e.showErrorMessage},function(e){p=e.configManager},function(e){d=e.default},function(e){R=e.ResourceUtil},function(e){y=e.AudioManager,m=e.SoundFiles},function(e){v=e.userCache},function(e){D=e.default}],execute:function(){var I,P,S,A,C;c._RF.push({},"4c30b12ZZ5DD6EIfWRwic/M","RanchProcessingSystem",void 0);e("RanchProcessingSystem",(I=D.Inject("gameState"),P=D.Inject("scene"),S=function(e){function i(){for(var n,t=arguments.length,i=new Array(t),c=0;c<t;c++)i[c]=arguments[c];return n=e.call.apply(e,[this].concat(i))||this,o(n,"gameState",A,a(n)),o(n,"scene",C,a(n)),n.ranchGroup=void 0,n}n(i,e);var c=i.prototype;return c.initialized=function(){d.on(f.BuyRanch,this.onBuyRanch,this),d.on(f.Bathing,this.onBathing,this),d.on(f.Petting,this.onPetting,this),d.on(f.Feeding,this.onFeeding,this),this.ranchGroup=this.scene.getChildByName("RanchGroup")},c.getSelectingRanch=function(){if(void 0!==this.gameState.selectedRanch)for(var e,n=t(v.ranchDatas);!(e=n()).done;){var i=e.value;if(i.location===this.gameState.selectedRanch+1)return i}},c.onBuyRanch=function(){if(void 0!==this.gameState.selectedRanch){var e=this.ranchGroup.children[this.gameState.selectedRanch];if(e){var n=e.getComponent(h);r(n.index+1,(function(e,n){e?(v.updateGardenRanches(),v.updateUserInfo()):R.getUIPrefabRes("PopupDialog",(function(e,t){e||g(t,n)}))}))}}},c.onBathing=function(){var e=this,n=this.getSelectingRanch();n&&u(n.location,l.Bath,(function(t,i){t?(n.bath_time=Date.now()/1e3,e.processDropCurrency(n.location,s.ANIMAL_BATHING_DROP_RATIO),v.updateGardenRanches(),v.updateUserInfo()):R.getUIPrefabRes("PopupDialog",(function(e,n){e||g(n,i)}))}))},c.onPetting=function(){var e=this,n=this.getSelectingRanch();n&&u(n.location,l.Play,(function(t,i){t?(n.play_time=Date.now()/1e3,e.processDropCurrency(n.location,s.ANIMAL_BATHING_DROP_RATIO),v.updateGardenRanches(),v.updateUserInfo()):R.getUIPrefabRes("PopupDialog",(function(e,n){e||g(n,i)}))}))},c.onFeeding=function(){var e=this,n=this.getSelectingRanch();n&&u(n.location,l.Eat,(function(t,i){t?(n.eat_time=Date.now()/1e3,e.processDropCurrency(n.location,s.ANIMAL_BATHING_DROP_RATIO),v.updateGardenRanches(),v.updateUserInfo()):R.getUIPrefabRes("PopupDialog",(function(e,n){e||g(n,i)}))}))},c.process=function(){},c.processDropCurrency=function(e,n){if(void 0===n&&(n=1),void 0!==this.gameState.selectedRanch){var t=p.itemConfigs["animal_"+e];if(t){var i=Math.round(t.dropAmount*n);v.addCurrency(t.currencyType,i),this.ranchGroup.children[this.gameState.selectedRanch].getComponent(h).showEffectCurrency(t.currencyType),y.instance.playSound(m.SFX_REWARD)}}},c.dispose=function(){d.off(f.BuyRanch,this.onBuyRanch,this),d.off(f.Bathing,this.onBathing,this),d.off(f.Petting,this.onPetting,this),d.off(f.Feeding,this.onFeeding,this)},i}(D.System),A=i(S.prototype,"gameState",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=i(S.prototype,"scene",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S));c._RF.pop()}}}));

System.register("chunks:///_virtual/ResourceUtil.ts",["cc"],(function(e){"use strict";var t,n,i,o,r,s,c;return{setters:[function(e){t=e.cclegacy,n=e._decorator,i=e.resources,o=e.error,r=e.Prefab,s=e.instantiate,c=e.find}],execute:function(){var f;t._RF.push({},"a46f370W1pLW79KEUyEI6YO","ResourceUtil",void 0);var a=n.ccclass;e("ResourceUtil",a("resourceUtil")(f=function(){function e(){}return e.loadRes=function(e,t,n){t?i.load(e,t,(function(e,t){if(e)return o(e.message||e),void(n&&n(e,t));n&&n(e,t)})):i.load(e,(function(e,t){if(e)return o(e.message||e),void(n&&n(e,t));n&&n(e,t)}))},e.getUIPrefabRes=function(e,t){this.loadRes("prefab/ui/"+e,r,t)},e.createUI=function(e,t,n){this.getUIPrefabRes(e,(function(e,i){if(!e){var o=s(i);o.setPosition(0,0,0),n||(n=c("Canvas")),n.addChild(o),t&&t(null,o)}}))},e.getJsonConfig=function(e,t){i.load("config/"+e,(function(e,n){if(e)o(e.message||e);else{var i=n;if(i.json)t(e,i.json);else{var r=new Error("failed!!!");t(r,null)}}}))},e.getEffect=function(e,t){this.loadRes("prefab/effect/"+e,r,t)},e}())||f);t._RF.pop()}}}));

System.register("chunks:///_virtual/services.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"74665H1Z1pNzZQ1qL6Y03R7","services",void 0);var n=function(e,t,n){var a=new XMLHttpRequest;return a.open(t?"POST":"GET","https://game.creditdefi.io"+e,!0),0!==s.length&&a.setRequestHeader("authorization","Bearer "+s),a.onreadystatechange=function(){if(4==a.readyState){var e=a.status>=200&&a.status<400;e||console.log(a.responseText),n&&n(e,a.responseText)}},a},s="";e("setUserToken",(function(e){s=e})),e("login",(function(e,t,s){var a=n("/game/login",!0,s);a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.send(JSON.stringify({username:e,password:t}))})),e("requestUserInfo",(function(e){n("/game/me/info",!1,e).send()})),e("requestUserStorage",(function(e){n("/game/me/storage",!1,e).send()})),e("requestGardenBlocks",(function(e){n("/island/slot/list",!0,e).send()})),e("requestGardenRanches",(function(e){n("/game/me/info/animal",!0,e).send()})),e("requestDoPlantAction",(function(e,t,s,a){var i=n("/island/tree/action",!0,a);i.setRequestHeader("Content-Type","application/json;charset=UTF-8");var o={location:e,item_id:s,action:t};i.send(JSON.stringify(o))})),e("requestDoRanchActivity",(function(e,t,s){var a=n("/island/animal/action",!0,s);a.setRequestHeader("Content-Type","application/json;charset=UTF-8");var i={location:e,action:t};a.send(JSON.stringify(i))})),e("requestUnlockRanch",(function(e,t){var s=n("/island/animal/unlock-ranch",!0,t);s.setRequestHeader("Content-Type","application/json;charset=UTF-8"),s.send(JSON.stringify({location:e}))})),e("requestUnlockSlot",(function(e,t){var s=n("/island/slot/open",!0,t);s.setRequestHeader("Content-Type","application/json;charset=UTF-8"),s.send(JSON.stringify({location:e}))})),e("requestUpgradeBlock",(function(e,t){var s=n("/island/slot/update",!0,t);s.setRequestHeader("Content-Type","application/json;charset=UTF-8"),s.send(JSON.stringify({location:e}))})),e("requestBuyItem",(function(e,t,s){var a=n("/game/shop/buy",!0,s);a.setRequestHeader("Content-Type","application/json;charset=UTF-8");var i={quantity:t,item_id:e};a.send(JSON.stringify(i))})),e("requestQuestData",(function(e){n("/island/mission/list",!1,e).send()})),e("requestClaimQuest",(function(e,t){var s=n("/island/mission/complete",!0,t);s.setRequestHeader("Content-Type","application/json;charset=UTF-8"),s.send(JSON.stringify({id:e}))}));t._RF.pop()}}}));

System.register("chunks:///_virtual/SoundUtils.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./ResourceUtil.ts"],(function(n){"use strict";var t,i,e,s,o,u,a,l;return{setters:[function(n){t=n.createClass},function(n){i=n.cclegacy,e=n.sys,s=n.assert,o=n.AudioClip,u=n.warn},function(n){a=n.Constants},function(n){l=n.ResourceUtil}],execute:function(){var c;n("SoundFiles",void 0),i._RF.push({},"3aeb09WexRG6JF5BuDvVVRm","SoundUtils",void 0),function(n){n.SFX_BUTTON="sfx_button",n.SFX_ACTION="sfx_action",n.SFX_REWARD="sfx_reward"}(c||(c=n("SoundFiles",{})));var r=n("AudioManager",function(){function n(){this.soundEnable=!0,this.musicEnable=!0}var i=n.prototype;return i.init=function(t){this.soundEnable="false"!==e.localStorage.getItem(a.KEY_SOUND_ENABLE),this.musicEnable="false"!==e.localStorage.getItem(a.KEY_MUSIC_ENABLE),n._audioSource=t},i.playMusic=function(t){var i=n._audioSource;s(i,"AudioManager not inited!"),this.musicEnable||this.stopMusic(),i.loop=t,i.playing||i.play()},i.stopMusic=function(){var t=n._audioSource;t.playing&&t.stop()},i.playSound=function(t){if(this.soundEnable){var i=n._audioSource;s(i,"AudioManager not inited!");l.loadRes("audio/sound/"+t,o,(function(n,t){n?u("load audioClip failed: ",n):i.playOneShot(t,1)}))}},i.setEnableSound=function(n){this.soundEnable!==n&&(this.soundEnable=n,e.localStorage.setItem(a.KEY_SOUND_ENABLE,this.soundEnable?"true":"false"))},i.setEnableMusic=function(n){this.musicEnable!==n&&(this.musicEnable=n,e.localStorage.setItem(a.KEY_MUSIC_ENABLE,this.musicEnable?"true":"false"))},t(n,null,[{key:"instance",get:function(){return this._instance||(this._instance=new n),this._instance}}]),n}());r._instance=void 0,r._audioSource=void 0,i._RF.pop()}}}));

System.register("chunks:///_virtual/Storage.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){var r;t("StorageTab",void 0),e._RF.push({},"3409a+Jp6pPNbLY7JtRy2gF","Storage",void 0),function(t){t.None="none",t.Plant="plant",t.Product="product",t.Fertilizer="fertilizer"}(r||(r=t("StorageTab",{}))),e._RF.pop()}}}));

System.register("chunks:///_virtual/StringUtils.ts",["cc"],(function(t){"use strict";var r;return{setters:[function(t){r=t.cclegacy}],execute:function(){r._RF.push({},"c49faWyWCNIFoa4u0bAQSxE","StringUtils",void 0);t("formatTime",(function(t){var r=Math.floor(t/3600);if(r>0)return r+" hrs";var o=Math.floor((t-3600*r)/60);return o>0?o+" mins":Math.floor(t-3600*r-60*o)+" secs"})),t("toHourMinSec",(function(t){var r=Math.floor(t/3600),o=Math.floor((t-3600*r)/60),n=Math.floor(t-3600*r-60*o),e="";return r<10&&(e+="0"),e+=r,e+=":",o<10&&(e+="0"),e+=o,e+=":",n<10&&(e+="0"),e+=n}));r._RF.pop()}}}));

System.register("chunks:///_virtual/UseCache.ts",["cc","./Common.ts","./services.ts","./ConfigManager.ts","./Common2.ts"],(function(e){"use strict";var a,t,s,n,r,i,o,c,u;return{setters:[function(e){a=e.cclegacy},function(e){t=e.CurrencyType},function(e){s=e.requestUserInfo,n=e.requestUserStorage,r=e.requestGardenBlocks,i=e.requestQuestData,o=e.requestGardenRanches},function(e){c=e.configManager},function(e){u=e.showDialog}],execute:function(){var d,l;e({LoadingState:void 0,LoadingType:void 0}),a._RF.push({},"4858ba/r2FBiIko9tPv50kz","UseCache",void 0),function(e){e[e.UserInfo=0]="UserInfo",e[e.UserStorage=1]="UserStorage",e[e.GardenBlocks=2]="GardenBlocks",e[e.GardenRanches=3]="GardenRanches",e[e.UserQuest=4]="UserQuest"}(d||(d=e("LoadingType",{}))),function(e){e[e.NotLoaded=0]="NotLoaded",e[e.Loading=1]="Loading",e[e.Completed=2]="Completed"}(l||(l=e("LoadingState",{})));var h=e("UserCache",function(){function e(){for(var e in this.userBalance={gold:0,cash:0,water:0},this.storageData={items:[]},this.blockDatas=[],this.ranchDatas=[],this.questDatas=[],this.loadingStates=new Map,d){var a=Number(e);isNaN(a)||this.loadingStates.set(a,l.NotLoaded)}}var a=e.prototype;return a.updateAllData=function(e){this.updateUserInfo(e),this.updateStorage(e),this.updateGardenBlocks(e),this.updateGardenRanches(e),this.updateQuest(e)},a.updateUserInfo=function(e){var a=this;this.loadingStates[d.UserInfo]!==l.Loading&&s((function(t,s){if(t){a.loadingStates.set(d.UserInfo,l.Completed);var n=JSON.parse(s).account;if(!n)return;var r={cash:n.cash?n.cash:0,gold:n.gold?n.gold:0,water:n.water_balance?n.water_balance:0};a.setUserBalance(r)}else u(e,c.stringConfig.get_user_info_failed)}))},a.updateStorage=function(e){var a=this;this.loadingStates[d.UserStorage]!==l.Loading&&n((function(t,s){if(t){a.loadingStates.set(d.UserStorage,l.Completed);var n=JSON.parse(s).items;if(!n)return;a.storageData.items=n}else u(e,c.stringConfig.get_user_storage_failed)}))},a.updateGardenBlocks=function(e){var a=this;this.loadingStates[d.GardenBlocks]!==l.Loading&&r((function(t,s){if(t){a.loadingStates.set(d.GardenBlocks,l.Completed);var n=JSON.parse(s).block;if(!n)return;a.blockDatas=n}else u(e,"get_user_blocks_detail_failed")}))},a.updateQuest=function(e){var a=this;this.loadingStates[d.UserQuest]!==l.Loading&&i((function(t,s){if(t){a.loadingStates.set(d.UserQuest,l.Completed);var n=JSON.parse(s);a.questDatas=n}else u(e,"get_user_quest_failed")}))},a.updateGardenRanches=function(e){var a=this;this.loadingStates[d.GardenRanches]!==l.Loading&&o((function(t,s){if(t){a.loadingStates.set(d.GardenRanches,l.Completed);var n=JSON.parse(s).ranch;if(!n)return;a.ranchDatas=n}else u(e,"get_user_blocks_detail_failed")}))},a.useCurrency=function(e,a){switch(e){case t.Cash:this.userBalance.cash-=a;break;case t.Gold:this.userBalance.gold-=a;break;case t.Water:this.userBalance.water-=a}},a.addCurrency=function(e,a){switch(e){case t.Cash:this.userBalance.cash+=a;break;case t.Gold:this.userBalance.gold+=a;break;case t.Water:this.userBalance.water+=a}},a.setUserBalance=function(e){this.userBalance.cash=e.cash,this.userBalance.gold=e.gold,this.userBalance.water=e.water},a.setUserCurrency=function(e,a){switch(e){case t.Cash:this.userBalance.cash=a;break;case t.Gold:this.userBalance.gold=a;break;case t.Water:this.userBalance.water=a}},e}());e("userCache",new h);a._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});