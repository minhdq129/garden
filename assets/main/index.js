System.register("chunks:///_virtual/AnimalRenderingSystem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.mjs_cjs=&original=.js","./RanchComponent.ts","./GameStorage.ts","./index.js"],(function(e){"use strict";var n,t,i,r,o,a,c,s;return{setters:[function(e){n=e.inheritsLoose,t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy},null,function(e){a=e.RanchComponent},function(e){c=e.gameStorage},function(e){s=e.default}],execute:function(){var l,u,p;o._RF.push({},"33d82dgWfRP3qFa8M4vNclt","AnimalRenderingSystem",void 0);e("AnimalRenderingSystem",(l=s.Inject("scene"),u=function(e){function t(){for(var n,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return n=e.call.apply(e,[this].concat(o))||this,i(n,"scene",p,r(n)),n.ranchGroup=void 0,n.zooNodes=void 0,n}n(t,e);var o=t.prototype;return o.initialized=function(){this.ranchGroup=this.scene.getChildByName("RanchGroup")},o.updateAnimals=function(){var e=c.getGardenData();if(e)for(var n=e.ranches,t=0;t<n.length;t++){var i=n[t],r=this.ranchGroup.children[t];if(r){var o=r.getComponent(a);i.unlocked?o.initAnimal():i.unlocked||o.deleteAnimal()}}},o.process=function(){this.updateAnimals()},o.dispose=function(){},t}(s.System),p=t(u.prototype,"scene",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u));o._RF.pop()}}}));

System.register("chunks:///_virtual/Block.ts",["cc"],(function(){"use strict";var c;return{setters:[function(t){c=t.cclegacy}],execute:function(){c._RF.push({},"67fb9IydbBNA4u2MNwLcBIG","Block",void 0),c._RF.pop()}}}));

System.register("chunks:///_virtual/BlockComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PopupUnlockBlock.ts"],(function(t){"use strict";var e,o,i,n,c,a,s,r,l,d,u,h,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){c=t.cclegacy,a=t._decorator,s=t.Prefab,r=t.Vec3,l=t.instantiate,d=t.ParticleSystem,u=t.director,h=t.Component},function(t){p=t.PopupUnlockBlock}],execute:function(){var P,f,N,k,v;c._RF.push({},"aadc9bErLFGTq848KEPIpSM","BlockComponent",void 0);var B=a.ccclass,g=a.property;t("BlockComponent",(P=B("BlockComponent"),f=g(s),P((v=e((k=function(t){function e(){for(var e,o=arguments.length,c=new Array(o),a=0;a<o;a++)c[a]=arguments[a];return e=t.call.apply(t,[this].concat(c))||this,i(e,"actionParticlePrefab",v,n(e)),e.statusNode=void 0,e.renderRoot2D=void 0,e.selectingBlock=void 0,e.actionParticleNode=void 0,e.pos=new r,e}o(e,t);var c=e.prototype;return c.start=function(){this.renderRoot2D=this.node.getChildByName("RenderRoot2D"),this.statusNode=this.renderRoot2D.getChildByName("StatusNode"),this.selectingBlock=this.node.getChildByName("SelectingBlock")},c.updateStatus=function(t){t.camera.update(),t.convertToUINode(this.renderRoot2D.worldPosition,this.statusNode.parent,this.pos),this.statusNode.setPosition(this.pos),this.statusNode.position.add3f(0,40,0)},c.showActionParticle=function(){this.actionParticleNode&&(this.actionParticleNode.removeFromParent(),this.actionParticleNode=void 0),this.actionParticleNode=l(this.actionParticlePrefab),this.node.addChild(this.actionParticleNode),this.actionParticleNode.getComponentInChildren(d).play()},c.activeStatusNode=function(t){this.statusNode.active=t,this.selectingBlock.active=!1},c.selectBlock=function(t){this.selectingBlock.active=t},c.onClickUnlock=function(){u.getScene().getChildByName("UI_Canvas").getChildByName("PopupUnlockBlock").getComponent(p).show()},e}(h)).prototype,"actionParticlePrefab",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=k))||N));c._RF.pop()}}}));

System.register("chunks:///_virtual/BlockProcessingSystem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.mjs_cjs=&original=.js","./Constants.ts","./GameEvent.ts","./EventTarget.ts","./GameStorage.ts","./UserBalance.ts","./index.js"],(function(e){"use strict";var t,n,i,o,a,c,r,s,l,u,f;return{setters:[function(e){t=e.inheritsLoose,n=e.applyDecoratedDescriptor,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy},null,function(e){c=e.Constants},function(e){r=e.GameEvent},function(e){s=e.default},function(e){l=e.gameStorage},function(e){u=e.userBalance},function(e){f=e.default}],execute:function(){var p,g,m,h,y,d,k;a._RF.push({},"10787oVqzFLBphXOMMe9KeP","BlockProcessingSystem",void 0);e("BlockProcessingSytem",(p=f.Inject("scene"),g=f.Inject("camera"),m=f.Inject("gameState"),h=function(e){function n(){for(var t,n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return t=e.call.apply(e,[this].concat(a))||this,i(t,"scene",y,o(t)),i(t,"camera",d,o(t)),i(t,"gameState",k,o(t)),t}t(n,e);var a=n.prototype;return a.initialized=function(){s.on(r.UnlockBlock,this.onUnlockBlock,this)},a.onUnlockBlock=function(){u.useCash(c.BLOCK_UNLOCK_PRICE),l.getGardenData().blocks.push({level:0}),l.updateGardenData()},a.process=function(){},a.dispose=function(){s.off(r.Plant,this.onUnlockBlock,this)},n}(f.System),y=n(h.prototype,"scene",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=n(h.prototype,"camera",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=n(h.prototype,"gameState",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h));a._RF.pop()}}}));

System.register("chunks:///_virtual/BlockRenderingSystem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.mjs_cjs=&original=.js","./BlockComponent.ts","./GameStorage.ts","./index.js"],(function(e){"use strict";var t,n,i,o,a,r,c,l,s;return{setters:[function(e){t=e.inheritsLoose,n=e.applyDecoratedDescriptor,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,r=e.Vec3},null,function(e){c=e.BlockComponent},function(e){l=e.gameStorage},function(e){s=e.default}],execute:function(){var u,p,g,m,d,f,h;a._RF.push({},"3cc31q1UjRLqo8pQI2ua2Is","BlockRenderingSystem",void 0);e("BlockRenderingSystem",(u=s.Inject("scene"),p=s.Inject("camera"),g=s.Inject("gameState"),m=function(e){function n(){for(var t,n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return t=e.call.apply(e,[this].concat(a))||this,i(t,"scene",d,o(t)),i(t,"camera",f,o(t)),i(t,"gameState",h,o(t)),t.blockGroup=void 0,t.temp=new r,t}t(n,e);var a=n.prototype;return a.initialized=function(){this.blockGroup=this.scene.getChildByName("BlockGroup")},a.updateBlocks=function(){var e=l.getGardenData();if(e)for(var t=e.blocks,n=0;n<this.blockGroup.children.length;n++){var i=this.blockGroup.children[n];if(n>t.length)i.active=!1;else{i.active=!0;var o=i.getComponent(c);o.activeStatusNode(n===t.length),n<t.length?o.selectBlock(this.gameState.selectedBlock===n):o.updateStatus(this.camera)}}},a.process=function(){this.updateBlocks()},a.dispose=function(){},n}(s.System),d=n(m.prototype,"scene",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=n(m.prototype,"camera",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=n(m.prototype,"gameState",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m));a._RF.pop()}}}));

System.register("chunks:///_virtual/BlockUpgradeConfig.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"e55b6Ar/TNBOIjhigf9mbLS","BlockUpgradeConfig",void 0);e("blockPropertiesUpgrade",[{productivityPercent:0,timeDecreasePercent:0},{productivityPercent:10,timeDecreasePercent:5},{productivityPercent:20,timeDecreasePercent:10},{productivityPercent:30,timeDecreasePercent:15},{productivityPercent:40,timeDecreasePercent:20}]);t._RF.pop()}}}));

System.register("chunks:///_virtual/CameraProcessingSystem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.mjs_cjs=&original=.js","./Constants.ts","./index.js"],(function(e){"use strict";var t,i,o,r,a,s,n,c;return{setters:[function(e){t=e.inheritsLoose,i=e.applyDecoratedDescriptor,o=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,s=e.Vec3},null,function(e){n=e.Constants},function(e){c=e.default}],execute:function(){var l,h,u,m,p,g,d;a._RF.push({},"a7b2bThI51IspotUc3RVGvT","CameraProcessingSystem",void 0);e("CameraProcessingSystem",(l=c.Inject("scene"),h=c.Inject("camera"),u=c.Inject("gameState"),m=function(e){function i(){for(var t,i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return t=e.call.apply(e,[this].concat(a))||this,o(t,"scene",p,r(t)),o(t,"camera",g,r(t)),o(t,"gameState",d,r(t)),t.blockGroup=void 0,t.ranchGroup=void 0,t.currentZoomTarget=n.SHOW_MAP_ORTHO_HEIGHT,t.cameraPos=new s,t.tempVec=new s,t}t(i,e);var a=i.prototype;return a.initialized=function(){this.ranchGroup=this.scene.getChildByName("RanchGroup"),this.blockGroup=this.scene.getChildByName("BlockGroup"),this.lookAt(25,0,15)},a.lookAt=function(e,t,i){this.tempVec.set(this.camera.node.forward).multiplyScalar(n.CAMERA_DISTANCE),this.cameraPos.set(e,t,i).subtract(this.tempVec),this.camera.node.setPosition(this.cameraPos)},a.process=function(){if(this.gameState.cameraZoomToDetail){if(void 0!==this.gameState.selectedBlock){var e=this.blockGroup.children[this.gameState.selectedBlock];this.lookAt(e.position.x,e.position.y,e.position.z)}else if(void 0!==this.gameState.selectedRanch){var t=this.ranchGroup.children[this.gameState.selectedRanch];this.lookAt(t.position.x,t.position.y,t.position.z)}this.currentZoomTarget=n.SHOW_DETAIL_ORTHO_HEIGHT}else this.currentZoomTarget=this.gameState.currentOrthoHeight;var i=this.camera.orthoHeight,o=i+.4*(this.currentZoomTarget-i);Math.abs(o-this.currentZoomTarget)<.01&&(o=this.currentZoomTarget),this.camera.orthoHeight=o},i}(c.System),p=i(m.prototype,"scene",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=i(m.prototype,"camera",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=i(m.prototype,"gameState",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m));a._RF.pop()}}}));

System.register("chunks:///_virtual/Common.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){var c;e("CurrencyType",void 0),t._RF.push({},"d6157XEXZlHaJwOzLWpVms8","Common",void 0),function(e){e.Gold="gold",e.Water="water",e.Cash="cash"}(c||(c=e("CurrencyType",{}))),t._RF.pop()}}}));

System.register("chunks:///_virtual/Constants.ts",["cc"],(function(_){"use strict";var O;return{setters:[function(_){O=_.cclegacy}],execute:function(){O._RF.push({},"ec99aRQ9OtPeJTqi7gqtULU","Constants",void 0);var A=_("Constants",(function(){}));A.FERTILIZE_SKIP_TIME=1800,A.MAX_ORTHO_HEIGHT=50,A.SHOW_MAP_ORTHO_HEIGHT=30,A.SHOW_DETAIL_ORTHO_HEIGHT=10,A.MAP_ZOOM_RATE=.1,A.MAP_DRAG_RATIO=30,A.CAMERA_DISTANCE=350,A.BLOCK_UNLOCK_PRICE=3e3,A.BLOCK_UPGRADE_PRICE=5e3,A.ANIMAL_DROP_CURRENCY_COOLDOWN=43200,A.ANIMAL_BATHING_COOLDOWN=28800,A.ANIMAL_FEEDING_COOLDOWN=14400,A.ANIMAL_PETTING_COOLDOWN=14400,A.ANIMAL_BATHING_DROP_RATIO=1,A.ANIMAL_FEEDING_DROP_RATIO=.5,A.ANIMAL_PETTING_DROP_RATIO=.5,O._RF.pop()}}}));

System.register("chunks:///_virtual/EventTarget.ts",["cc"],(function(e){"use strict";var t,c;return{setters:[function(e){t=e.cclegacy,c=e.EventTarget}],execute:function(){t._RF.push({},"526c2IS4YBHsJe+yM4iuclr","EventTarget",void 0);e("default",new c);t._RF.pop()}}}));

System.register("chunks:///_virtual/GameEvent.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){var n;e("GameEvent",void 0),t._RF.push({},"802dcSUOelIpr+U4NJnD2Mf","GameEvent",void 0),function(e){e.ClearSelect="GameEvent.ClearSelect",e.TouchBlock="GameEvent.TouchBlock",e.Plant="GameEvent.Plant",e.Water="GameEvent.Water",e.Fertilize="GameEvent.Fertilize",e.Harvest="GameEvent.Harvest",e.BuyZoo="GameEvent.BuyZoo",e.UnlockBlock="GameEvent.UnlockBlock",e.Petting="GameEvent.Petting",e.Bathing="GameEvent.Bathing",e.Feeding="GameEvent.Feeding"}(n||(n=e("GameEvent",{}))),t._RF.pop()}}}));

System.register("chunks:///_virtual/GameHUD.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./GameEvent.ts","./EventTarget.ts","./UserBalance.ts"],(function(e){"use strict";var t,a,s,r,i,n,l,o,c,h,u,m,d,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,s=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,n=e._decorator,l=e.Camera,o=e.Vec3,c=e.Label,h=e.Component},function(e){u=e.Constants},function(e){m=e.GameEvent},function(e){d=e.default},function(e){p=e.userBalance}],execute:function(){var g,f,C,b,y;i._RF.push({},"f1b36959pFKfZ6QG9FL2X6r","GameHUD",void 0);var v=n.ccclass,w=n.property;e("GameHUD",(g=v("GameHUD"),f=w(l),g((y=t((b=function(e){function t(){for(var t,a=arguments.length,i=new Array(a),n=0;n<a;n++)i[n]=arguments[n];return t=e.call.apply(e,[this].concat(i))||this,s(t,"camera",y,r(t)),t.userWallet=void 0,t.waterLabel=void 0,t.goldLabel=void 0,t.cashLabel=void 0,t.tempVec=new o,t.cameraPos=new o,t}a(t,e);var i=t.prototype;return i.onLoad=function(){this.userWallet={cash:0,gold:0,water:0};var e=this.node.getChildByName("Top_Left").getChildByName("Currencies");this.waterLabel=e.getChildByName("Water").getComponent(c),this.goldLabel=e.getChildByName("Gold").getComponent(c),this.cashLabel=e.getChildByName("Cash").getComponent(c)},i.update=function(){this.updateCurrencies(p.userWallet)},i.updateCurrencies=function(e){e&&(e.cash!==this.userWallet.cash&&(this.userWallet.cash=e.cash,this.cashLabel.string=this.userWallet.cash.toString()),e.gold!==this.userWallet.gold&&(this.userWallet.gold=e.gold,this.goldLabel.string=this.userWallet.gold.toString()),e.water!==this.userWallet.water&&(this.userWallet.water=e.water,this.waterLabel.string=this.userWallet.water.toString()))},i.onBtnZooClick=function(){d.emit(m.ClearSelect),this.tempVec.set(this.camera.node.forward).multiplyScalar(u.CAMERA_DISTANCE),this.cameraPos.set(120,0,90).subtract(this.tempVec),this.camera.node.setPosition(this.cameraPos)},i.onBtnFarmClick=function(){d.emit(m.ClearSelect),this.tempVec.set(this.camera.node.forward).multiplyScalar(u.CAMERA_DISTANCE),this.cameraPos.set(25,0,15).subtract(this.tempVec),this.camera.node.setPosition(this.cameraPos)},t}(h)).prototype,"camera",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=b))||C));i._RF.pop()}}}));

System.register("chunks:///_virtual/GameInputSystem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.mjs_cjs=&original=.js","./Constants.ts","./PopupRanchActivity.ts","./PopupSelectSeed.ts","./PopupTool.ts","./PopupUnlockRanch.ts","./GameEvent.ts","./EventTarget.ts","./GameStorage.ts","./index.js"],(function(e){"use strict";var t,o,i,a,c,n,s,h,l,p,r,u,d,m,g,v,S,T,f,y;return{setters:[function(e){t=e.inheritsLoose,o=e.applyDecoratedDescriptor,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){c=e.cclegacy,n=e.input,s=e.Input,h=e.Vec2,l=e.MeshRenderer,p=e.geometry,r=e.Vec3},null,function(e){u=e.Constants},function(e){d=e.PopupRanchActivity},function(e){m=e.PopupSelectSeed},function(e){g=e.PopupTool},function(e){v=e.PopupUnlockRanch},function(e){S=e.GameEvent},function(e){T=e.default},function(e){f=e.gameStorage},function(e){y=e.default}],execute:function(){var R,k,B,C,_,A,G;c._RF.push({},"db0b5PpFcRGC4l8ejhxnsD8","GameInputSystem",void 0);e("GameInputSystem",(R=y.Inject("scene"),k=y.Inject("camera"),B=y.Inject("gameState"),C=function(e){function o(){for(var t,o=arguments.length,c=new Array(o),n=0;n<o;n++)c[n]=arguments[n];return t=e.call.apply(e,[this].concat(c))||this,i(t,"scene",_,a(t)),i(t,"camera",A,a(t)),i(t,"gameState",G,a(t)),t.blockGroup=void 0,t.ranchGroup=void 0,t.popupSelectSeed=void 0,t.popupTool=void 0,t.popupRanchActivity=void 0,t.popupUnlockRanch=void 0,t.tempVec=new r,t.ray=new p.Ray,t}t(o,e);var c=o.prototype;return c.initialized=function(){this.blockGroup=this.scene.getChildByName("BlockGroup"),this.ranchGroup=this.scene.getChildByName("RanchGroup");var e=this.scene.getChildByName("UI_Canvas");this.popupSelectSeed=e.getChildByName("PopupSelectSeed"),this.popupTool=e.getChildByName("PopupTool"),this.popupRanchActivity=e.getChildByName("PopupRanchActivity"),this.popupUnlockRanch=e.getChildByName("PopupUnlockRanch"),n.on(s.EventType.TOUCH_MOVE,this.onTouchMove,this),n.on(s.EventType.TOUCH_START,this.onTouchStart,this),T.on(S.ClearSelect,this.onClearSelect,this),T.on(S.TouchBlock,this.onTouchBlock,this)},c.onTouchStart=function(e){this.checkTouchBlock(e.touch.getLocation()),this.checkTouchRanch(e.touch.getLocation()),this.gameState.cameraZoomToDetail=void 0!==this.gameState.selectedBlock||void 0!==this.gameState.selectedRanch},c.onTouchMove=function(e){if(!this.gameState.cameraZoomToDetail){var t=e.getTouches();if(1===t.length){var o=-e.getDeltaY(),i=this.camera.node.rotation.getEulerAngles(this.tempVec),a=e.getDeltaX()*Math.sin(i.y*Math.PI/180),c=-e.getDeltaX()*Math.cos(i.y*Math.PI/180);this.tempVec.set(c/u.MAP_DRAG_RATIO,o/u.MAP_DRAG_RATIO,a/u.MAP_DRAG_RATIO),this.camera.node.setPosition(this.camera.node.position.add(this.tempVec))}else{var n=h.distance(t[0].getPreviousLocation(),t[1].getPreviousLocation()),s=h.distance(t[0].getLocation(),t[1].getLocation())-n,l=this.gameState.currentOrthoHeight-s*u.MAP_ZOOM_RATE;l>u.MAX_ORTHO_HEIGHT&&(l=u.MAX_ORTHO_HEIGHT),l<u.SHOW_DETAIL_ORTHO_HEIGHT&&(l=u.SHOW_DETAIL_ORTHO_HEIGHT),this.gameState.currentOrthoHeight=l}}},c.checkTouchRanch=function(e){if(void 0===this.gameState.selectedBlock){var t=this.camera.screenPointToRay(e.x,e.y,this.ray),o=f.getGardenData();if(o)for(var i=o.ranches,a=0;a<this.ranchGroup.children.length;a++){var c=i[a];if(c){var n=this.ranchGroup.children[a].getChildByName("Plane");if(n){var s=n.getComponent(l);if(p.intersect.rayModel(t,s.model)>0){if(this.gameState.selectedRanch=a,this.gameState.selectedBlock=void 0,this.popupSelectSeed.active=!1,this.popupTool.active=!1,c.unlocked)this.popupRanchActivity.getComponent(d).show(a);else this.popupUnlockRanch.getComponent(v).show(a);break}this.gameState.selectedRanch=void 0,this.popupUnlockRanch.active=!1,this.popupRanchActivity.active=!1}}}}},c.checkTouchBlock=function(e){var t=f.getGardenData();if(t){for(var o=t.blocks,i=this.camera.screenPointToRay(e.x,e.y,this.ray),a=!1,c=0;c<o.length;c++){if(c>=this.blockGroup.children.length)throw Error("Block_"+c+" not existed on map");var n=this.blockGroup.children[c].getChildByName("Block").getComponentInChildren(l);if(p.intersect.rayModel(i,n.model)>0){if(c===this.gameState.selectedBlock)break;this.gameState.selectedBlock=c,this.onTouchBlock(),a=!0}}a||(this.gameState.selectedBlock=void 0,this.gameState.selectedRanch=void 0,this.popupSelectSeed.active=!1,this.popupTool.active=!1)}},c.onTouchBlock=function(){if(void 0!==this.gameState.selectedBlock){var e=f.getGardenData().blocks[this.gameState.selectedBlock];if(this.popupSelectSeed.active=!e.plant,this.popupTool.active=!!e.plant,e.plant){var t=this.popupTool.getComponent(g);t&&t.showTool(this.gameState.selectedBlock,e.plant)}else{var o=this.popupSelectSeed.getComponent(m);o&&o.show(this.gameState.selectedBlock)}this.gameState.selectedRanch=void 0}},c.onClearSelect=function(){this.gameState.selectedBlock=void 0,this.gameState.selectedRanch=void 0,this.gameState.cameraZoomToDetail=void 0!==this.gameState.selectedRanch,this.popupUnlockRanch.active=!1,this.popupSelectSeed.active=!1,this.popupTool.active=!1,this.popupRanchActivity.active=!1},c.process=function(){},c.dispose=function(){n.off(s.EventType.TOUCH_START,this.onTouchStart,this),n.off(s.EventType.TOUCH_MOVE,this.onTouchMove,this),T.off(S.ClearSelect,this.onClearSelect,this),T.off(S.TouchBlock,this.onTouchBlock,this)},o}(y.System),_=o(C.prototype,"scene",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=o(C.prototype,"camera",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=o(C.prototype,"gameState",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C));c._RF.pop()}}}));

System.register("chunks:///_virtual/GameState.ts",["cc"],(function(){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"d1b527tmnZELILY/NQ5aJ0i","GameState",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/GameStorage.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){t("GameStorageKey",void 0),e._RF.push({},"3aaa9U3fW9K8bw2EmSPBgfS","GameStorage",void 0);var a;!function(t){t.VERISON="StorageKey.VERSION",t.GARDEN="StorageKey.GARDEN",t.STORAGE="StorageKey.STORAGE",t.USER_WALLET="StorageKey.USER_WALLET",t.DAILY_QUEST="StorageKey.DAILY_QUEST"}(a||(a=t("GameStorageKey",{})));var r=t("GameStorage",function(){function t(){var t=this;this.storage={},this.gardenData=void 0,this.getGardenData=function(){return t.gardenData||(t.gardenData=JSON.parse(t.getItem(a.GARDEN))),t.gardenData},this.storageData=void 0,this.getStorageData=function(){return t.storageData||(t.storageData=JSON.parse(t.getItem(a.STORAGE))),t.storageData},this.updateGardenData=function(){var e=JSON.stringify(t.gardenData);t.setItem(a.GARDEN,e)},this.updateStorageData=function(){var e=JSON.stringify(t.storageData);t.setItem(a.STORAGE,e)},this.clear=function(){if(window.localStorage)return window.localStorage.clear();t.storage={}},this.getItem=function(e){return window.localStorage?window.localStorage.getItem(e):t.storage[e]},this.setItem=function(e,a){if(window.localStorage)return window.localStorage.setItem(e,a);t.storage[e]=a},this.removeItem=function(e){if(window.localStorage)return window.localStorage.removeItem(e);t.storage[e]=null,delete t.storage[e]}}return t.prototype.initData=function(){var t=this.getItem(a.VERISON);if(t&&4===parseInt(t)||(this.clear(),this.setItem(a.VERISON,4..toString())),!this.getItem(a.GARDEN)){this.setItem(a.GARDEN,'{"blocks":[{"level":0},{"level":0}],"ranches":[{"unlocked":false},{"unlocked":false},{"unlocked":false},{"unlocked":false}]}')}if(!this.getItem(a.STORAGE)){this.setItem(a.STORAGE,'{"items":[{"id":"plant_00","quantity":3}]}')}if(!this.getItem(a.USER_WALLET)){this.setItem(a.USER_WALLET,'{"gold":9999999,"cash":9999999,"water":99999}')}},t}());t("gameStorage",new r);e._RF.pop()}}}));

System.register("chunks:///_virtual/Garden.ts",["cc"],(function(){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"d4e3fm3xdhJBZ7C0Rg1x+oE","Garden",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/GardenScene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.mjs_cjs=&original=.js","./Constants.ts","./AnimalRenderingSystem.ts","./BlockProcessingSystem.ts","./BlockRenderingSystem.ts","./CameraProcessingSystem.ts","./GameInputSystem.ts","./PlantProcessingSystem.ts","./PlantRenderingSystem.ts","./ZooProcessingSystem.ts","./GameStorage.ts","./QuestManager.ts","./UserBalance.ts","./index.js"],(function(e){"use strict";var t,n,s,r,i,a,o,c,l,d,m,u,S,y,g,f,p,w,h,P,v,C,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,s=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,o=e.Prefab,c=e.director,l=e.CameraComponent,d=e.Component},null,function(e){m=e.Constants},function(e){u=e.AnimalRenderingSystem},function(e){S=e.BlockProcessingSytem},function(e){y=e.BlockRenderingSystem},function(e){g=e.CameraProcessingSystem},function(e){f=e.GameInputSystem},function(e){p=e.PlantProcessingSytem},function(e){w=e.PlantRenderingSytem},function(e){h=e.ZooProcessingSystem},function(e){P=e.gameStorage},function(e){v=e.questManager},function(e){C=e.userBalance},function(e){b=e.default}],execute:function(){var G,R,B,D,_;i._RF.push({},"734feVQSzdG76tFES30ltsr","GardenScene",void 0);var H=a.ccclass,j=a.property;e("GardenScene",(G=H("GardenScene"),R=j(o),G((_=t((D=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,s(t,"plantPrefab",_,r(t)),t.world=void 0,t}n(t,e);var i=t.prototype;return i.start=function(){var e=c.getScene(),t=e.getChildByName("Camera").getComponent(l),n={cameraZoomToDetail:!1,currentOrthoHeight:m.SHOW_MAP_ORTHO_HEIGHT};this.world=new b.World,P.initData(),v.initData(),C.initData(),this.world.register("scene",e),this.world.register("camera",t),this.world.register("gameState",n),this.world.register("plantPrefab",this.plantPrefab),this.world.addSystem(new y,!1),this.world.addSystem(new w,!1),this.world.addSystem(new u,!1),this.world.addSystem(new f,!0),this.world.addSystem(new p,!0),this.world.addSystem(new S,!0),this.world.addSystem(new h,!0),this.world.addSystem(new g,!0)},i.update=function(e){this.world.setDelta(e),this.world.processActiveSystem(),this.world.processPassiveSystem()},t}(d)).prototype,"plantPrefab",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=D))||B));i._RF.pop()}}}));

System.register("chunks:///_virtual/ItemConfig.ts",["cc","./Common.ts"],(function(e){"use strict";var i,r;return{setters:[function(e){i=e.cclegacy},function(e){r=e.CurrencyType}],execute:function(){var t;e("ItemType",void 0),i._RF.push({},"ebfa1PrIVVMZ5evCrsiVzBC","ItemConfig",void 0),function(e){e[e.Seed=0]="Seed",e[e.Fertilizer=1]="Fertilizer"}(t||(t=e("ItemType",{})));e("itemConfigs",{plant_00:{id:"plant_00",hp:1,grownTime:3600,fertilizer:"fertilizer_00",itemType:t.Seed},plant_01:{id:"plant_01",hp:2,grownTime:7200,fertilizer:"fertilizer_00",itemType:t.Seed},plant_02:{id:"plant_02",hp:3,grownTime:9e3,fertilizer:"fertilizer_01",itemType:t.Seed},plant_03:{id:"plant_03",hp:4,grownTime:10800,fertilizer:"fertilizer_01",itemType:t.Seed},plant_04:{id:"plant_04",hp:5,grownTime:12600,fertilizer:"fertilizer_01",itemType:t.Seed},fertilizer_00:{id:"fertilizer_00",reduceTime:1800,itemType:t.Fertilizer},fertilizer_01:{id:"fertilizer_01",reduceTime:1800,itemType:t.Fertilizer},animal_0:{id:"animal_0",price:5e3,dropAmount:200,currencyType:r.Gold},animal_1:{id:"animal_1",price:15e3,dropAmount:600,currencyType:r.Gold},animal_2:{id:"animal_2",price:1e4,dropAmount:200,currencyType:r.Cash},animal_3:{id:"animal_3",price:3e4,dropAmount:600,currencyType:r.Cash}});i._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./Constants.ts","./BlockUpgradeConfig.ts","./ItemConfig.ts","./NameConfig.ts","./QuestConfig.ts","./ShopItemConfig.ts","./BlockComponent.ts","./PlantComponent.ts","./RanchComponent.ts","./GardenScene.ts","./GameHUD.ts","./PopupBuyItem.ts","./PopupBuyZoo.ts","./PopupQuest.ts","./PopupRanchActivity.ts","./PopupSelectSeed.ts","./PopupShop.ts","./PopupStorage.ts","./PopupTool.ts","./PopupUnlockBlock.ts","./PopupUnlockRanch.ts","./PopupUpgradeBlock.ts","./AnimalRenderingSystem.ts","./BlockProcessingSystem.ts","./BlockRenderingSystem.ts","./CameraProcessingSystem.ts","./GameInputSystem.ts","./PlantProcessingSystem.ts","./PlantRenderingSystem.ts","./ZooProcessingSystem.ts","./Block.ts","./Common.ts","./GameEvent.ts","./GameState.ts","./Garden.ts","./Plant.ts","./Ranch.ts","./Storage.ts","./EventTarget.ts","./GameStorage.ts","./QuestManager.ts","./StringUtils.ts","./UserBalance.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/NameConfig.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"633bcklxVZKpZxPPeICl7cU","NameConfig",void 0);e("nameConfigs",{plant_00:"Wheat",plant_01:"Carrot",plant_02:"Tomato",plant_03:"Grape",plant_04:"Apple",fertilizer_00:"Basic Fertilizer",fertilizer_01:"Premium Fertilizer",productivityPercent:"Product:",timeDecreasePercent:"Time:",productivityPercentSymbol:"+",timeDecreasePercentSymbol:"-",daily_quest_desc_0:"Plant a tree or seed",daily_quest_desc_1:"Watering tree once",daily_quest_desc_2:"Pet animal once",animal_0:"Pig",animal_1:"Sheep",animal_2:"Horse",animal_3:"Zebra"});t._RF.pop()}}}));

System.register("chunks:///_virtual/Plant.ts",["cc"],(function(t){"use strict";var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){var a,e;t({PlantSize:void 0,PlantStatusType:void 0}),n._RF.push({},"0ab8boy5ydCzqSwxJSzb4sS","Plant",void 0),function(t){t[t.Sprout=0]="Sprout",t[t.Sapling=1]="Sapling",t[t.Mature=2]="Mature"}(a||(a=t("PlantSize",{}))),function(t){t[t.Worm=0]="Worm",t[t.Dry=1]="Dry"}(e||(e=t("PlantStatusType",{}))),n._RF.pop()}}}));

System.register("chunks:///_virtual/PlantComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./Plant.ts","./StringUtils.ts"],(function(e){"use strict";var t,r,i,n,o,a,s,l,d,h,u,p,c,g,P,f,v,b,C,m,w,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.initializerDefineProperty,i=e.inheritsLoose,n=e.assertThisInitialized,o=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy,s=e._decorator,l=e.CCString,d=e.Prefab,h=e.SpriteAtlas,u=e.Vec3,p=e.Color,c=e.Sprite,g=e.ProgressBar,P=e.Label,f=e.instantiate,v=e.ParticleSystem,b=e.tween,C=e.Component},function(e){m=e.Constants},function(e){w=e.PlantSize},function(e){y=e.toHourMinSec}],execute:function(){var N,S,B,D,R,I,z,_,H,A,F,L,k,O,T,M;a._RF.push({},"7865329OKBPiq+nR+pIYnyH","PlantComponent",void 0);var U=s.ccclass,E=s.property,j=e("default",(A=U("PlantPrefabPair"),F=E(l),L=E([d]),A((T=t((O=function(){r(this,"key",T,this),r(this,"values",M,this)}).prototype,"key",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=t(O.prototype,"values",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=O))||k));e("PlantComponent",(N=U("PlantComponent"),S=E([j]),B=E(h),D=E(d),N((z=t((I=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"renderPlantPrefabs",z,n(t)),r(t,"uiAtlas",_,n(t)),r(t,"glowingParticlePrefab",H,n(t)),t.renderRoot2D=void 0,t.renderPlantNode=void 0,t.glowingParticle=void 0,t.label=void 0,t.progressBar=void 0,t.statusNode=void 0,t.statusSprite=void 0,t.pos=new u,t.greenColor=new p(0,255,0,255),t.orangeColor=new p(255,128,0,255),t.redColor=new p(255,0,0,255),t}i(t,e);var a=t.prototype;return a.onLoad=function(){this.renderRoot2D=this.node.getChildByName("RenderRoot2D"),this.statusNode=this.renderRoot2D.getChildByName("StatusNode");var e=this.statusNode.getChildByName("ico_event");this.statusSprite=e.getComponentInChildren(c),this.progressBar=this.renderRoot2D.getComponentInChildren(g),this.label=this.progressBar.getComponentInChildren(P)},a.getPlantPrefabByNameAndSize=function(e,t){for(var r,i=o(this.renderPlantPrefabs);!(r=i()).done;){var n=r.value;if(n.key===e&&t<n.values.length)return n.values[t]}return null},a.setPlant=function(e,t){this.renderPlantNode&&(this.renderPlantNode.removeFromParent(),this.renderPlantNode=void 0),this.glowingParticle&&(this.glowingParticle.removeFromParent(),this.glowingParticle=void 0);var r=this.getPlantPrefabByNameAndSize(e,t);if(r){if(this.renderPlantNode=f(r),this.renderPlantNode.position.set(0,1,0),this.node.addChild(this.renderPlantNode),t===w.Mature)this.glowingParticle=f(this.glowingParticlePrefab),this.node.addChild(this.glowingParticle),this.glowingParticle.getComponentInChildren(v).play();b(this.renderPlantNode).to(.2,{scale:new u(1.1,1.1,1.1)}).to(.2,{scale:new u(.9,.9,.9)}).to(.1,{scale:new u(1,1,1)}).union().start()}},a.setPlantStatuses=function(e){this.statusNode.active=0!==e.length,0!==e.length&&(this.statusSprite.spriteFrame=this.uiAtlas.getSpriteFrame("plant_task_"+e[0].type))},a.updateUIPosition=function(e){e.camera.update(),e.convertToUINode(this.renderRoot2D.worldPosition,this.progressBar.node.parent,this.pos),this.statusNode.setPosition(this.pos),this.statusNode.position.add3f(0,40,0),this.progressBar.node.active=e.orthoHeight===m.SHOW_DETAIL_ORTHO_HEIGHT,this.progressBar.node.setPosition(this.pos),this.progressBar.node.position.add3f(0,-5,0)},a.updatePlantData=function(e,t){this.renderRoot2D.active&&(this.label.string=e>0?y(e):"",this.progressBar.progress=t,this.progressBar.barSprite.color=t>.66?this.greenColor:t>.33?this.orangeColor:this.redColor)},t}(C)).prototype,"renderPlantPrefabs",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(I.prototype,"uiAtlas",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=t(I.prototype,"glowingParticlePrefab",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=I))||R));a._RF.pop()}}}));

System.register("chunks:///_virtual/PlantProcessingSystem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.mjs_cjs=&original=.js","./BlockUpgradeConfig.ts","./ItemConfig.ts","./QuestConfig.ts","./Constants.ts","./BlockComponent.ts","./GameEvent.ts","./Plant.ts","./EventTarget.ts","./GameStorage.ts","./QuestManager.ts","./UserBalance.ts","./index.js"],(function(t){"use strict";var e,i,n,a,o,r,s,l,c,u,g,p,f,d,h,m,v,k,S;return{setters:[function(t){e=t.inheritsLoose,i=t.createForOfIteratorHelperLoose,n=t.applyDecoratedDescriptor,a=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy},null,function(t){s=t.blockPropertiesUpgrade},function(t){l=t.itemConfigs},function(t){c=t.QuestType},function(t){u=t.Constants},function(t){g=t.BlockComponent},function(t){p=t.GameEvent},function(t){f=t.PlantSize,d=t.PlantStatusType},function(t){h=t.default},function(t){m=t.gameStorage},function(t){v=t.questManager},function(t){k=t.userBalance},function(t){S=t.default}],execute:function(){var b,P,y,B,T,w,D;r._RF.push({},"6ac05V8cKtOybnaLTrXx4rH","PlantProcessingSystem",void 0);t("PlantProcessingSytem",(b=S.Inject("scene"),P=S.Inject("camera"),y=S.Inject("gameState"),B=function(t){function n(){for(var e,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return e=t.call.apply(t,[this].concat(n))||this,a(e,"scene",T,o(e)),a(e,"camera",w,o(e)),a(e,"gameState",D,o(e)),e.blockGroup=void 0,e}e(n,t);var r=n.prototype;return r.initialized=function(){this.blockGroup=this.scene.getChildByName("BlockGroup"),h.on(p.Plant,this.onPlantSeed,this),h.on(p.Water,this.onWatering,this),h.on(p.Fertilize,this.onFertilizing,this),h.on(p.Harvest,this.onHarvesting,this)},r.onPlantSeed=function(t){if(t){var e=m.getGardenData();if(void 0!==this.gameState.selectedBlock){if(this.gameState.selectedBlock>=e.blocks.length)throw Error("selecting block index greater than total blocks");var n=e.blocks[this.gameState.selectedBlock];if(n.plant)throw Error("this block cannot plant any more");var a=l[t];if(!a)throw Error("No config data for plant with id = "+t);var o={id:a.id,hp:a.hp,size:f.Sprout,plantTime:Date.now(),statuses:[{type:d.Dry,time:0}]};n.plant=o,m.updateGardenData();for(var r,s=m.getStorageData(),u=s.items.filter((function(e){return e.id===t})),k=i(u);!(r=k()).done;){var S=r.value;if(S.quantity=S.quantity-1,0===S.quantity){var b=s.items.indexOf(S);b>=0&&s.items.splice(b,1)}}m.updateStorageData(),v.updateQuestProgress(c.PlantTree),h.emit(p.TouchBlock),this.blockGroup.children[this.gameState.selectedBlock].getComponent(g).showActionParticle()}}},r.getSelectingPlant=function(){var t=m.getGardenData();if(void 0!==this.gameState.selectedBlock){if(this.gameState.selectedBlock>=t.blocks.length)throw Error("onWatering: selected block is greater than total block");return t.blocks[this.gameState.selectedBlock].plant}},r.onWatering=function(){var t=this.getSelectingPlant();if(void 0===t)throw Error("selecting plant === undefined");for(var e,n=i(t.statuses);!(e=n()).done;){var a=e.value;if(a.type===d.Dry){var o=t.statuses.indexOf(a);o>=0&&t.statuses.splice(o,1);break}}t.hp+=1,m.updateGardenData(),k.useWatter(1),v.updateQuestProgress(c.Wattering),h.emit(p.TouchBlock),this.blockGroup.children[this.gameState.selectedBlock].getComponent(g).showActionParticle()},r.onFertilizing=function(){var t=this.getSelectingPlant();if(void 0===t)throw Error("selecting plant === undefined");var e=m.getStorageData();if(l[t.id]){var i=l[t.id],n=e.items.find((function(t){return t.id===i.fertilizer}));if(n&&0!==n.quantity){if(n.quantity-=1,0===n.quantity){var a=e.items.indexOf(n);e.items.splice(a,1)}m.updateStorageData();var o=t.skipTime?t.skipTime:0;t.skipTime=o+u.FERTILIZE_SKIP_TIME,this.process(),m.updateGardenData(),h.emit(p.TouchBlock),this.blockGroup.children[this.gameState.selectedBlock].getComponent(g).showActionParticle()}}},r.onHarvesting=function(){var t=this.getSelectingPlant();if(void 0===t)throw Error("selecting plant === undefined");t.size===f.Mature&&(delete m.getGardenData().blocks[this.gameState.selectedBlock].plant,m.updateGardenData(),h.emit(p.TouchBlock),this.blockGroup.children[this.gameState.selectedBlock].getComponent(g).showActionParticle())},r.process=function(){for(var t,e=m.getGardenData(),n=Date.now(),a=i(e.blocks);!(t=a()).done;){var o=t.value;if(o.plant){var r=s[o.level];if(r){var c=(n-o.plant.plantTime)/1e3,u=l[o.plant.id],g=o.plant.skipTime?o.plant.skipTime:0,p=(u.grownTime-c-g)*(100-r.timeDecreasePercent)/100;if(p>0){var d=1-p/u.grownTime;o.plant.size=d<.5?f.Sprout:f.Sapling}else o.plant.size=f.Mature,o.plant.statuses.length>0&&(o.plant.statuses.length=0)}}}},r.dispose=function(){h.off(p.Plant,this.onPlantSeed,this),h.off(p.Water,this.onWatering,this),h.off(p.Fertilize,this.onFertilizing,this),h.off(p.Harvest,this.onHarvesting,this)},n}(S.System),T=n(B.prototype,"scene",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=n(B.prototype,"camera",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=n(B.prototype,"gameState",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B));r._RF.pop()}}}));

System.register("chunks:///_virtual/PlantRenderingSystem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.mjs_cjs=&original=.js","./BlockUpgradeConfig.ts","./ItemConfig.ts","./PlantComponent.ts","./GameStorage.ts","./index.js"],(function(t){"use strict";var e,n,a,i,l,r,s,o,p,u,c,h;return{setters:[function(t){e=t.inheritsLoose,n=t.createForOfIteratorHelperLoose,a=t.applyDecoratedDescriptor,i=t.initializerDefineProperty,l=t.assertThisInitialized},function(t){r=t.cclegacy,s=t.instantiate},null,function(t){o=t.blockPropertiesUpgrade},function(t){p=t.itemConfigs},function(t){u=t.PlantComponent},function(t){c=t.gameStorage},function(t){h=t.default}],execute:function(){var d,g,f,P,m,v,b;r._RF.push({},"7bfa2VhIgNBQLkmDS2HXlGA","PlantRenderingSystem",void 0);t("PlantRenderingSytem",(d=h.Inject("scene"),g=h.Inject("camera"),f=h.Inject("plantPrefab"),P=function(t){function a(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,i(e,"scene",m,l(e)),i(e,"camera",v,l(e)),i(e,"plantPrefab",b,l(e)),e.blockGroup=void 0,e.plantGroup=void 0,e.labelPlantGroup=void 0,e.plantNodeMapping=void 0,e.plantDataMapping=void 0,e.currentPlant=void 0,e}e(a,t);var r=a.prototype;return r.initialized=function(){this.plantNodeMapping=new Map,this.plantDataMapping=new Map,this.blockGroup=this.scene.getChildByName("BlockGroup"),this.plantGroup=this.scene.getChildByName("PlantGroup");var t=this.scene.getChildByName("UI_Canvas");this.labelPlantGroup=t.getChildByName("LabelPlantGroup")},r.newPlant=function(t,e){if(e>=this.blockGroup.children.length)throw Error("newPlant: block index is greater than blocks's size");var n=this.blockGroup.children[e],a=s(this.plantPrefab);a.setPosition(n.getWorldPosition()),this.plantGroup.addChild(a);var i=a.getComponent(u);return i.setPlant(t.id,t.size),i.setPlantStatuses(t.statuses),this.plantNodeMapping.set(e,a),this.plantDataMapping.set(e,JSON.parse(JSON.stringify(t))),a},r.deletePlantNode=function(t){this.plantNodeMapping.get(t).removeFromParent(),this.plantNodeMapping.delete(t),this.plantDataMapping.delete(t)},r.updatePlants=function(){var t=c.getGardenData();if(t)for(var e=t.blocks,a=0;a<e.length;a++){if(a>=this.blockGroup.children.length)throw Error("Block with idx = "+a+" not existed on map");var i=e[a];if(this.currentPlant=this.plantNodeMapping.get(a),i.plant)if(this.currentPlant){var l=this.plantDataMapping.get(a);if(l.size!==i.plant.size)this.currentPlant.getComponent(u).setPlant(i.plant.id,i.plant.size),l.size=i.plant.size;if(l.statuses.length!==i.plant.statuses.length){this.currentPlant.getComponent(u).setPlantStatuses(i.plant.statuses),l.statuses.length=0;for(var r,s=n(i.plant.statuses);!(r=s()).done;){var h=r.value;l.statuses.push(h)}}}else this.currentPlant=this.newPlant(i.plant,a);else this.currentPlant&&(this.deletePlantNode(a),this.currentPlant=void 0);if(this.currentPlant){var d=this.currentPlant.getComponent(u),g=p[i.plant.id],f=(Date.now()-i.plant.plantTime)/1e3,P=i.plant.skipTime?i.plant.skipTime:0,m=o[i.level];if(m){var v=(g.grownTime-f-P)*(100-m.timeDecreasePercent)/100;d.updatePlantData(v,i.plant.hp/g.hp),d.updateUIPosition(this.camera)}}}},r.process=function(){this.updatePlants()},r.dispose=function(){},a}(h.System),m=a(P.prototype,"scene",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=a(P.prototype,"camera",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=a(P.prototype,"plantPrefab",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P));r._RF.pop()}}}));

System.register("chunks:///_virtual/PopupBuyItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NameConfig.ts","./ShopItemConfig.ts","./Common.ts","./GameStorage.ts","./UserBalance.ts"],(function(t){"use strict";var e,i,n,o,a,r,s,u,c,p,y,h,l,m,d,g,C,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,s=t.SpriteAtlas,u=t.Vec3,c=t.Label,p=t.Sprite,y=t.Button,h=t.UITransform,l=t.Component},function(t){m=t.nameConfigs},function(t){d=t.shopItemConfigs},function(t){g=t.CurrencyType},function(t){C=t.gameStorage},function(t){f=t.userBalance}],execute:function(){var B,v,I,q,b;a._RF.push({},"52392Kv+75Ok4lgRKkKNTQr","PopupBuyItem",void 0);var N=r.ccclass,S=r.property;t("PopupBuyItem",(B=N("PopupBuyItem"),v=S(s),B((b=e((q=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,n(e,"uiAtlas",b,o(e)),e.quantity=void 0,e.itemId=void 0,e.price=void 0,e.currencyType=void 0,e.tempVec=new u,e}i(e,t);var a=e.prototype;return a.hide=function(){this.node.active=!1},a.show=function(t){this.node.active=!0,this.quantity=0,this.price=0,this.itemId=t,this.applyNewQuantity(),this.node.getChildByName("Title").getComponent(c).string="Buy "+m[t],this.node.getChildByName("ItemImage").getComponent(p).spriteFrame=this.uiAtlas.getSpriteFrame(t)},a.applyNewQuantity=function(){var t=this,e=this.node.getChildByName("ButtonAdd").getComponent(y),i=this.node.getChildByName("ButtonRemove").getComponent(y),n=this.node.getChildByName("ButtonBuy").getComponent(y),o=this.node.getChildByName("LabelQuantity").getComponent(c),a=this.node.getChildByName("LabelPrice").getComponent(c),r=this.node.getChildByName("IconCurrency").getComponent(p),s=d.find((function(e){return e.id===t.itemId}));this.price=s.price*this.quantity,this.currencyType=s.currencyType;var u=!0;switch(s.currencyType){case g.Cash:u=f.userWallet.cash>=this.price;break;case g.Gold:u=f.userWallet.gold>=this.price}a.string=this.price.toString(),a.color.set(255,u?255:0,u?255:0,255),a.updateRenderer();var l=a.getComponent(h);r.spriteFrame=this.uiAtlas.getSpriteFrame("ico_currency_"+s.currencyType),this.tempVec.set(a.node.position.x+l.width/2+35,r.node.position.y,r.node.position.z),r.node.setPosition(this.tempVec),o.string=this.quantity.toString(),e.interactable=!(99===this.quantity),i.interactable=!(0===this.quantity),n.interactable=this.quantity>0&&u,e.getComponent(p).grayscale=!e.interactable,i.getComponent(p).grayscale=!i.interactable,n.getComponent(p).grayscale=!(this.quantity>0&&u)},a.increaseQuantity=function(){99!==this.quantity&&(this.quantity+=1,this.applyNewQuantity())},a.decreaseQuantity=function(){0!==this.quantity&&(this.quantity-=1,this.applyNewQuantity())},a.buyItem=function(){var t=this,e=C.getStorageData(),i=e.items.find((function(e){return e.id===t.itemId}));i?i.quantity+=this.quantity:e.items.push({id:this.itemId,quantity:this.quantity}),C.updateStorageData(),f.useCurrency(this.currencyType,this.price),this.hide()},e}(l)).prototype,"uiAtlas",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=q))||I));a._RF.pop()}}}));

System.register("chunks:///_virtual/PopupBuyZoo.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEvent.ts","./EventTarget.ts"],(function(t){"use strict";var o,e,n,u,r,c;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,u=t.Component},function(t){r=t.GameEvent},function(t){c=t.default}],execute:function(){var i;e._RF.push({},"b9c5214VhNJQ5Ow6JKl8ENE","PopupBuyZoo",void 0);var s=n.ccclass;n.property,t("PopupBuyZoo",s("PopupBuyZoo")(i=function(t){function e(){return t.apply(this,arguments)||this}o(e,t);var n=e.prototype;return n.start=function(){},n.buyZoo=function(){c.emit(r.BuyZoo),this.node.active=!1},e}(u))||i);e._RF.pop()}}}));

System.register("chunks:///_virtual/PopupQuest.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NameConfig.ts","./QuestConfig.ts","./QuestManager.ts"],(function(e){"use strict";var t,n,i,r,a,o,s,u,l,c,p,g,m,d,y,f,h,C,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,s=e.SpriteAtlas,u=e.Font,l=e.Prefab,c=e.Vec3,p=e.Component,g=e.instantiate,m=e.Sprite,d=e.Label,y=e.Button,f=e.EventHandler},function(e){h=e.nameConfigs},function(e){C=e.dailyQuestConfigs},function(e){v=e.questManager}],execute:function(){var b,Q,B,_,P,q,w,F,I;a._RF.push({},"1baeadzTg9F1IHpiABy5qB2","PopupQuest",void 0);var N=o.ccclass,A=o.property;e("PopupQuest",(b=N("PopupQuest"),Q=A(s),B=A(u),_=A(l),b((w=t((q=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(t,"uiAtlas",w,r(t)),i(t,"font",F,r(t)),i(t,"questItem",I,r(t)),t.tempVec3=new c,t}n(t,e);var a=t.prototype;return a.hide=function(){this.node.active=!1},a.show=function(){this.initQuest(),this.node.active=!0},a.initQuest=function(){for(var e=this,t=this.node.getChildByName("Container"),n=v.dailyQuestsData,i=function(i){var r=n.data[i],a=C.find((function(e){return e.type===r.type}));if(!a)return"continue";e.tempVec3.set(0,-130*i,0);var o=g(e.questItem);o.setPosition(e.tempVec3),t.addChild(o),o.getChildByName("Icon").getComponent(m).spriteFrame=e.uiAtlas.getSpriteFrame("ico_quest_type_"+r.type),o.getChildByName("LabelDescription").getComponent(d).string=h["daily_quest_desc_"+r.type],o.getChildByName("LabelReward").getComponent(d).string=a.reward.toString(),o.getChildByName("IconCurrency").getComponent(m).spriteFrame=e.uiAtlas.getSpriteFrame("ico_currency_"+a.currencyType);var s=o.getChildByName("LabelProgress").getComponent(d);s.string=r.progress+"/"+a.quantity;var u=r.progress>=a.quantity&&!r.claim,l=o.getChildByName("ButtonClaim").getComponent(y);l.node.active=u,s.node.active=!u;var c=new f;c.target=e.node,c.handler="onClaimQuest",c.component="PopupQuest",c.customEventData=r.type.toString(),l.clickEvents.push(c)},r=0;r<n.data.length;r++)i(r)},a.onClaimQuest=function(e,t){v.claimQuest(parseInt(t)),this.initQuest()},t}(p)).prototype,"uiAtlas",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(q.prototype,"font",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=t(q.prototype,"questItem",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=q))||P));a._RF.pop()}}}));

System.register("chunks:///_virtual/PopupRanchActivity.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./GameEvent.ts","./EventTarget.ts","./GameStorage.ts","./StringUtils.ts"],(function(t){"use strict";var e,o,n,i,a,h,s,u,r,d,l,b;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,i=t.Button,a=t.Label,h=t.Sprite,s=t.Component},function(t){u=t.Constants},function(t){r=t.GameEvent},function(t){d=t.default},function(t){l=t.gameStorage},function(t){b=t.toHourMinSec}],execute:function(){var c;o._RF.push({},"fac1fMiiYxACaxGF9i1K3DY","PopupRanchActivity",void 0);var g=n.ccclass;n.property,t("PopupRanchActivity",g("PopupRanchActivity")(c=function(t){function o(){for(var e,o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))||this).buttonShowerImage=void 0,e.buttonPetImage=void 0,e.buttonFoodImage=void 0,e.buttonShower=void 0,e.buttonPet=void 0,e.buttonFood=void 0,e.labelShower=void 0,e.labelPet=void 0,e.labelFood=void 0,e.ranchIndex=void 0,e}e(o,t);var n=o.prototype;return n.hide=function(){this.node.active=!1,d.emit(r.ClearSelect)},n.show=function(t){this.ranchIndex=t,this.buttonShower||(this.buttonShower=this.node.getChildByName("ButtonShower").getComponent(i)),this.buttonFood||(this.buttonFood=this.node.getChildByName("ButtonFood").getComponent(i)),this.buttonPet||(this.buttonPet=this.node.getChildByName("ButtonPet").getComponent(i)),this.labelFood||(this.labelFood=this.buttonFood.getComponentInChildren(a)),this.labelPet||(this.labelPet=this.buttonPet.getComponentInChildren(a)),this.labelShower||(this.labelShower=this.buttonShower.getComponentInChildren(a)),this.buttonPetImage||(this.buttonPetImage=this.buttonPet.getComponent(h)),this.buttonShowerImage||(this.buttonShowerImage=this.buttonShower.getComponent(h)),this.buttonFoodImage||(this.buttonFoodImage=this.buttonFood.getComponent(h)),this.node.active=!0,this.update(0)},n.update=function(t){if(void 0!==this.ranchIndex){var e=l.getGardenData();if(!(this.ranchIndex>=e.ranches.length)){var o=e.ranches[this.ranchIndex],n=Date.now();if(o.bathingTime){var i=u.ANIMAL_BATHING_COOLDOWN-(n-o.bathingTime)/1e3;i<0&&(i=0),this.updateButtonStatus(this.buttonShower,this.buttonShowerImage,this.labelShower,i)}else this.updateButtonStatus(this.buttonShower,this.buttonShowerImage,this.labelShower,0);if(o.feedingTime){var a=u.ANIMAL_FEEDING_COOLDOWN-(n-o.feedingTime)/1e3;a<0&&(a=0),this.updateButtonStatus(this.buttonFood,this.buttonFoodImage,this.labelFood,a)}else this.updateButtonStatus(this.buttonFood,this.buttonFoodImage,this.labelFood,0);if(o.pettingTime){var h=u.ANIMAL_PETTING_COOLDOWN-(n-o.pettingTime)/1e3;h<0&&(h=0),this.updateButtonStatus(this.buttonPet,this.buttonPetImage,this.labelPet,h)}else this.updateButtonStatus(this.buttonPet,this.buttonPetImage,this.labelPet,0)}}},n.updateButtonStatus=function(t,e,o,n){t.interactable=0===n,e.grayscale=n>0,o.node.active=n>0,o.string=b(n)},n.petting=function(){d.emit(r.Petting)},n.feeding=function(){d.emit(r.Feeding)},n.bathing=function(){d.emit(r.Bathing)},o}(s))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/PopupSelectSeed.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemConfig.ts","./GameEvent.ts","./EventTarget.ts","./GameStorage.ts","./PopupShop.ts","./PopupUpgradeBlock.ts"],(function(t){"use strict";var e,o,n,i,a,r,l,p,s,d,u,c,h,g,m,f,S,v,C,y,b,P,N,B;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized,a=t.createForOfIteratorHelperLoose},function(t){r=t.cclegacy,l=t._decorator,p=t.SpriteAtlas,s=t.Font,d=t.Node,u=t.Sprite,c=t.Button,h=t.EventHandler,g=t.UITransform,m=t.Label,f=t.director,S=t.Component},function(t){v=t.itemConfigs,C=t.ItemType},function(t){y=t.GameEvent},function(t){b=t.default},function(t){P=t.gameStorage},function(t){N=t.PopupShop},function(t){B=t.PopupUpgradeBlock}],execute:function(){var k,I,w,z,A,E,L;r._RF.push({},"88b43Dzh+dBnLrzmp5945Wu","PopupSelectSeed",void 0);var U=l.ccclass,x=l.property;t("PopupSelectSeed",(k=U("PopupSelectSeed"),I=x(p),w=x(s),k((E=e((A=function(t){function e(){for(var e,o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,n(e,"uiAtlas",E,i(e)),n(e,"font",L,i(e)),e.buttonPlantsNode=void 0,e.buttonShopNode=void 0,e.blockIndex=void 0,e}o(e,t);var r=e.prototype;return r.onLoad=function(){this.buttonPlantsNode=this.node.getChildByName("ButtonPlants"),this.buttonShopNode=this.node.getChildByName("ButtonShop")},r.show=function(t){this.blockIndex=t,this.buttonPlantsNode.removeAllChildren();for(var e,o=P.getStorageData(),n=[],i=a(o.items);!(e=i()).done;){var r=e.value,l=v[r.id];l&&l.itemType===C.Seed&&n.push(r)}for(var p=170*n.length/2-85,s=0;s<n.length;s++){var f=new d;f.position.set(0-p+170*s,0,0),f.scale.set(1,1,1),f.layer=this.buttonPlantsNode.layer,this.buttonPlantsNode.addChild(f),f.addComponent(u).spriteFrame=this.uiAtlas.getSpriteFrame(n[s].id);var S=f.addComponent(c);S.interactable=!0,S.transition=c.Transition.SCALE,S.zoomScale=1.1,S.duration=.1;var y=new h;y.target=this.node,y.handler="plant",y.component="PopupSelectSeed",y.customEventData=n[s].id,S.clickEvents.push(y);var b=f.getComponent(g),N=new d;N.layer=f.layer,N.position.set(.3*b.width,.3*-b.height),f.addChild(N);var B=N.addComponent(m);B.font=this.font,B.fontSize=40,B.string="x"+n[s].quantity}this.buttonShopNode.active=0===n.length},r.plant=function(t,e){b.emit(y.Plant,e)},r.hide=function(){this.node.active=!1,b.emit(y.ClearSelect)},r.onClickUpgrade=function(){void 0!==this.blockIndex&&f.getScene().getChildByName("UI_Canvas").getChildByName("PopupUpgradeBlock").getComponent(B).show(this.blockIndex)},r.onClickShop=function(){b.emit(y.ClearSelect),f.getScene().getChildByName("UI_Canvas").getChildByName("PopupShop").getComponent(N).show()},e}(S)).prototype,"uiAtlas",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=e(A.prototype,"font",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=A))||z));r._RF.pop()}}}));

System.register("chunks:///_virtual/PopupShop.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ShopItemConfig.ts","./Storage.ts","./PopupBuyItem.ts"],(function(t){"use strict";var e,n,i,o,r,a,s,p,l,c,u,h,d,m,g,b,f,v,y,C;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.createForOfIteratorHelperLoose},function(t){a=t.cclegacy,s=t._decorator,p=t.SpriteAtlas,l=t.Node,c=t.Font,u=t.Sprite,h=t.UITransform,d=t.Button,m=t.EventHandler,g=t.Label,b=t.director,f=t.Component},function(t){v=t.shopItemConfigs},function(t){y=t.StorageTab},function(t){C=t.PopupBuyItem}],execute:function(){var S,T,I,F,w,P,A,_,x;a._RF.push({},"16f09yXeOdJM4fH9sPZLJVk","PopupShop",void 0);var B=s.ccclass,z=s.property;t("PopupShop",(S=B("PopupShop"),T=z(p),I=z([l]),F=z(c),S((A=e((P=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"uiAtlas",A,o(e)),i(e,"buttonTabs",_,o(e)),i(e,"font",x,o(e)),e.container=void 0,e.currentTabIndex=y.None,e}n(e,t);var a=e.prototype;return a.hide=function(){this.node.active=!1},a.show=function(){this.activeTab(0),this.node.active=!0},a.onChangeTab=function(t,e){var n=parseInt(e);n!==this.currentTabIndex&&this.activeTab(n)},a.activeTab=function(t){if(this.container||(this.container=this.node.getChildByName("Container")),!(t<0||t>=this.buttonTabs.length)){if(this.currentTabIndex>y.None){var e=this.buttonTabs[this.currentTabIndex];if(e)e.getComponent(u).spriteFrame=this.uiAtlas.getSpriteFrame("tab_normal")}var n=this.buttonTabs[t];n.setSiblingIndex(this.buttonTabs.length-1),n.getComponent(u).spriteFrame=this.uiAtlas.getSpriteFrame("tab_selected"),this.currentTabIndex=t,this.intContent()}},a.intContent=function(){this.container.removeAllChildren();for(var t,e=0,n=0,i=r(v);!(t=i()).done;){var o=t.value;if(o.storageTab==this.currentTabIndex){var a=new l;a.layer=this.container.layer,this.container.addChild(a),a.addComponent(u).spriteFrame=this.uiAtlas.getSpriteFrame("shop_item_bg");var s=a.getComponent(h);a.setPosition(220*e+s.width/2,220*-n-s.height/2,0);var p=a.addComponent(d);p.transition=d.Transition.SCALE,p.zoomScale=1.1,p.duration=.1;var c=new m;c.target=this.node,c.handler="onClickItem",c.component="PopupShop",c.customEventData=o.id,p.clickEvents.push(c);var b=new l;b.layer=a.layer,a.addChild(b),b.addComponent(u).spriteFrame=this.uiAtlas.getSpriteFrame(o.id);var f=b.getComponent(h),y=.5*s.height/f.height;b.scale.set(y,y,1),b.position.set(0,.15*s.height);var C=new l;C.layer=a.layer,C.position.set(-20,b.position.y-.4*s.height),a.addChild(C);var S=C.addComponent(g);S.font=this.font,S.fontSize=40,S.string=o.price.toString();var T=C.getComponent(h),I=new l;I.layer=a.layer,I.scale.set(.6,.6,.6),I.position.set(C.position.x+T.width/2+25,C.position.y-2),a.addChild(I),I.addComponent(u).spriteFrame=this.uiAtlas.getSpriteFrame("ico_currency_"+o.currencyType),7===++e&&n++}}},a.onClickItem=function(t,e){b.getScene().getChildByName("UI_Canvas").getChildByName("PopupBuyItem").getComponent(C).show(e)},e}(f)).prototype,"uiAtlas",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=e(P.prototype,"buttonTabs",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=e(P.prototype,"font",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=P))||w));a._RF.pop()}}}));

System.register("chunks:///_virtual/PopupStorage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemConfig.ts","./Storage.ts","./GameStorage.ts"],(function(t){"use strict";var e,i,n,r,a,o,s,l,u,c,h,p,d,g,b,f,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,a=t.createForOfIteratorHelperLoose},function(t){o=t.cclegacy,s=t._decorator,l=t.SpriteAtlas,u=t.Node,c=t.Font,h=t.Sprite,p=t.UITransform,d=t.Label,g=t.Component},function(t){b=t.itemConfigs},function(t){f=t.StorageTab},function(t){m=t.gameStorage}],execute:function(){var v,y,T,C,S,F,I,w,A;o._RF.push({},"dbb14WtoL9BmLPG77ufF+Zl","PopupStorage",void 0);var x=s.ccclass,P=s.property;t("PopupStorage",(v=x("PopupStorage"),y=P(l),T=P([u]),C=P(c),v((I=e((F=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,n(e,"uiAtlas",I,r(e)),n(e,"buttonTabs",w,r(e)),n(e,"font",A,r(e)),e.container=void 0,e.currentTabIndex=f.None,e}i(e,t);var o=e.prototype;return o.hide=function(){this.node.active=!1},o.show=function(){this.activeTab(0),this.node.active=!0},o.onChangeTab=function(t,e){var i=parseInt(e);i!==this.currentTabIndex&&this.activeTab(i)},o.activeTab=function(t){if(this.container||(this.container=this.node.getChildByName("Container")),!(t<0||t>=this.buttonTabs.length)){if(this.currentTabIndex>f.None){var e=this.buttonTabs[this.currentTabIndex];if(e)e.getComponent(h).spriteFrame=this.uiAtlas.getSpriteFrame("tab_normal")}var i=this.buttonTabs[t];i.setSiblingIndex(this.buttonTabs.length-1),i.getComponent(h).spriteFrame=this.uiAtlas.getSpriteFrame("tab_selected"),this.currentTabIndex=t,this.intContent()}},o.intContent=function(){this.container.removeAllChildren();for(var t,e=m.getStorageData(),i=0,n=0,r=a(e.items);!(t=r()).done;){var o=t.value,s=b[o.id];if(console.log(s),s.itemType==this.currentTabIndex){var l=new u;l.layer=this.container.layer,this.container.addChild(l),l.addComponent(h).spriteFrame=this.uiAtlas.getSpriteFrame("storage_item_bg");var c=l.getComponent(p);c.setAnchorPoint(0,1),l.setPosition(170*i,170*-n,0);var g=new u;g.layer=l.layer,l.addChild(g),g.addComponent(h).spriteFrame=this.uiAtlas.getSpriteFrame(s.id);var f=g.getComponent(p),v=.6*c.height/f.height;g.scale.set(v,v,1),g.position.set(c.width/2,.4*-c.height);var y=new u;y.layer=l.layer,y.position.set(c.width/2,.7*-c.height),l.addChild(y);var T=y.addComponent(d);T.font=this.font,T.fontSize=40,T.string="x"+o.quantity,7===++i&&n++}}},e}(g)).prototype,"uiAtlas",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=e(F.prototype,"buttonTabs",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=e(F.prototype,"font",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=F))||S));o._RF.pop()}}}));

System.register("chunks:///_virtual/PopupTool.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemConfig.ts","./GameEvent.ts","./Plant.ts","./EventTarget.ts","./GameStorage.ts","./UserBalance.ts","./PopupUpgradeBlock.ts"],(function(t){"use strict";var e,i,o,n,r,a,s,u,l,c,p,d,h,g,m,v,f,b,y,C,B;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized,r=t.createForOfIteratorHelperLoose},function(t){a=t.cclegacy,s=t._decorator,u=t.SpriteAtlas,l=t.Button,c=t.Sprite,p=t.Label,d=t.director,h=t.Component},function(t){g=t.itemConfigs},function(t){m=t.GameEvent},function(t){v=t.PlantStatusType,f=t.PlantSize},function(t){b=t.default},function(t){y=t.gameStorage},function(t){C=t.userBalance},function(t){B=t.PopupUpgradeBlock}],execute:function(){var z,A,P,F,W;a._RF.push({},"9ddefGqg0dAVpQkQmCMz4vd","PopupTool",void 0);var k=s.ccclass,S=s.property;t("PopupTool",(z=k("PopupTool"),A=S(u),z((W=e((F=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,o(e,"uiAtlas",W,n(e)),e.buttonWater=void 0,e.buttonFertilize=void 0,e.buttonHarvest=void 0,e.buttonPesticides=void 0,e.buttonUpgrade=void 0,e.tempArray=[],e.blockIndex=void 0,e}i(e,t);var a=e.prototype;return a.onLoad=function(){this.buttonWater=this.node.getChildByName("ButtonWater").getComponent(l),this.buttonFertilize=this.node.getChildByName("ButtonFertilize").getComponent(l),this.buttonHarvest=this.node.getChildByName("ButtonHarvest").getComponent(l),this.buttonPesticides=this.node.getChildByName("ButtonPesticides").getComponent(l),this.buttonUpgrade=this.node.getChildByName("ButtonUpgrade").getComponent(l)},a.unActiveAllButton=function(){this.buttonWater.node.active=!1,this.buttonFertilize.node.active=!1,this.buttonHarvest.node.active=!1,this.buttonPesticides.node.active=!1},a.showTool=function(t,e){if(this.blockIndex=t,g[e.id]){var i=g[e.id],o=y.getStorageData().items.find((function(t){return t.id===i.fertilizer}));this.buttonFertilize.interactable=void 0!==o;var n=this.buttonFertilize.node.getComponent(c);n.spriteFrame=this.uiAtlas.getSpriteFrame(i.fertilizer),n.grayscale=void 0===o||0===o.quantity,this.buttonFertilize.node.getComponentInChildren(p).string=void 0===o?"x0":"x"+o.quantity,this.buttonWater.interactable=C.userWallet.water>0,this.buttonWater.node.getComponent(c).grayscale=0===C.userWallet.water,this.buttonWater.node.getComponentInChildren(p).string="x"+C.userWallet.water,this.unActiveAllButton(),this.tempArray.length=0;for(var a,s=r(e.statuses);!(a=s()).done;){switch(a.value.type){case v.Dry:this.tempArray.push(this.buttonWater.node);break;case v.Worm:this.tempArray.push(this.buttonPesticides.node)}}e.size===f.Mature?this.tempArray.push(this.buttonHarvest.node):this.tempArray.push(this.buttonFertilize.node);for(var u=170*this.tempArray.length/2-85,l=0;l<this.tempArray.length;l++){var d=this.tempArray[l];d.active=!0,d.position.set(0-u+170*l,d.position.y,d.position.z)}}},a.hide=function(){this.node.active=!1,b.emit(m.ClearSelect)},a.water=function(){b.emit(m.Water)},a.fertilize=function(){b.emit(m.Fertilize)},a.harvest=function(){b.emit(m.Harvest)},a.onClickUpgrade=function(){void 0!==this.blockIndex&&d.getScene().getChildByName("UI_Canvas").getChildByName("PopupUpgradeBlock").getComponent(B).show(this.blockIndex)},e}(h)).prototype,"uiAtlas",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=F))||P));a._RF.pop()}}}));

System.register("chunks:///_virtual/PopupUnlockBlock.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./GameEvent.ts","./EventTarget.ts","./UserBalance.ts"],(function(t){"use strict";var e,o,n,c,l,r,s,a,i,u,C,p;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,c=t.Label,l=t.Button,r=t.Sprite,s=t.Color,a=t.Component},function(t){i=t.Constants},function(t){u=t.GameEvent},function(t){C=t.default},function(t){p=t.userBalance}],execute:function(){var h;o._RF.push({},"3235dIxgRxG+6qViEfVOLYg","PopupUnlockBlock",void 0);var f=n.ccclass;n.property,t("PopupUnlockBlock",f("PopupUnlockBlock")(h=function(t){function o(){for(var e,o=arguments.length,n=new Array(o),c=0;c<o;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))||this).textColorNomal=new s(255,255,255,255),e.textColorRed=new s(255,0,0,255),e}e(o,t);var n=o.prototype;return n.hide=function(){this.node.active=!1},n.show=function(){var t=this.node.getChildByName("LabelPrice").getComponent(c),e=this.node.getChildByName("ButtonUnlock").getComponent(l);e.interactable=p.userWallet.cash>=i.BLOCK_UNLOCK_PRICE,t.color.set(p.userWallet.cash>=i.BLOCK_UNLOCK_PRICE?this.textColorNomal:this.textColorRed),t.string=i.BLOCK_UNLOCK_PRICE.toString(),e.getComponent(r).grayscale=p.userWallet.cash<i.BLOCK_UNLOCK_PRICE,this.node.active=!0},n.onUnlock=function(){C.emit(u.UnlockBlock),this.hide()},o}(a))||h);o._RF.pop()}}}));

System.register("chunks:///_virtual/PopupUnlockRanch.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemConfig.ts","./NameConfig.ts","./Constants.ts","./Common.ts","./GameEvent.ts","./EventTarget.ts","./UserBalance.ts"],(function(e){"use strict";var t,n,o,i,r,c,a,s,l,u,p,f,h,m,d,g,y,C,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,c=e._decorator,a=e.SpriteAtlas,s=e.Label,l=e.Sprite,u=e.RichText,p=e.Button,f=e.Component},function(e){h=e.itemConfigs},function(e){m=e.nameConfigs},function(e){d=e.Constants},function(e){g=e.CurrencyType},function(e){y=e.GameEvent},function(e){C=e.default},function(e){v=e.userBalance}],execute:function(){var _,R,A,B,b;r._RF.push({},"e23dbIcS0ZDUZvGDV5r1AiR","PopupUnlockRanch",void 0);var I=c.ccclass,N=c.property;e("PopupUnlockRanch",(_=I("PopupUnlockRanch"),R=N(a),_((b=t((B=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return t=e.call.apply(e,[this].concat(r))||this,o(t,"uiAtlas",b,i(t)),t.zooIndex=void 0,t}n(t,e);var r=t.prototype;return r.hide=function(){this.node.active=!1,C.emit(y.ClearSelect)},r.show=function(e){this.zooIndex=e,this.node.active=!0;var t="animal_"+e;this.node.getChildByName("LabelName").getComponent(s).string=m[t],this.node.getChildByName("IconAnimal").getComponent(l).spriteFrame=this.uiAtlas.getSpriteFrame("ico_"+t);var n=h[t];if(n){this.node.getChildByName("RichText").getComponent(u).string=n.dropAmount+"<img src='ico_currency_"+n.currencyType+"' offset=-15 />/"+d.ANIMAL_DROP_CURRENCY_COOLDOWN/3600+"h";var o=this.node.getChildByName("ButtonUnlock").getComponent(p),i=!1;switch(n.currencyType){case g.Gold:i=v.userWallet.gold>=n.price;break;case g.Cash:i=v.userWallet.cash>=n.price}o.node.getComponentInChildren(u).string="<color="+(i?"#ffffff":"#ff0000")+">"+n.price+"</color><img src='ico_currency_"+n.currencyType+"' offset=-15 />",o.interactable=i,o.getComponent(l).grayscale=!i}},r.unlockRanch=function(){var e="animal_"+this.zooIndex,t=h[e];if(t){var n;n=v.useCurrency(t.currencyType,t.price),this.node.active=!1,n<0||C.emit(y.BuyZoo)}},t}(f)).prototype,"uiAtlas",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=B))||A));r._RF.pop()}}}));

System.register("chunks:///_virtual/PopupUpgradeBlock.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BlockUpgradeConfig.ts","./NameConfig.ts","./Constants.ts","./GameStorage.ts","./UserBalance.ts"],(function(e){"use strict";var t,o,i,n,r,s,a,c,l,p,h,d,u,m,v,g,b;return{setters:[function(e){t=e.inheritsLoose,o=e.createForOfIteratorHelperLoose},function(e){i=e.cclegacy,n=e._decorator,r=e.Label,s=e.Sprite,a=e.Button,c=e.Node,l=e.UITransform,p=e.Vec3,h=e.Vec2,d=e.Component},function(e){u=e.blockPropertiesUpgrade},function(e){m=e.nameConfigs},function(e){v=e.Constants},function(e){g=e.gameStorage},function(e){b=e.userBalance}],execute:function(){var L;i._RF.push({},"9b1c1zbOpxDVKxzk5lxxiVx","PopupUpgradeBlock",void 0);var C=n.ccclass;n.property,e("PopupUpgradeBlock",C("PopupUpgradeBlock")(L=function(e){function i(){for(var t,o=arguments.length,i=new Array(o),n=0;n<o;n++)i[n]=arguments[n];return(t=e.call.apply(e,[this].concat(i))||this).propertyLabel=void 0,t.currentLevelLabel=void 0,t.nextLevelLabel=void 0,t.iconArrow=void 0,t.priceLabel=void 0,t.iconCurrency=void 0,t.buttonUpgrade=void 0,t.tempNode=[],t.tempVec3=new p,t.tempVec2=new h,t.blockIndex=void 0,t}t(i,e);var n=i.prototype;return n.onLoad=function(){this.propertyLabel=this.node.getChildByName("PropertyLabel").getComponent(r),this.currentLevelLabel=this.node.getChildByName("CurrentLevelLabel").getComponent(r),this.nextLevelLabel=this.node.getChildByName("NextLevelLabel").getComponent(r),this.iconArrow=this.node.getChildByName("IconArrow").getComponent(s),this.buttonUpgrade=this.node.getChildByName("ButtonUpgrade").getComponent(a),this.priceLabel=this.buttonUpgrade.node.getChildByName("LabelPrice").getComponent(r),this.iconCurrency=this.buttonUpgrade.node.getChildByName("IconCurrency").getComponent(s)},n.hide=function(){this.node.active=!1},n.show=function(e){this.blockIndex=e,this.node.active=!0;for(var t,i=o(this.tempNode);!(t=i()).done;){t.value.removeFromParent()}this.tempNode.length=0;var n=g.getGardenData();if(!(e>=n.blocks.length)){var r=n.blocks[e],a=u[r.level],p=u[r.level+1],h=void 0===p,d=Object.keys(a);this.currentLevelLabel.string="lvl"+(r.level+1)+(h?" (MAXED)":""),this.nextLevelLabel.string="lvl"+(r.level+2);for(var L=0;L<d.length;L++){var C=d[L];if(this.tempVec3.set(this.propertyLabel.node.position),this.tempVec3.y+=-70*(L+1),this.tempVec2.set(1,.5),this.createLabel(this.tempVec3,m[C],this.tempVec2),this.tempVec3.x=this.currentLevelLabel.node.position.x,this.tempVec2.set(0,.5),this.createLabel(this.tempVec3,""+m[C+"Symbol"]+a[C]+"%"+(h?" (MAXED)":""),this.tempVec2),void 0!==p){var y=new c;y.layer=this.iconArrow.node.layer,this.tempVec3.set(this.iconArrow.node.position),this.tempVec3.y+=-70*(L+1),y.setPosition(this.tempVec3),y.addComponent(s).spriteFrame=this.iconArrow.spriteFrame,this.node.addChild(y),this.tempNode.push(y),this.tempVec3.x=this.nextLevelLabel.node.position.x,this.createLabel(this.tempVec3,""+m[C+"Symbol"]+p[C]+"%",this.tempVec2)}}var f=b.userWallet.cash>=v.BLOCK_UPGRADE_PRICE;this.buttonUpgrade.node.active=void 0!==p,this.iconArrow.node.active=void 0!==p,this.nextLevelLabel.node.active=void 0!==p,this.priceLabel.string=v.BLOCK_UPGRADE_PRICE.toString(),this.priceLabel.color.set(255,f?255:0,f?255:0,255),this.priceLabel.updateRenderer();var V=this.priceLabel.getComponent(l);this.tempVec3.set(this.priceLabel.node.position.x+V.width/2+35,this.iconCurrency.node.position.y,this.iconCurrency.node.position.z),this.iconCurrency.node.setPosition(this.tempVec3),this.buttonUpgrade.interactable=f,this.buttonUpgrade.getComponent(s).grayscale=!f}},n.createLabel=function(e,t,o){var i=new c;i.layer=this.propertyLabel.node.layer,i.setPosition(e);var n=i.addComponent(r);return n.font=this.propertyLabel.font,n.fontSize=this.propertyLabel.fontSize,n.string=t,i.getComponent(l).setAnchorPoint(o),this.node.addChild(i),this.tempNode.push(i),i},n.upgradeBlock=function(){b.useCash(v.BLOCK_UPGRADE_PRICE);var e=g.getGardenData().blocks[this.blockIndex];e&&(e.level+=1,g.updateGardenData(),this.hide())},i}(d))||L);i._RF.pop()}}}));

System.register("chunks:///_virtual/QuestConfig.ts",["cc","./Common.ts"],(function(e){"use strict";var t,n;return{setters:[function(e){t=e.cclegacy},function(e){n=e.CurrencyType}],execute:function(){var r;e("QuestType",void 0),t._RF.push({},"02ab9FUmxdHNIjW5UYWtJ13","QuestConfig",void 0),function(e){e[e.PlantTree=0]="PlantTree",e[e.Wattering=1]="Wattering",e[e.PetAnimal=2]="PetAnimal"}(r||(r=e("QuestType",{})));e("dailyQuestConfigs",[{type:r.PlantTree,quantity:1,reward:500,currencyType:n.Gold},{type:r.Wattering,quantity:1,reward:500,currencyType:n.Gold},{type:r.PetAnimal,quantity:1,reward:30,currencyType:n.Cash}]);t._RF.pop()}}}));

System.register("chunks:///_virtual/QuestManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./QuestConfig.ts","./GameStorage.ts","./UserBalance.ts"],(function(t){"use strict";var e,a,s,i,n,r;return{setters:[function(t){e=t.createForOfIteratorHelperLoose},function(t){a=t.cclegacy},function(t){s=t.dailyQuestConfigs},function(t){i=t.gameStorage,n=t.GameStorageKey},function(t){r=t.userBalance}],execute:function(){a._RF.push({},"2901bnk7ShAiojj3S+afFS/","QuestManager",void 0);var u=t("QuestManager",function(){function t(){this.dailyQuestsData=void 0}var a=t.prototype;return a.initData=function(){var t=i.getItem(n.DAILY_QUEST);t?(this.dailyQuestsData=JSON.parse(t),Date.now()>this.dailyQuestsData.resetTime&&this.resetDailyQuest()):(this.dailyQuestsData={data:new Array,resetTime:0},this.resetDailyQuest())},a.genNewResetTime=function(){return(new Date).setUTCHours(23,59,59,999)},a.resetDailyQuest=function(){this.dailyQuestsData.data.length=0;for(var t,a=e(s);!(t=a()).done;){var i=t.value;this.dailyQuestsData.data.push({type:i.type,progress:0,claim:!1})}this.dailyQuestsData.resetTime=this.genNewResetTime(),this.saveQuestData()},a.saveQuestData=function(){i.setItem(n.DAILY_QUEST,JSON.stringify(this.dailyQuestsData))},a.updateQuestProgress=function(t,e){void 0===e&&(e=1);var a=this.dailyQuestsData.data.find((function(e){return e.type===t}));a&&(a.progress+=e,this.saveQuestData())},a.claimQuest=function(t){var e=this.dailyQuestsData.data.find((function(e){return e.type===t})),a=s.find((function(e){return e.type===t}));e&&a&&(e.progress<a.quantity||(e.claim=!0,this.saveQuestData(),r.addCurrency(a.currencyType,a.reward)))},t}());t("questManager",new u);a._RF.pop()}}}));

System.register("chunks:///_virtual/Ranch.ts",["cc"],(function(){"use strict";var c;return{setters:[function(t){c=t.cclegacy}],execute:function(){c._RF.push({},"6e12dmBY6NJiJpk20dmn8Uf","Ranch",void 0),c._RF.pop()}}}));

System.register("chunks:///_virtual/RanchComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./GameStorage.ts"],(function(e){"use strict";var t,i,o,n,a,r,s,c,h,d,l,u,m,p,f,v,I,g,N,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized,a=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy,s=e._decorator,c=e.CCInteger,h=e.Prefab,d=e.SpriteAtlas,l=e.Vec3,u=e.director,m=e.CameraComponent,p=e.Sprite,f=e.instantiate,v=e.SkeletalAnimation,I=e.tween,g=e.Component},function(e){N=e.Constants},function(e){y=e.gameStorage}],execute:function(){var A,C,_,P,b,S,D,w,F,R,T;r._RF.push({},"7844eqBZCNIzIv1ZtYRaDYe","RanchComponent",void 0);var G=s.ccclass,O=s.property;e("RanchComponent",(A=G("RanchComponent"),C=O(c),_=O([h]),P=O(d),b=O(h),A((w=t((D=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,o(t,"index",w,n(t)),o(t,"renderAnimalPrefabs",F,n(t)),o(t,"uiAtlas",R,n(t)),o(t,"currencyEffectPrefab",T,n(t)),t.animalNode=void 0,t.camera=void 0,t.renderRoot2D=void 0,t.statusNode=void 0,t.iconAnimal=void 0,t.animalIcon=void 0,t.showerIcon=void 0,t.foodIcon=void 0,t.petIcon=void 0,t.dropCurrencyGroup=void 0,t.effectGroup=void 0,t.effectEndPos={gold:new l(440,950,1),cash:new l(20,950,1)},t.pos=new l,t.currentTime=void 0,t}i(t,e);var r=t.prototype;return r.onLoad=function(){var e=u.getScene();this.camera=e.getComponentInChildren(m),this.dropCurrencyGroup=this.node.getChildByName("DropCurrencyGroup"),this.renderRoot2D=this.node.getChildByName("RenderRoot2D"),this.effectGroup=this.renderRoot2D.getChildByName("EffectGroup"),this.statusNode=this.renderRoot2D.getChildByName("StatusNode");var t=this.statusNode.getChildByName("ico_event");this.animalIcon=this.uiAtlas.getSpriteFrame("ico_animal_"+this.index),this.showerIcon=this.uiAtlas.getSpriteFrame("ranch_activity_shower"),this.petIcon=this.uiAtlas.getSpriteFrame("ranch_activity_pet"),this.foodIcon=this.uiAtlas.getSpriteFrame("ranch_activity_food"),this.iconAnimal=t.getComponentInChildren(p),this.iconAnimal.spriteFrame=this.animalIcon},r.initAnimal=function(){if(!this.animalNode){var e=this.renderAnimalPrefabs[this.index];if(e){this.animalNode=f(e),this.node.addChild(this.animalNode);var t=this.animalNode.getComponent(v);t.play("Armature|Idle"),t.getState("Armature|Idle").speed=3}}},r.deleteAnimal=function(){this.animalNode&&(this.animalNode.removeFromParent(),this.animalNode=void 0)},r.updateUIPosition=function(){this.camera.orthoHeight>N.SHOW_DETAIL_ORTHO_HEIGHT&&this.camera.orthoHeight<N.SHOW_MAP_ORTHO_HEIGHT?this.statusNode.active=!1:(this.camera.camera.update(),this.camera.convertToUINode(this.renderRoot2D.worldPosition,this.statusNode.parent,this.pos),this.statusNode.active=!0,this.statusNode.setPosition(this.pos.add3f(0,40,0)))},r.hasStatus=function(e,t){return!t||e-(this.currentTime-t)/1e3<=0},r.showEffectCurrency=function(e){this.camera.camera.update(),this.camera.convertToUINode(this.renderRoot2D.worldPosition,this.statusNode.parent,this.pos);for(var t,i=f(this.currencyEffectPrefab),o=i.getComponentsInChildren(p),n=this.uiAtlas.getSpriteFrame("ico_currency_"+e),r=a(o);!(t=r()).done;){var s=t.value;s.node.layer=this.effectGroup.layer,s.spriteFrame=n}i.layer=this.effectGroup.layer,i.setPosition(this.pos),this.effectGroup.addChild(i),I(i).delay(1).to(1,{position:(new l).set(this.effectEndPos[e])}).call((function(){i.removeFromParent()})).union().start()},r.update=function(){var e=y.getGardenData();if(e.ranches.length<this.index)this.node.active=!1;else{this.node.active=!0,this.currentTime=Date.now();var t=e.ranches[this.index];t.unlocked?this.hasStatus(N.ANIMAL_BATHING_COOLDOWN,t.bathingTime)?(this.iconAnimal.spriteFrame=this.showerIcon,this.updateUIPosition()):this.hasStatus(N.ANIMAL_FEEDING_COOLDOWN,t.feedingTime)?(this.iconAnimal.spriteFrame=this.foodIcon,this.updateUIPosition()):this.hasStatus(N.ANIMAL_PETTING_COOLDOWN,t.pettingTime)?(this.iconAnimal.spriteFrame=this.petIcon,this.updateUIPosition()):this.statusNode.active=!1:(this.iconAnimal.spriteFrame=this.animalIcon,this.updateUIPosition())}},t}(g)).prototype,"index",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(D.prototype,"renderAnimalPrefabs",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(D.prototype,"uiAtlas",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=t(D.prototype,"currencyEffectPrefab",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=D))||S));r._RF.pop()}}}));

System.register("chunks:///_virtual/ShopItemConfig.ts",["cc","./Common.ts","./Storage.ts"],(function(e){"use strict";var r,t,c;return{setters:[function(e){r=e.cclegacy},function(e){t=e.CurrencyType},function(e){c=e.StorageTab}],execute:function(){r._RF.push({},"e12f3EhjB5AFLkU5NnG76eY","ShopItemConfig",void 0);e("shopItemConfigs",[{id:"plant_00",price:1500,currencyType:t.Gold,storageTab:c.Seed},{id:"plant_01",price:1500,currencyType:t.Gold,storageTab:c.Seed},{id:"plant_02",price:500,currencyType:t.Cash,storageTab:c.Seed},{id:"plant_03",price:1500,currencyType:t.Cash,storageTab:c.Seed},{id:"plant_04",price:3e3,currencyType:t.Cash,storageTab:c.Seed},{id:"fertilizer_00",price:3e3,currencyType:t.Gold,storageTab:c.Fertilizer},{id:"fertilizer_01",price:3e3,currencyType:t.Cash,storageTab:c.Fertilizer}]);r._RF.pop()}}}));

System.register("chunks:///_virtual/Storage.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){var r;e("StorageTab",void 0),t._RF.push({},"3409a+Jp6pPNbLY7JtRy2gF","Storage",void 0),function(e){e[e.None=-1]="None",e[e.Seed=0]="Seed",e[e.Fertilizer=1]="Fertilizer"}(r||(r=e("StorageTab",{}))),t._RF.pop()}}}));

System.register("chunks:///_virtual/StringUtils.ts",["cc"],(function(t){"use strict";var r;return{setters:[function(t){r=t.cclegacy}],execute:function(){r._RF.push({},"c49faWyWCNIFoa4u0bAQSxE","StringUtils",void 0);t("formatTime",(function(t){var r=Math.floor(t/3600);if(r>0)return r+" hrs";var o=Math.floor((t-3600*r)/60);return o>0?o+" mins":Math.floor(t-3600*r-60*o)+" secs"})),t("toHourMinSec",(function(t){var r=Math.floor(t/3600),o=Math.floor((t-3600*r)/60),n=Math.floor(t-3600*r-60*o),e="";return r<10&&(e+="0"),e+=r,e+=":",o<10&&(e+="0"),e+=o,e+=":",n<10&&(e+="0"),e+=n}));r._RF.pop()}}}));

System.register("chunks:///_virtual/UserBalance.ts",["cc","./Common.ts","./GameStorage.ts"],(function(t){"use strict";var e,a,s,r;return{setters:[function(t){e=t.cclegacy},function(t){a=t.CurrencyType},function(t){s=t.gameStorage,r=t.GameStorageKey}],execute:function(){e._RF.push({},"bfc0013gilF9KdZYocPH5xw","UserBalance",void 0);var i=t("UserBalance",function(){function t(){this.userWallet={gold:0,cash:0,water:0}}var e=t.prototype;return e.initData=function(){this.userWallet=JSON.parse(s.getItem(r.USER_WALLET))},e.saveData=function(){var t=JSON.stringify(this.userWallet);s.setItem(r.USER_WALLET,t)},e.useGold=function(t){return t>this.userWallet.gold?-1:(this.userWallet.gold-=t,this.saveData(),this.userWallet.gold)},e.useCash=function(t){return t>this.userWallet.gold?-1:(this.userWallet.cash-=t,this.saveData(),this.userWallet.cash)},e.useWatter=function(t){return t>this.userWallet.gold?-1:(this.userWallet.water-=t,this.saveData(),this.userWallet.water)},e.addGold=function(t){this.userWallet.gold+=t,this.saveData()},e.addCash=function(t){this.userWallet.cash+=t,this.saveData()},e.addCurrency=function(t,e){switch(t){case a.Gold:this.addGold(e);break;case a.Cash:this.addCash(e);break;case a.Water:this.addWater(e)}},e.useCurrency=function(t,e){var s=-1;switch(t){case a.Gold:s=this.useGold(e);break;case a.Cash:s=this.useCash(e);break;case a.Water:s=this.useWatter(e)}return s},e.addWater=function(t){this.userWallet.water+=t,this.saveData()},t}());t("userBalance",new i);e._RF.pop()}}}));

System.register("chunks:///_virtual/ZooProcessingSystem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.mjs_cjs=&original=.js","./ItemConfig.ts","./Constants.ts","./RanchComponent.ts","./GameEvent.ts","./EventTarget.ts","./GameStorage.ts","./UserBalance.ts","./index.js"],(function(e){"use strict";var t,n,i,o,a,r,s,c,h,u,g,l,f;return{setters:[function(e){t=e.inheritsLoose,n=e.applyDecoratedDescriptor,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy},null,function(e){r=e.itemConfigs},function(e){s=e.Constants},function(e){c=e.RanchComponent},function(e){h=e.GameEvent},function(e){u=e.default},function(e){g=e.gameStorage},function(e){l=e.userBalance},function(e){f=e.default}],execute:function(){var p,d,m,y,D;a._RF.push({},"4c30b12ZZ5DD6EIfWRwic/M","ZooProcessingSystem",void 0);e("ZooProcessingSystem",(p=f.Inject("gameState"),d=f.Inject("scene"),m=function(e){function n(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,i(t,"gameState",y,o(t)),i(t,"scene",D,o(t)),t.ranchGroup=void 0,t.currentTime=void 0,t}t(n,e);var a=n.prototype;return a.initialized=function(){u.on(h.BuyZoo,this.onBuyZoo,this),u.on(h.Bathing,this.onBathing,this),u.on(h.Petting,this.onPetting,this),u.on(h.Feeding,this.onFeeding,this),this.ranchGroup=this.scene.getChildByName("RanchGroup")},a.getSelectingRanch=function(){if(void 0!==this.gameState.selectedRanch){var e=g.getGardenData();if(this.gameState.selectedRanch>=e.ranches.length)throw Error("selecting ranch index greater than total");return e.ranches[this.gameState.selectedRanch]}},a.onBuyZoo=function(){this.getSelectingRanch().unlocked=!0,g.updateGardenData()},a.onBathing=function(){var e=this.getSelectingRanch();e&&(e.bathingTime=Date.now(),this.processDropCurrency(this.gameState.selectedRanch,s.ANIMAL_BATHING_DROP_RATIO))},a.onPetting=function(){var e=this.getSelectingRanch();e&&(e.pettingTime=Date.now(),this.processDropCurrency(this.gameState.selectedRanch,s.ANIMAL_PETTING_DROP_RATIO))},a.onFeeding=function(){var e=this.getSelectingRanch();e&&(e.feedingTime=Date.now(),this.processDropCurrency(this.gameState.selectedRanch,s.ANIMAL_BATHING_DROP_RATIO))},a.process=function(){this.currentTime=Date.now();for(var e=g.getGardenData(),t=0;t<e.ranches.length;t++){var n=e.ranches[t];if(n.unlocked)if(n.lastDropTime)s.ANIMAL_DROP_CURRENCY_COOLDOWN-(this.currentTime-n.lastDropTime)/1e3<0&&(n.lastDropTime=this.currentTime,this.processDropCurrency(t));else n.lastDropTime=this.currentTime,g.updateGardenData()}},a.processDropCurrency=function(e,t){void 0===t&&(t=1);var n=r["animal_"+e];if(n){var i=Math.round(n.dropAmount*t);l.addCurrency(n.currencyType,i),g.updateGardenData(),this.ranchGroup.children[e].getComponent(c).showEffectCurrency(n.currencyType)}},a.dispose=function(){u.off(h.BuyZoo,this.onBuyZoo,this),u.off(h.Bathing,this.onBathing,this),u.off(h.Petting,this.onPetting,this),u.off(h.Feeding,this.onFeeding,this)},n}(f.System),y=n(m.prototype,"gameState",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=n(m.prototype,"scene",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m));a._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});